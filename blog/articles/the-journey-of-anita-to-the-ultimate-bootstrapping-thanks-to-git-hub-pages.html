<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="application-name" content="Anita"> <meta name="msapplication-TileColor" content="#002346"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon/favicon-16x16.png"> <link rel="manifest" href="/assets/icons/favicon/site.webmanifest"> <link rel="mask-icon" href="/assets/icons/favicon/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/icons/favicon/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/icons/favicon/browserconfig.xml"> <meta name="theme-color" content="#002346"> <link rel="stylesheet" href="/assets/css/styles-0-16-3.min.css"> <title>The journey of Anita to the ultimate bootstrapping thanks to GitHub Pages</title> <meta name="description" content="How to build a zero cost (as in zero kelvins) free and open source progressive web app and host it on GitHub Pages."> </head> <body class="text-gray-800 antialiased flex flex-col h-screen justify-between"> <nav class="top-0 absolute z-50 w-full flex flex-wrap items-center justify-between py-3 navbar-expand-lg bg-gradient-to-r from-prussian-blue-400 to-prussian-blue-700"> <div class="container px-4 mx-auto flex flex-wrap items-center justify-between z-50"> <div class="w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start"> <div class="flex-grow relative flex items-center lg:w-auto lg:static"> <a class="text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase text-white" href="/"> <img src="/assets/logo/logo_square.svg" style="height:35px;width:auto" alt="Anita"> </a> <a class="text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase text-white" href="/"> Anita </a> </div> <button class="cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none" type="button" onclick='toggleNavbar("main-collapse-navbar")'> <ion-icon name="menu-outline" class="text-white" style="width:1.5em;height:1.5em"></ion-icon> </button> </div> <div class="lg:flex flex-grow items-center bg-white lg:bg-transparent lg:shadow-none hidden" id="main-collapse-navbar"> <ul class="flex flex-col lg:flex-row list-none lg:ml-auto"> <li class="flex items-center"> <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold" href="/blog"> Blog </a> </li> <li class="flex items-center"> <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold" href="https://github.com/anita-app/anita"> <span class="inline-block mr-2">Source Code</span> <ion-icon name="logo-github" class="lg:text-gray-300 text-gray-500" style="width:1.5em;height:1.5em"></ion-icon> </a> </li> </ul> </div> </div> </nav> <section class="relative"> <div class="mx-auto pb-20 mt-36 mb-36"> <div class="w-full max-w-3xl ml-auto mr-auto py-10 px-6 sm:px-8 md:px-0"> <article> <div class="pt-2 pb-1 pr-5 border-b rounded-t"> <h1 class="block text-center font-light leading-8 tracking-tight text-gray-900 text-4xl pb-6">The journey of Anita to the ultimate bootstrapping thanks to GitHub Pages</h1> <span class="text-sm text-gray-400">Article</span> </div> <p class="text-sm text-gray-500 mb-8 mt-1">Published on November 2, 2021 by ilDon </p> <figure class="mb-10 mt-10"> <img class="w-full rounded-lg mx-auto" src="/assets/images/blog/hosting-pwa-for-free/hosting-pwa-for-free.png" alt="" width="1310" height="873"> </figure> <div class="prose prose-lg prose-prussian-blue mx-auto mt-6 text-gray-500 max-w-none"> <p>Since I've started developing for the web, I have always looked for ways to develop, host, and distribute my free and open-source projects (FOSS) at no cost. The reasoning is that there are already enough factors that make open source challenging to maintain, so economic sustainability should not be one.</p> <p>My latest FOSS project is <a href="https://anita-app.com/">Anita</a>, an app that I developed primarily because I needed it, and because the way I want to build it makes it a very fun project to work on. The first requirement that make this project fun is that I want it to <strong>cost zero</strong> (as in <em>zero kelvins</em>), not considering my labor.</p> <p>I’ll document here on the Anita Blog my experience in developing the most fun parts of Anita. In this first post I explain how I solved the first requirement (zero costs) by developing Anita as a Progressive Web App (PWA), and why I think this approach can suit many other FOSS projects. Due to the nature of this topic, there won’t be much code involved, I’ll improve that in future posts!</p> <h2 id="advantagesofpwasfromacostperspective">Advantages of PWAs from a cost perspective</h2> <p>A PWA combines some advantages of traditional web pages, such as easily loading on any platform, with the speed, reliability, and functionality of modern desktop and mobile apps. </p> <p>On top of that, we are now at the point in which using FOSS to build web apps is easier than ever. All you need to publish a new web app is a computer. It does not need to be a fancy <em>n</em>-core, GPU-equipped workhorse. Anything that can run Linux will do.</p> <h3 id="mytoolsfreecompromises">My tools: <code>free !== compromises</code></h3> <p>The entire lifecycle of a web project can nowadays be covered by FOSS. Below I’ll list some of the tools I use on my dev machine, they are <u>all</u> available on Windows, Linux, and Mac. I’ll get to the hosting part later in the post.</p> <ul> <li>Code editor: <a href="https://code.visualstudio.com/">Visual Studio Code (VS Code)</a> — it’s by far my favorite wed dev editor. Essentially with all the extensions and functionalities that have been added through the years, it has become one of the most customizable and complete IDEs for the web. If you factor in that it is completely free, it’s really hard to beat it. I have installed in VS Code many extensions, those that I find more useful for developing Anita are the following, and I could not recommend them more:<ul> <li><a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template">Angular Language Service</a>: the Anita PWA is developed with Angular, this extension speeds up development significantly;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=johnpapa.Angular2">Angular Snippets (Version 12)</a>: same as above, and it’s maintained by <a href="https://johnpapa.net/">John Papa</a>, who’s <a href="https://github.com/johnpapa/angular-styleguide">Style Guide</a> made me a much better developer in the AngularJS era;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template">Comments in Typescript</a>: writing docs can be boring, this makes it at least efficient; </li> <li><a href="https://marketplace.visualstudio.com/items?itemName=Zignd.html-css-class-completion">IntelliSense for CSS class names in HTML</a>: helps to suggest CSS class names based on your stylesheets, works like magic;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=ccimage.jsonviewer">JSON Viewer</a>: since Anita supports saving data to JSON, this helps debugging;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=valentjn.vscode-ltex">LTeX – LanguageTool grammar/spell checking</a>: prevents typos and other mistakes. Very useful for writing this blog with VS Code;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=shalinjames.vscode-nebular-snippets">Nebular Code snippets</a>: Anita uses <a href="https://akveo.github.io/nebular/">Nebular</a> for the UI, snippets are always welcome;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=miclo.sort-typescript-imports">Sort Typescript Imports</a>: I like to keep things tidy;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss">Tailwind CSS IntelliSense</a>: I chose to use Tailwind CSS for the landing page of Anita and for the blog. I had little previous experience with Tailwind, and it’s a lot of fun. Thanks to the code completion suggestions of this extension, and how intuitive is Tailwind, it's easy to guess the right CSS class name for any CSS property;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=austenc.tailwind-docs">Tailwind Docs</a>: faster than googling!;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-tslint-plugin">TSLint</a>: once again, I like to keep things tidy, so with TSLint I can easily enforce (on myself) rules on how code should be written;</li> <li><a href="https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log">Turbo Console Log</a>: super quick way to dump to the console something for debugging.</li></ul></li> <li>Vector images: <a href="https://icons8.com/lunacy">Lunacy</a> — hands down the best vector image editor out there. I used to work with Sketch, but it’s lack of cross-platform support forced me to abandon it (at the time they did not offer a web app). Now I would not go back.</li> <li>Other images: <a href="https://www.gimp.org/">Gimp</a> — I try to use Lunacy as much as possible, but when I can’t Gimp is an excellent editor for the price (free).</li> <li>Version control system: <a href="https://git-scm.com/">Git</a> — I think Git does not need any introduction. My favorite tools to work with git are:<ul> <li><a href="https://www.npmjs.com/package/changelog-flow"><code>changelog-flow</code></a>: a library I developed and currently maintain to automate some CLI operations. It has become a very quick way to automate the deployment of new versions of projects I work on;</li> <li><a href="https://www.sourcetreeapp.com/">SourceTree</a>: very complete GUI for git commands, with integrated git-flow support;</li> <li><a href="https://desktop.github.com/">GitHub Desktop</a>: minimal, sometimes just what’s needed.</li></ul></li> </ul> <h3 id="waitasecondthesameappliestoinstalleddesktopandmobileappsespeciallyhybridones">Wait a second, the same applies to installed desktop and mobile apps, especially hybrid ones!</h3> <p>If you are like me, meaning that you have developed hybrid apps for desktop and mobile, you must be thinking that, from a cost perspective, the upsides of PWAs apply also to hybrid apps.</p> <p>I’ll even admit that for developing some features of Anita it would be easier to use tools like <a href="https://www.electronjs.org/">Electron</a>, <a href="https://reactnative.dev/">React Native</a>, <a href="https://nativescript.org/">Native Script</a> or <a href="https://capacitorjs.com/">Capacitor</a>. PWAs do still have some limitations that require some workarounds and, as a consequence, are less than ideal from a UX perspective. One great example would be access to the file system, which I will try to cover in an upcoming post.</p> <p>Tools like Electron, however, are not suited for shipping apps at zero cost. Although they all are free, they are essentially just a different way of developing a native app. For this reason, they present some bottlenecks that make it very hard, if not impossible, to reach end-users of major OSes without any cost. At least app stores fees, or even mere signing certificates, still need some sort of (recurring) payment. Additionally, building the same app for multiple platforms on one single machine is still essentially impossible. <a href="https://www.electron.build/multi-platform-build.html">Even Electron-based apps can’t still be built on one machine</a>. There are cloud build services, but to cover all OSes they usually come at a cost.</p> <p>For this reason, the only true zero cost is pure web development. This does have some limitations, but for Anita they are not a deal-breaker and the number of functionalities available to PWA is growing constantly, so it’s a matter of time before PWA are just as capable as installed apps.</p> <h2 id="convertingatraditionalwebappintoapwa">Converting a traditional web app into a PWA</h2> <p>Developing a PWA is essentially just a matter of developing for the web. This means that we can take advantage of all the existing tools and libraries. </p> <p>Even the specific code needed to convert a web app to a PWA is often a built-in feature of frameworks and libraries. Angular has a specific package for PWAs (<a href="https://angular.io/guide/service-worker-getting-started"><code>@angular/pwa</code></a>), and so does Vue (<a href="https://cli.vuejs.org/core-plugins/pwa.html"><code>@vue/cli-plugin-pwa</code></a>) and the same can be achieved with React (for example with <a href="https://create-react-app.dev/docs/making-a-progressive-web-app/"><code>create-react-app</code></a>).</p> <p>I won’t go into the details of how I added PWA capabilities to Anita as that is very well covered by Angular guides, and many other tutorials online. As a general rule, in most cases, adding offline functionalities and other PWA capabilities is just a matter of configuring some parameters. The obvious advantage for any web developer is that it becomes very easy to ship to end users an application that can feel and look like a native app.</p> <h2 id="hostingapwaongithubpages">Hosting a PWA on GitHub pages</h2> <p>Hosting a web app still requires a server. For commercial applications finding a very cheap and reliable hosting solution for a PWA is trivial. As much as those solutions are increasingly affordable though, they are often not completely free, especially when the usage exceeds some kind of threshold (bandwidth, traffic, etc.).</p> <p>This is where <a href="https://pages.github.com/">GitHub Pages</a> comes to the help. Thanks to GitHub Pages it is possible to host for free static sites. This includes PWA that don't depend on any server. In short, building a progressive web app on GitHub Pages is just like building a non-progressive web app, except it's hosted on GitHub Pages instead of your own server.</p> <h3 id="settingupanewgithubpage">Setting up a new GitHub page</h3> <p>Setting up a new repository and using it as a website is extremely easy. The <a href="https://pages.github.com/">official GitHub Pages guide</a> is so well written that I could not possibly improve here on the setup process. I’ll just add that the whole process of setting up a new hosting does really take few minutes.</p> <h3 id="handlingurlsofpwashostedongithubpages">Handling URLs of PWAs hosted on GitHub Pages</h3> <p>Hosting a PWA on the GitHub Pages server does come with few caveats. You do not have any control on the server whatsoever. You take it as it is. Likewise, you can’t change any configuration and there is no way in which you can implement rewrite rules. </p> <p>For a PWA this can be problematic because modern PWAs usually write internal URLs as proper web addresses. For example, the internal address of Anita to create a new project is <code>[baseUrl]/private/projects/add</code>, where <code>baseUrl</code> is <code>https://anita-app.com</code>. If this address was entered in the URL bar of the browser as it is, GitHub Pages would look for <code>https://anita-app.com/private/projects/add/index.html</code>. This would result in a 404 Error because the server of GitHub Pages looks only for static files at the exact destination matching the URL (<a href="https://anita-app.com/private/projects/add/index.html">try</a>).</p> <p>The solution, in Angular, is to set <code>useHash</code> to <code>true</code> when initializing <code>RouterModule</code> (for more info see the <a href="https://angular.io/api/router/ExtraOptions">Angular docs</a>):</p> <div class="code-block"><pre class="d"><code>RouterModule.forRoot(routes, { useHash: true })
</code></pre></div> <p>With <code>useHash</code> set to <code>true</code> the above URL will be written by Angular like so: <a href="https://anita-app.com/app/#/private/projects/add"><code>https://anita-app.com/app/#/private/projects/add</code></a>. In this way the GitHub Pages server will look for <code>https://anita-app.com/app/index.html</code>, which is the single HTML page in which our PWA is contained. The rest of the URL (after the <code>#</code>) is ignored because, for the server, that is an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a?retiredLocale=it#linking_to_an_element_on_the_same_page">anchor link to an element in <code>index.html</code></a>. Once GitHub Pages has served <code>index.html</code>, Angular will be able to interpret the “anchor link” and load the proper view of our app.</p> <p>In React a similar behavior can be achieved with <a href="https://reactrouter.com/web/api/HashRouter"><code>HashRouter</code></a>. In Vue it is even easier as the <em>hash mode</em> is on by default, unless the mode <code>history</code> is selected (see the <a href="https://router.vuejs.org/guide/essentials/history-mode.html">Vue docs</a>).</p> <h3 id="remotedatabaseandcloudsyncing">Remote database and cloud syncing</h3> <p>To my best knowledge there are currently no options to host a web app with a “forever free” cloud database. There are some services that offer free tiers, but as usage increases the free tier inevitably runs out.</p> <p>Apart from privacy and security reasons, this is one of the main reasons I have chosen to develop Anita as a local and offline first PWA. All data can nowadays be stored on our (more than capable) devices.</p> <p>A remote repository is nevertheless useful to easily sync data between devices. For this reason, the roadmap for Anita includes building support for syncing local data with a remote database. But because I can’t, and don’t want to, provide a free database to everyone, the idea at this stage is to let each user provide the connection details to their preferred remote database. In this way Anita can stay coherent with the zero costs requirement, and on top of that it will grant to users the highest degree of freedom possible in choosing their database provider.</p> <p>There are many things to discuss on this topic, I’ll address them when I’ll start to design the logic for connecting to remote databases, possibly including support for the <a href="https://ipfs.io/">InterPlanetary File System (IPFS)</a> protocol. Stay tuned!</p> <h3 id="customdomain">Custom domain</h3> <p>Websites hosted on GitHub Pages are assigned by default a URL with this structure: <code>https://[username].github.io</code>, where <code>username</code> is the name of the organization or of the user to which the repository belongs. For Anita that would be <code>https://anita-app.github.io</code>.</p> <p>Although a free subdomain is a nice thing, hosting a PWA on a subdomain has two main disadvantages:</p> <ol> <li>Many PWA features that are relevant for Anita, <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Basic_Terminology">such as IndexedDB</a>, adhere to the same-origin policy. This means that data saved locally by Anita is scoped to the domain from which is served the PWA. A user visiting Anita on the same computer and on the same browser, but from different URLs, would see different data. For this reason, it is essential to ensure that Anita can be served from the same unique origin. A custom domain that can be set to point to any hosting is the best way to ensure that. If for any reason Anita can no longer be hosted on GitHub Pages, the whole app can be transferred to another server, and the domain can be pointed to the new location. In this way there won’t be any disruption for the users. Because the domain remains the same, the origin remains the same, even if the server changes.</li> <li>The subdomain is rather long and difficult to remember for someone who is not familiar with GitHub. While among developers GitHub is well known, outside this (admittedly large) circle there are a ton of potential people interested in checking out Anita that have never heard of GitHub.</li> </ol> <p>For these reasons I purchased the domain <a href="https://anita-app.com/">anita-app.com</a>. </p> <p>Unfortunately, this means that I did incur in a cost. For me that is still acceptable because the price is negligible (the domain was available) and because I consider that having a custom domain on internet is a condition of existence for a project like Anita.</p> <h3 id="legalstuffwatchoutforthetermsandconditions">Legal stuff: watch out for the terms and conditions</h3> <p>Before hosting Anita on GitHub Pages I checked whether GitHub was actually ok with that. The terms and conditions of GitHub Pages can be found under the <a href="https://docs.github.com/en/github/site-policy/github-terms-for-additional-products-and-features">GitHub Terms for Additional Products and Features</a>.</p> <p>The <a href="https://docs.github.com/en/github/site-policy/github-terms-for-additional-products-and-features">section dedicated to Pages</a> states the following:</p> <blockquote> <p>GitHub Pages is not intended for or allowed to be used as a free web hosting service to run your online business, e-commerce site, or any other website that is primarily directed at either facilitating commercial transactions or providing commercial software as a service (SaaS). Some monetization efforts are permitted on Pages, such as donation buttons and crowdfunding links.</p> </blockquote> <p>Anita is free and open source software, and I do not intend, at least in the foreseeable future, to monetize it, or transform it in any kind of business. I do intend to allow for some donations in the future, but that seems to be allowed by Pages Terms.</p> <p>For this reason at this time I think that Anita is not a <em>commercial Software as a Service</em>. I would define it as a <em>non-commercial Software as a Gift</em> (SaaG). In case you've never heard of SaaG, I just came up with that. </p> <p>All things considered, given my specific case and my intended use of the service, I think I am in the clear. If I am not, I sincerely apologize.</p> <h2 id="finalthoughts">Final thoughts</h2> <p>As a web developer I am truly grateful for all the great tools and support from the open-source community that make coding for the web a very pleasant and exiting task. Without all these technologies and tools I’ve listed here Anita would not be possible.</p> </div> </article> <div class="flex justify-center mt-10"> <a class="bg-blue-500 hover:bg-blue-700 text-white py-4 px-6 rounded" href="/app"> <span class="font-bold text-2xl">Get started</span><sup class="text-xs">Beta</sup> </a> </div> </div> </div> </section> <footer class="relative bg-gray-300 pt-8 pb-6"> <div class="bottom-auto top-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden -mt-20" style="height:80px;transform:translateZ(0)"> <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" version="1.1" viewBox="0 0 2560 100" x="0" y="0"> <polygon class="text-gray-300 fill-current" points="2560 0 2560 100 0 100"></polygon> </svg> </div> <div class="container mx-auto px-4"> <div class="flex flex-wrap items-center md:justify-left justify-left"> <div class="w-2/12 md:w-3/12"> <button class="bg-white text-gray-900 shadow-lg font-normal h-10 w-10 items-center justify-center align-center rounded-full outline-none focus:outline-none mr-2" onclick='window.open("https://github.com/anita-app/anita","_blank")'> <ion-icon name="logo-github" class="mt-1" style="width:1.5em;height:1.5em"></ion-icon> </button> </div> <div class="column-1 w-10/12 md:w-6/12 text-right md:text-center py-1"> <div class="flex justify-end md:justify-center text-sm text-gray-600 font-semibold flex-wrap"> Developed with <ion-icon name="heart-outline" class="text-red-800 self-end ml-1 mr-1" style="width:1.2em;height:1.2em"></ion-icon> by humans & <a href="https://copilot.github.com/" target="_blank" class="ml-1"><u>GitHub Copilot</u></a>, </div> <div class="flex justify-end md:justify-center text-sm text-gray-600 font-semibold flex-wrap"> made possible by <a href="/licenses.html" class="ml-1"><u>open source</u></a>. </div> </div> </div> </div> <script src="/assets/js/main-0-16-3.min.js"></script> <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script> <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script> <script data-goatcounter="https://anita.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script> </footer> </body> </html>