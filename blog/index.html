<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="application-name" content="Anita"> <meta name="msapplication-TileColor" content="#002346"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon/favicon-16x16.png"> <link rel="manifest" href="/assets/icons/favicon/site.webmanifest"> <link rel="mask-icon" href="/assets/icons/favicon/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/icons/favicon/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/icons/favicon/browserconfig.xml"> <meta name="theme-color" content="#002346"> <link rel="stylesheet" href="/assets/css/styles-0-14-19.min.css"> <title>Anita Blog</title> <meta name="description" content="Anita's Blog, where we discuss the technology behind Anita, challenges and solutions in building a private, powerful, and fully customizable open source data management solution."> </head> <body class="text-gray-800 antialiased flex flex-col h-screen justify-between"> <nav class="top-0 absolute z-50 w-full flex flex-wrap items-center justify-between py-3 navbar-expand-lg bg-gradient-to-r from-prussian-blue-400 to-prussian-blue-700"> <div class="container px-4 mx-auto flex flex-wrap items-center justify-between z-50"> <div class="w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start"> <div class="flex-grow relative flex items-center lg:w-auto lg:static"> <a class="text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase text-white" href="/"> <img src="/assets/logo/logo_square.svg" style="height:35px;width:auto" alt="Anita"> </a> <a class="text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase text-white" href="/"> Anita </a> </div> <button class="cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none" type="button" onclick='toggleNavbar("main-collapse-navbar")'> <ion-icon name="menu-outline" class="text-white" style="width:1.5em;height:1.5em"></ion-icon> </button> </div> <div class="lg:flex flex-grow items-center bg-white lg:bg-transparent lg:shadow-none hidden" id="main-collapse-navbar"> <ul class="flex flex-col lg:flex-row list-none lg:ml-auto"> <li class="flex items-center"> <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold" href="/blog"> Blog </a> </li> <li class="flex items-center"> <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold" href="https://github.com/anita-app/anita"> <span class="inline-block mr-2">Source Code</span> <ion-icon name="logo-github" class="lg:text-gray-300 text-gray-500" style="width:1.5em;height:1.5em"></ion-icon> </a> </li> </ul> </div> </div> </nav> <section class="relative"> <div class="mx-auto mt-36 mb-36"><div class="w-full lg:w-7/12 ml-auto mr-auto p-10 border-2 rounded-md shadow-md"><h3><a class="text-lg font-bold" href="/blog/articles/make-typeScript-infer-types-in-switch-statements-without-casting.html">How to make TypeScript infer types in switch statements without casting (in a Redux reducer or anywhere else)</a></h3><p class="text-sm text-gray-700">Published on 2022/2/1 by ilDon</p><div class="mt-5 row-preview"><div class="content-preview text-justify">As a developer with very poor memory, I really like coding in typed languages. They allow me to forget my data types, and be sure to pass the right props around my code. If you are unfamiliar with typed languages, I suggest you read <a href="https://www.google.it/books/edition/Advanced_Topics_in_Types_and_Programming/A5ic1MPTvVsC?hl=it&gbpv=0">this</a> book for a general overview, or <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">this</a> article for a more specific hands-on guide for TypeScript. One annoying thing about developing in TypeScript is that it is not obvious how to infer types in switch statements. This is because the compiler doesn't know what type we are passing to the switch statement. I will explain my solution to this problem by example, posting here the relevant part of the code needed to achieve the desired result. I have also set up a live (working) example of the code in <a href="https://stackblitz.com/edit/switch-with-types?file=switch.ts">this <em>StackBiz</em> project</a>. Because I first developed this while working on a Redux reducer, I will provide an example that imitates what I would do in a Redux reducer. Since it is a simple use-case, it can easily be applied to any other scenario in which you need to infer types in switch statements. I will focus on the <em>how-to part</em>, not the <em>why-it-works</em> part. I came across this solution after I had already written a switch statement in TypeScript. I was not trying to make TypeScript infer types, I was only being as precise as possible in my typing. Turns out, the compiler picked up more than I expected. </div><div class="background"></div></div><div class="mt-5 text-right"><a class="text-gray-700" style="font-variant:small-caps" href="/blog/articles/make-typeScript-infer-types-in-switch-statements-without-casting.html">Read more</a></div></div><div class="w-full lg:w-7/12 ml-auto mr-auto p-10 border-2 rounded-md shadow-md mt-10"><h3><a class="text-lg font-bold" href="/blog/articles/sqlite-in-a-pwa-with-file-system-access-api.html">SQLite in a PWA with FileSystemAccessAPI</a></h3><p class="text-sm text-gray-700">Published on 2021/12/1 by ilDon</p><div class="mt-5 row-preview"><div class="content-preview text-justify">Anita now supports SQLite, which means you can save your data in a local database on your device from a Progressive Web App. This is achieved by using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API"><code>FileSystemAccessAPI</code></a>, so the user only needs to choose where to keep the database once, and then the PWA can perform all CRUD operations it needs, with some caveats. Before we proceed further in understanding how this works, let's first clear the air about the reason for implementing SQLite in a PWA with the <code>FileSystemAccessAPI</code>. SQLite is a database that is used to store data in a local file system, and the <code>FileSystemAccessAPI</code> is a way to access that file system. So combining the two a PWA can access the database and perform CRUD operations on it. And because Anita is an offline <s>first</s> only app, that is a very good match. An even better reason, though, is well described by paraphrasing a quote from Michael Crichton's Jurassic Park: <blockquote> I was so preoccupied over whether or not I could, I didn't stop to think if <em>I should</em>. </blockquote></div><div class="background"></div></div><div class="mt-5 text-right"><a class="text-gray-700" style="font-variant:small-caps" href="/blog/articles/sqlite-in-a-pwa-with-file-system-access-api.html">Read more</a></div></div><div class="w-full lg:w-7/12 ml-auto mr-auto p-10 border-2 rounded-md shadow-md mt-10"><h3><a class="text-lg font-bold" href="/blog/articles/porting-anita-from-angular-to-react-resulted-in-20-less-code.html">Porting Anita from Angular to React resulted in 20% less code</a></h3><p class="text-sm text-gray-700">Published on 2021/11/10 by ilDon</p><div class="mt-5 row-preview"><div class="content-preview text-justify">I started developing Anita in Angular because I had previously developed with it a form generator that could power the core parts of the app. Having years of experience also with React, though, I soon realized that Angular was slowing me down. So I decided to port Anita from Angular to React. The whole project took under 10 days, in which I worked on it only in my spare time. I can easily say that it was well worth it as the code base, with the exact same functionalities, is now <strong>20% smaller</strong>.</div><div class="background"></div></div><div class="mt-5 text-right"><a class="text-gray-700" style="font-variant:small-caps" href="/blog/articles/porting-anita-from-angular-to-react-resulted-in-20-less-code.html">Read more</a></div></div><div class="w-full lg:w-7/12 ml-auto mr-auto p-10 border-2 rounded-md shadow-md mt-10"><h3><a class="text-lg font-bold" href="/blog/articles/the-journey-of-anita-to-the-ultimate-bootstrapping-thanks-to-git-hub-pages.html">The journey of Anita to the ultimate bootstrapping thanks to GitHub Pages</a></h3><p class="text-sm text-gray-700">Published on 2021/11/2 by ilDon</p><div class="mt-5 row-preview"><div class="content-preview text-justify">Since I've started developing for the web (spoiler alert: it has been a couple of decades), I have always looked for ways to develop, host, and distribute my free and open-source projects (FOSS) at no cost. The reasoning is that there are already enough factors that make open source challenging to maintain, so economic sustainability should not be one. My latest FOSS project is <a href="https://anita-app.com/">Anita</a>, an app that I developed primarily because I needed it, and because the way I want to build it makes it a very fun project to work on. The first requirement that make this project fun is that I want it to <strong>cost zero</strong> (as in <em>zero kelvins</em>), not considering my labor. Iâ€™ll document here on the Anita Blog my experience in developing the most fun parts of Anita. In this first post I explain how I solved the first requirement (zero costs) by developing Anita as a Progressive Web App (PWA), and why I think this approach can suit many other FOSS projects. Due to the nature of this topic, there wonâ€™t be much code involved, Iâ€™ll improve that in future posts!</div><div class="background"></div></div><div class="mt-5 text-right"><a class="text-gray-700" style="font-variant:small-caps" href="/blog/articles/the-journey-of-anita-to-the-ultimate-bootstrapping-thanks-to-git-hub-pages.html">Read more</a></div></div></div> </section> <footer class="relative bg-gray-300 pt-8 pb-6"> <div class="bottom-auto top-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden -mt-20" style="height:80px;transform:translateZ(0)"> <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" version="1.1" viewBox="0 0 2560 100" x="0" y="0"> <polygon class="text-gray-300 fill-current" points="2560 0 2560 100 0 100"></polygon> </svg> </div> <div class="container mx-auto px-4"> <div class="flex flex-wrap items-center md:justify-left justify-left"> <div class="w-6/12 md:w-4/12"> <button class="bg-white text-gray-900 shadow-lg font-normal h-10 w-10 items-center justify-center align-center rounded-full outline-none focus:outline-none mr-2" onclick='window.open("https://github.com/anita-app/anita","_blank")'> <ion-icon name="logo-github" class="mt-1" style="width:1.5em;height:1.5em"></ion-icon> </button> </div> <div class="w-6/12 md:w-4/12 text-right md:text-center py-1"> <div class="flex justify-center text-sm text-gray-600 font-semibold"> Developed with <ion-icon name="heart-outline" class="text-red-800 self-end ml-1 mr-1" style="width:1.2em;height:1.2em"></ion-icon> by humans & <a href="https://copilot.github.com/" target="_blank" class="ml-1"><u>GitHub Copilot</u></a>, </div> <div class="text-sm text-gray-600 font-semibold"> made possible by <a href="/licenses.html"><u>open source</u></a>. </div> </div> </div> </div> <script src="/assets/js/main-0-14-19.min.js"></script> <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script> <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script> <script data-goatcounter="https://anita.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script> </footer> </body> </html>