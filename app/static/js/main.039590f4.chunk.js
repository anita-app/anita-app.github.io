(this["webpackJsonpanita-app"]=this["webpackJsonpanita-app"]||[]).push([[0],{83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);n(44);var r,i=n(6);!function(e){e[e.toggleSidebar=1]="toggleSidebar",e[e.addProjectToList=2]="addProjectToList",e[e.setProjectList=3]="setProjectList",e[e.setCurrentProject=4]="setCurrentProject",e[e.resetCurrentProject=5]="resetCurrentProject",e[e.addSectionForChildOfSelector=6]="addSectionForChildOfSelector",e[e.resetSectionForChildOfSelector=7]="resetSectionForChildOfSelector",e[e.setValidStateForEle=8]="setValidStateForEle",e[e.unsetValidStateForEle=9]="unsetValidStateForEle",e[e.updateFormElement=10]="updateFormElement",e[e.setFormProject=11]="setFormProject",e[e.setProjectEditorMode=12]="setProjectEditorMode",e[e.updateFormProjectSettings=13]="updateFormProjectSettings",e[e.updateFormProjectAddSection=14]="updateFormProjectAddSection",e[e.updateFormProjectUpdateSection=15]="updateFormProjectUpdateSection",e[e.updateFormProjectUpdateFormModelOfSection=16]="updateFormProjectUpdateFormModelOfSection",e[e.updateFormProjectRemoveSection=17]="updateFormProjectRemoveSection",e[e.updateFormProjectAddFieldToSection=18]="updateFormProjectAddFieldToSection",e[e.updateFormProjectRemoveFieldFromSection=19]="updateFormProjectRemoveFieldFromSection",e[e.updateFormProjectUpdateFormModelAddOption=20]="updateFormProjectUpdateFormModelAddOption",e[e.updateFormProjectUpdateFormModelDeleteOption=21]="updateFormProjectUpdateFormModelDeleteOption",e[e.updateFormProjectUpdateFormModelOptionValue=22]="updateFormProjectUpdateFormModelOptionValue"}(r||(r={}));var a,c={element:null},o=n(13),s={};!function(e){e[e.basicInput=1]="basicInput",e[e.basicTextarea=2]="basicTextarea",e[e.basicCheckbox=3]="basicCheckbox",e[e.basicSelect=4]="basicSelect",e[e.basicRadio=5]="basicRadio",e[e.hiddenInput=6]="hiddenInput",e[e.optionsMaker=7]="optionsMaker",e[e.datePicker=8]="datePicker",e[e.dateTimePicker=9]="dateTimePicker",e[e.childOfSelectorForSection=10]="childOfSelectorForSection",e[e.parentsSelector=11]="parentsSelector"}(a||(a={}));var l,u,d=[{value:a.basicInput,label:"Short text"},{value:a.basicTextarea,label:"Long text"},{value:a.basicCheckbox,label:"Check box"},{value:a.basicSelect,label:"Drop-down list"},{value:a.basicRadio,label:"Alternative choice"},{value:a.datePicker,label:"Date picker"},{value:a.dateTimePicker,label:"Date & time picker"}],f={componentCode:a.basicInput,fieldName:"label",type:"text",label:"Label",required:!0,width:"8"},p={componentCode:a.basicInput,fieldName:"label",type:"text",label:"Label",required:!0,width:"11"},h=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",required:!0,width:"3"},f],b=[{componentCode:a.hiddenInput,fieldName:"value"},p],j=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",disabled:!0,required:!0,width:"3"},f],m=[{componentCode:a.hiddenInput,fieldName:"value"},p];!function(e){e[e.fileSystem=1]="fileSystem",e[e.IndexedDB=2]="IndexedDB"}(l||(l={})),function(e){e.id="id",e.createdAt="createdAt",e.parentsInfo="parentsInfo",e.updatedAt="updatedAt",e.createdBy="createdBy"}(u||(u={}));var x,v,O='All your data is saved in a file on your computer in JSON. Data is updated automatically every time you make any change.\nYou can chose the name and the location of the file when you click "Save" at the bottom of this form.',y="Not supported in this browser. Available only on the Desktop version of Chrome, Edge and Opera.",g="All your data is safely saved on your computer in the IndexedDB database of your Browser.\nYou can export data in a JSON file at any time.",w=[{componentCode:a.hiddenInput,fieldName:u.id},{componentCode:a.hiddenInput,fieldName:u.createdAt},{componentCode:a.basicInput,fieldName:"title",type:"text",value:"",label:"Project",required:!0},{componentCode:a.basicTextarea,fieldName:"description",value:"",label:"Description",required:!0}],k=[].concat(w,[{componentCode:a.basicRadio,fieldName:"localStorage",value:l.IndexedDB,label:"Local storage",required:!0,options:[{label:"File system",value:l.fileSystem,disabled:"undefined"===typeof window.showOpenFilePicker,hint:"function"===typeof window.showOpenFilePicker?O:y},{label:"Local database",value:l.IndexedDB,hint:g}]}]),S=[].concat(w,[{componentCode:a.basicRadio,fieldName:"localStorage",value:l.IndexedDB,label:"Local storage",required:!0,disabled:!0,options:[{label:"File system",value:l.fileSystem,disabled:"undefined"===typeof window.showOpenFilePicker,hint:"function"===typeof window.showOpenFilePicker?O:y},{label:"Local database",value:l.IndexedDB,hint:g}]}]),N=(a.hiddenInput,u.id,a.basicInput,a.childOfSelectorForSection,[{componentCode:a.optionsMaker,fieldName:"options",type:"text",label:"Possible values",prerequisites:[{componentCode:[a.basicSelect,a.basicRadio]}],required:!0},{componentCode:a.basicCheckbox,fieldName:"required",value:!1,label:"Required"}]),I=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:d,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",required:!0,width:"2"}].concat(N),C=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"8"},{componentCode:a.basicSelect,fieldName:"componentCode",options:d,value:1,label:"Data type",required:!0,width:"4"},{componentCode:a.hiddenInput,fieldName:"fieldName"}].concat(N),D=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:d,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",disabled:!0,required:!0,width:"2"}].concat(N),E=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"8"},{componentCode:a.basicSelect,fieldName:"componentCode",options:d,value:1,label:"Data type",required:!0,width:"4"},{componentCode:a.hiddenInput,fieldName:"fieldName"}].concat(N),P=[{componentCode:a.hiddenInput,fieldName:u.id},{componentCode:a.basicInput,fieldName:"title",type:"text",label:"Section name",required:!0},{componentCode:a.childOfSelectorForSection,fieldName:"childOf",label:"Parent sections:",options:[]}];!function(e){e[e.advanced=1]="advanced",e[e.basic=2]="basic"}(v||(v={}));var F,A=(x={},Object(o.a)(x,v.advanced,{projectInfo:{newItem:k,existingItem:S},sectionInfo:P,sectionEles:{newItem:I,existingItem:D},optionEles:{newItem:h,existingItem:j}}),Object(o.a)(x,v.basic,{projectInfo:{newItem:k,existingItem:S},sectionInfo:P,sectionEles:{newItem:C,existingItem:E},optionEles:{newItem:b,existingItem:m}}),x);!function(e){e._settings="_settings",e._sections="_sections"}(F||(F={}));var _,T,M,L=n(3),B=n(4),V=n(25),U=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,null,[{key:"make",value:function(e){var t=new Date((new Date).toUTCString()).toISOString(),n=Math.floor(9e3*Math.random())+1e3,r="".concat(e).concat(t).concat(n);return V.a.SHA256(r).toString()}},{key:"random",value:function(){var e=new Date((new Date).toUTCString()).toISOString(),t=Math.floor(9e3*Math.random())+1e3,n="".concat(e).concat(t);return V.a.SHA256(n).toString()}}]),e}(),R=n(35),q=n.n(R),W={original:(_={},Object(o.a)(_,F._settings,[]),Object(o.a)(_,F._sections,[]),_),project:(T={},Object(o.a)(T,F._settings,[]),Object(o.a)(T,F._sections,[]),T),mode:v.basic},H={sidebar:"-translate-x-full"},z=[],K={project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setCurrentProject:return t.payload;case r.resetCurrentProject:return null;default:return e}},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addProjectToList:return e?e.concat(t.payload):[t.payload];case r.setProjectList:return t.payload;default:return e}},sectionsForChildOfSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addSectionForChildOfSelector:var n=e.concat();if(n.length){var i=n.findIndex((function(e){return e.id===t.payload.id})),a=i>=0?i:n.length;n[a]=t.payload}else n.push(t.payload);return n;default:return e}},formElesValidState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setValidStateForEle:return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t.payload.formEleId,t.payload.valid));case r.unsetValidStateForEle:var n=Object(i.a)({},e);return Object.keys(n).forEach((function(e){e.startsWith(t.payload)&&delete n[e]})),n;default:return e}},formElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.updateFormElement:return{element:Object(i.a)({},t.payload)};default:return e}},formProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setProjectEditorMode:return{original:e.original,project:e.project,mode:e.mode===v.basic?v.advanced:v.basic};case r.setFormProject:return{original:q()(t.payload),mode:e.mode,project:q()(t.payload)};case r.updateFormProjectSettings:return{original:e.original,mode:e.mode,project:Object(i.a)(Object(i.a)({},e.project),{},Object(o.a)({},F._settings,[Object(i.a)({},t.payload)]))};case r.updateFormProjectAddSection:return{original:e.original,mode:e.mode,project:Object(i.a)(Object(i.a)({},e.project),{},Object(o.a)({},F._sections,e.project[F._sections].concat({id:U.random(),title:"",formModel:[{}]})))};case r.updateFormProjectUpdateSection:var n={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return n.project[F._sections][t.payload.index]=Object(i.a)({},t.payload.section),n;case r.updateFormProjectUpdateFormModelOfSection:var a={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return a.project[F._sections][t.payload.indexSection].formModel[t.payload.indexFormElement]=Object(i.a)({},t.payload.formElement),a;case r.updateFormProjectAddFieldToSection:var c={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return c.project[F._sections][t.payload].formModel.push({}),c;case r.updateFormProjectRemoveFieldFromSection:var s={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return s.project[F._sections][t.payload.sectionIndex].formModel.splice(t.payload.fieldIndex,1),s;case r.updateFormProjectRemoveSection:var l={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return l.project[F._sections].splice(t.payload,1),l;case r.updateFormProjectUpdateFormModelAddOption:var u={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)},d=u.project[F._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.length+1;return u.project[F._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.push({label:"",value:d}),u;case r.updateFormProjectUpdateFormModelDeleteOption:var f={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return f.project[F._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.splice(t.payload.indexOptions,1),f;case r.updateFormProjectUpdateFormModelOptionValue:var p={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return p.project[F._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options[t.payload.indexOptions]=t.payload.formElement,p;default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.toggleSidebar:var n=Object(i.a)({},e);return n.sidebar="-translate-x-full"===n.sidebar?"":"-translate-x-full",n;default:return e}}},G=n(37),J=Object(G.a)(K),Y=Object(G.b)(J),Q=n(2),X=n.n(Q),$=n(5),Z={system:void 0},ee={name:"localSettings",fields:["data"]};!function(e){e[e.testData=1]="testData"}(M||(M={}));var te,ne={name:"projects",fields:["title","fileHandle","description",u.createdAt]},re={projects:ne.name,localSettings:ee.name},ie=[],ae=[ne,ee],ce={name:F._sections,pk:"id",fields:["title","childOf","formModel"]},oe={name:F._settings,pk:"id",fields:["title","createdAt","description"]};!function(e){e[e.auds_settings=1]="auds_settings",e[e.auds_sections=2]="auds_sections"}(te||(te={}));var se=[oe,ce],le=u.id,ue=u.parentsInfo,de=u.createdBy,fe=n(43),pe=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,null,[{key:"info",value:function(t,n){var r=n?["".concat(t,": ").concat(JSON.stringify(n))]:[t];return e.doLog(r)}},{key:"list",value:function(t,n){e.isEmptyList(n)&&e.doLog([t,"none"]);var r=Array.isArray(n)?e.listFromArray(n):e.listFromObject(n);return r=r.substring(0,r.length-1),r+=".",e.doLog(["".concat(t," ").concat(r)])}},{key:"isEmptyList",value:function(e){return Array.isArray(e)&&!e.length||"object"===typeof e&&!Object.keys(e).length}},{key:"listFromArray",value:function(t){var n="";return t.forEach((function(t){n+="".concat(e.spacesForListeles).concat(e.formatValueForList(t),";")})),n}},{key:"listFromObject",value:function(t){var n="";for(var r in t)n+="".concat(e.spacesForListeles).concat(r,": ").concat(e.formatValueForList(t[r]),";");return n}},{key:"raw",value:function(t,n){return e.doLog(["".concat(t,": "),n])}},{key:"error",value:function(t,n,r){return e.doLog([t,n,r],"error")}},{key:"warn",value:function(t,n,r){return e.doLog([t,n,r],"warn")}},{key:"formatValueForList",value:function(t){return e.isPrimitiveValue(t)||null===t?t:JSON.stringify(t)}},{key:"isPrimitiveValue",value:function(e){switch(typeof e){case"string":case"number":case"boolean":case"undefined":return!0;default:return!1}}},{key:"doLog",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",i=(new Date).toISOString();return t[0]="[".concat(i,"] ").concat(t[0]),!0===e.debug&&(n=console)[r].apply(n,Object(fe.a)(t)),t.join(". ")}}]),e}();pe.debug=!0,pe.spacesForListeles="\n                            - ";var he,be,je=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:le,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[le],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:le,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;Object(L.a)(this,e),this.allSez=t,this.name=n,this.fields=r,this.pk=i,this.indexes=a,this.orderBy=c,this.childOf=o,this.parentsIdentifiers=s,this.ownerIdentifier=l,this.section=void 0}return Object(B.a)(e,[{key:"make",value:function(){return this.addPkToFields(),this.addPkToIndexes(),this.addSpecialFieldsToFields("indexes"),this.setOwnerIdentifier(),this.checkOrderByExists(),this.checkRelations(),this.checkParentIdentifier(),this.buildSez(),this.section}},{key:"addPkToFields",value:function(){this.fields.includes(this.pk)||this.fields.unshift(this.pk)}},{key:"addPkToIndexes",value:function(){this.indexes.includes(this.pk)||this.indexes.unshift(this.pk)}},{key:"addSpecialFieldsToFields",value:function(e){var t=this;this[e].forEach((function(e){t.fields.includes(e)||t.fields.push(e)}))}},{key:"setOwnerIdentifier",value:function(){this.ownerIdentifier||(this.ownerIdentifier=de),this.fields.includes(this.ownerIdentifier)||this.fields.push(this.ownerIdentifier)}},{key:"checkOrderByExists",value:function(){this.fields.includes(this.orderBy)||this.fields.push(this.orderBy)}},{key:"checkRelations",value:function(){this.childOf&&this.loopAllRelations()}},{key:"loopAllRelations",value:function(){var e=this;this.childOf.forEach((function(t){return e.checkRelationsExist(t)})),this.childOf.length||(this.childOf=void 0)}},{key:"checkRelationsExist",value:function(e){if(!(this.getSezByName(e)>=0)){var t=this.childOf.indexOf(e);this.childOf.splice(t,1),pe.error("Error in .childOf list","Section '".concat(e,"' does not exist in the sections list and has hence been removed from the .childOf list"))}}},{key:"getSezByName",value:function(e){for(var t=-1,n=0,r=this.allSez.length;-1===t&&n<r;)this.allSez[n].name===e&&(t=n),n++;return t}},{key:"checkParentIdentifier",value:function(){this.childOf&&!this.parentsIdentifiers&&(this.parentsIdentifiers=ue)}},{key:"buildSez",value:function(){this.section={name:this.name,pk:this.pk,indexes:this.indexes,orderBy:this.orderBy,fields:this.fields,ownerIdentifier:this.ownerIdentifier},this.addChildOf()}},{key:"addChildOf",value:function(){this.childOf&&(this.section.childOf=this.childOf,this.section.parentsIdentifiers=this.parentsIdentifiers)}}]),e}(),me=function(){function e(t){Object(L.a)(this,e),this.allSez=t,this.ds={}}return Object(B.a)(e,[{key:"make",value:function(){var e=this;return this.allSez.forEach((function(t){return e.buildSez(t)})),this.ds}},{key:"buildSez",value:function(e){var t=new je(this.allSez,e.name,e.fields,e.pk,e.indexes,e.orderBy,e.childOf,e.parentsIdentifiers,e.ownerIdentifier).make();this.addToTempDs(t)}},{key:"addToTempDs",value:function(e){this.ds[e.name]=e}}]),e}(),xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(L.a)(this,e),this.executers=t,this.options=n,this.allSez=r,this.addSystemSections=i,this.dbStore=void 0,this.DS={}}return Object(B.a)(e,[{key:"init",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.addSystemSections&&(this.DS=Object.assign(this.DS,new me(se).make())),this.allSez.length&&(this.DS=Object.assign(this.DS,new me(this.allSez).make())),this.options.DS&&(this.DS=Object.assign(this.DS,this.options.DS)),!this.executers.dbStore){e.next=9;break}return e.next=6,new this.executers.dbStore(this,this.options).initDB();case 6:this.dbStore=e.sent,e.next=10;break;case 9:throw new Error("No dbStore passed to DbConnector. To initialize DbConnector, you must pass a valid dbStore");case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callInsertor",value:function(e,t){return new this.executers.insertor(this,e,t)}},{key:"callSelector",value:function(e,t){return new this.executers.selector(this,e,t)}},{key:"callUpdator",value:function(e,t){return new this.executers.updator(this,e,t)}},{key:"callDeletor",value:function(e,t){return new this.executers.deletor(this,e,t)}}]),e}(),ve=function(){function e(t){Object(L.a)(this,e),this.sections=t,this.allSez=[],this.datastructure={}}return Object(B.a)(e,[{key:"extend",value:function(){var e=this;return this.sections.forEach((function(t){return e.buildSectionDefinition(t)})),this.allSez.forEach((function(t){return e.buildAndAddAllSections(t)})),this.datastructure}},{key:"buildSectionDefinition",value:function(e){var t={name:e.id,fields:Object.values(u)};e.formModel.forEach((function(e){t.fields.push(e.fieldName)})),this.allSez.push(t)}},{key:"buildAndAddAllSections",value:function(e){var t=new je(this.allSez,e.name,e.fields).make();this.addToTempTs(t)}},{key:"addToTempTs",value:function(e){this.datastructure[e.name]=e}}]),e}(),Oe=n(40),ye=function(){function e(t,n){Object(L.a)(this,e),this.dbConnector=t,this.options=n,this.db=void 0,this.deletedSections=[]}return Object(B.a)(e,[{key:"initDB",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dbConnector.options.indexedDbName){e.next=2;break}throw Error("No name found in DsDbInitOptions. Please provide a name for the database by setting the name on the property indexedDbName in the options passed to DbConnector.");case 2:return this.setDb(),this.options.previousVersions||(this.options.previousVersions=[]),this.handlePreviousVersion(),this.buildDb(),e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postProjectCreation",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeDexieInfoForUpgrade());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postProjectUpdate",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,i,a,c,o=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.keys(t).concat(t[F._sections].map((function(e){return e.id}))),r=Object.keys(this.dbConnector.DS),i=r.filter((function(e){return!n.includes(e)})),a=n.filter((function(e){return!r.includes(e)})),console.log("postProjectUpdate ~ newSections",n),console.log("postProjectUpdate ~ oldSections",r),console.log("postProjectUpdate ~ sectionsToDelete",i),console.log("postProjectUpdate ~ sectionsToAdd",a),!(i.length>0||a.length>0)){e.next=21;break}return this.options.previousVersions.push(i.concat()),i.forEach((function(e){delete o.dbConnector.DS[e]})),a.length>0&&(c=t[F._sections].filter((function(e){return a.includes(e.id)})),Object.assign(this.dbConnector.DS,new ve(c).extend())),this.close(),console.log("1"),this.handlePreviousVersion(),console.log("2"),this.buildDb(),console.log("3"),e.next=20,this.db.open();case 20:console.log("4");case 21:return e.abrupt("return",this.makeDexieInfoForUpgrade());case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){return this.db.close()}},{key:"onProjectDeleted",value:function(){return this.dbConnector.dbStore.db.delete()}},{key:"makeDexieInfoForUpgrade",value:function(){return{dexieInfoForUpgrade:{previousVersions:this.options.previousVersions,DS:this.dbConnector.DS}}}},{key:"setDb",value:function(){this.db=new Oe.a(this.dbConnector.options.indexedDbName)}},{key:"handlePreviousVersion",value:function(){var e=this;this.deletedSections=[],this.options.previousVersions.forEach((function(t){return t.forEach((function(t){e.dbConnector.DS[t]||e.deletedSections.push(t)}))}))}},{key:"buildDb",value:function(){var e,t=(null===(e=this.options.previousVersions)||void 0===e?void 0:e.length)+1||1,n={};for(var r in this.dbConnector.DS)n[this.dbConnector.DS[r].name]=this.dbConnector.DS[r].indexes.join();return this.deletedSections.forEach((function(e){return n[e]=null})),this.db.version(t).stores(n)}}]),e}(),ge=n(21),we=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,null,[{key:"methodToExecute",value:function(e,t,n){var r=t.length;if(!r)return"dexieFullCollection";if(2===r&&(">="===t[0][1]||">"===t[0][1])&&("<="===t[1][1]||"<"===t[1][1]))return"dexieBetween";if("="!==t[0][1])return"complexSelect";if(1===r&&t[0][0]===e[n].pk)return"dexieGet";if(e[n].indexes.indexOf(t[0][0])>-1)return"dexieGet";var i=!0;return t.forEach((function(t){"="!==t[1]&&(i=!1),e[n].indexes.indexOf(t[0])<0&&(i=!1)})),i?"dexieWhere":"complexSelect"}},{key:"buildArrayFildsNValues",value:function(e){var t={};return e.forEach((function(e){t[e[0]]=e[2]})),t}},{key:"buildBetweenSearchParams",value:function(e){var t=">="===e[0][1],n="<="===e[1][1];return{field:e[0][0],lowerBound:e[0][2],upperBound:e[1][2],includeLower:t,includeUpper:n}}},{key:"buildFilter4Dexie",value:function(e){var t=e[0],n=e[1],r=e[2];return function(e){switch(n){case"===":return e[t]===r;case"!=":return e[t]!=r;case">":return e[t]>r;case">=":return e[t]>=r;case"<":return e[t]>r;case"<=":return e[t]<=r;default:return e[t]==r}}}},{key:"chainFilters",value:function(e,t){return function(n){if(!e.length)return!0;var r,i=e[0](n),a=Object(ge.a)(e);try{for(a.s();!(r=a.n()).done;){var c=r.value;switch(t){case"OR":i=i||c(n);break;default:i=i&&c(n)}}}catch(o){a.e(o)}finally{a.f()}return i}}}]),e}(),ke=function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.logic="AND",this.table=void 0,this.collection=void 0,this.dexieFilters=[],this.arrWhere=[],this.orderBy=void 0,this.debug=!1,this.table=this.dbConnector.DS[this.section].name,this.collection=this.dbConnector.dbStore.db[this.table]}return Object(B.a)(e,[{key:"addWhere",value:function(e){return this.arrWhere.push(e),this}},{key:"setOrLogic",value:function(){return this.logic="OR",this}},{key:"setOrderBy",value:function(e){this.orderBy=e}},{key:"select",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("AND"===this.logic){e.next=2;break}return e.abrupt("return",this.complexSelect());case 2:return t=we.methodToExecute(this.dbConnector.DS,this.arrWhere,this.section),this.handleDebug("SELECT","methodToExecute",t),e.abrupt("return",this[t]());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieGet",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={})[this.arrWhere[0][0]]=this.arrWhere[0][2],e.next=4,this.dbConnector.dbStore.db[this.table].get(t);case 4:return n=e.sent,r=n?[n]:[],e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieWhere",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=we.buildArrayFildsNValues(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieBetween",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=we.buildBetweenSearchParams(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t.field).between(t.lowerBound,t.upperBound,t.includeLower,t.includeUpper).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieFullCollection",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbConnector.dbStore.db[this.table].toArray());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"complexSelect",value:function(){var e=this;this.arrWhere.forEach((function(t){return e.dexieFilters.push(we.buildFilter4Dexie(t))}));var t=this.dbConnector.dbStore.db[this.table].toCollection(),n=we.chainFilters(this.dexieFilters,this.logic);return t=t.and(n),this.handleDebug("SELECT","WHERE",this.arrWhere),this.orderBy?t.sortBy(this.orderBy):t.toArray()}},{key:"insert",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleDebug("INSERT","WITH OBJECT",this.element),e.next=3,this.dbConnector.dbStore.db[this.table].put(this.element);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleDebug("UPDATE","WITH OBJECT",this.element),e.next=3,this.dbConnector.dbStore.db[this.table].update(this.element[this.dbConnector.DS[this.section].pk],this.element);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){return this.collection.count()}},{key:"delete",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=we.buildArrayFildsNValues(this.arrWhere),this.handleDebug("DELETE","WHERE",this.arrWhere),e.next=4,this.dbConnector.dbStore.db[this.table].where(t).delete();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearDb",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.dbConnector.DS)this.dbConnector.DS[n].name&&t.push(this.dbConnector.dbStore.db[this.dbConnector.DS[n].name].clear());return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearTable",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbConnector.dbStore.db[this.table].clear();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDebug",value:function(e,t,n){this.debug&&pe.raw("EXECUTING ".concat(e," FOR TABLE ").concat(this.table," ").concat(t," "),n)}}]),e}(),Se=function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(B.a)(e,[{key:"autoDelete",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.args[this.dbConnector.DS[this.section].pk]){e.next=6;break}return t=this.args[this.dbConnector.DS[this.section].pk],e.next=4,new ke(this.dbConnector,this.section).addWhere([this.dbConnector.DS[this.section].pk,"=",t]).delete();case 4:e.next=7;break;case 6:pe.error("Error in autoDelete","No PK value was found on the element");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearSection",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new ke(this.dbConnector,this.section).clearTable();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ne={insertor:function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(B.a)(e,[{key:"autoInsert",value:function(){return this.element instanceof Array?this.insertMany():this.insertOne()}},{key:"insertMany",value:function(){var e=this.dbConnector.DS[this.section].name;return this.dbConnector.dbStore.db[e].bulkPut(this.element)}},{key:"insertOne",value:function(){return new ke(this.dbConnector,this.section,this.element).insert().catch((function(e){pe.error("Error in autoinsert: ",e)}))}}]),e}(),selector:function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.data=[],this.qe=void 0}return Object(B.a)(e,[{key:"single",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),e.next=4,this.executeSelect();case 4:return e.abrupt("return",this.data[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"multiple",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),this.setOrder(),e.next=5,this.executeSelect();case 5:return e.abrupt("return",this.data);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ke(this.dbConnector,this.section).count());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUpSelect",value:function(){this.qe=new ke(this.dbConnector,this.section)}},{key:"setQuery",value:function(){this.args&&this.args[this.dbConnector.DS[this.section].pk]&&this.qe.addWhere([this.dbConnector.DS[this.section].pk,"=",this.args[this.dbConnector.DS[this.section].pk]])}},{key:"setOrder",value:function(){this.qe.setOrderBy(this.dbConnector.DS[this.section].orderBy)}},{key:"executeSelect",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.qe.select();case 2:this.data=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),updator:function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(B.a)(e,[{key:"autoUpdate",value:function(){return new ke(this.dbConnector,this.section,this.element).update().catch((function(e){pe.error("Error in autoUpdate",e)}))}}]),e}(),deletor:Se,dbStore:ye},Ie=function(){function e(){Object(L.a)(this,e),this.projectList=[]}return Object(B.a)(e,[{key:"load",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromLocalDB();case 2:this.dispatchProjectList(this.projectList);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromLocalDB",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callSelector(re.projects).multiple();case 2:this.projectList=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProjectList",value:function(e){Y.dispatch({type:r.setProjectList,payload:e})}}]),e}(),Ce=n(1),De=n.n(Ce),Ee=function(){function e(){Object(L.a)(this,e),this.systemDbName="anitaDB"}return Object(B.a)(e,[{key:"init",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("Anita web app."),e.next=3,this.initSystemIndexedDb(this.systemDbName);case 3:this.setLoggerDebug(),this.loadProjectList();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initSystemIndexedDb",value:function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new xe(Ne,{previousVersions:ie,indexedDbName:t},ae,!1).init();case 2:Z.system=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReactDev",value:function(){return"_self"in De.a.createElement("div")}},{key:"setLoggerDebug",value:function(){pe.debug=this.isReactDev()}},{key:"loadProjectList",value:function(){(new Ie).load()}}]),e}();!function(e){e.add="add",e.edit="edit"}(he||(he={})),function(e){e.projectId="projectId",e.sectionId="sectionId",e.elementId="elementId",e.parentId="parentId"}(be||(be={}));var Pe={projectsNone:"/projects/none",projectsList:"/projects/list",projectAdd:"/projects/".concat(he.add),projectEdit:"/projects/".concat(he.edit,"/:").concat(be.projectId),projectDetails:"/project/:".concat(be.projectId,"/info"),projectSectionElesList:"/project/:".concat(be.projectId,"/list/:").concat(be.sectionId),projectSectionAddEle:"/project/:".concat(be.projectId,"/:").concat(be.sectionId,"/").concat(he.add),projectSectionEditEle:"/project/:".concat(be.projectId,"/:").concat(be.sectionId,"/").concat(he.edit,"/:").concat(be.elementId),projectSectionEleDetails:"/project/:".concat(be.projectId,"/:").concat(be.sectionId,"/details/:").concat(be.elementId)},Fe=n(12);function Ae(e){return _e.apply(this,arguments)}function _e(){return(_e=Object($.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFile();case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={types:[{name:e,description:"Anita project data file",accept:{"application/json":[".json"]}}]};return window.showSaveFilePicker(t)}function Me(){return(Me=Object($.a)(X.a.mark((function e(t,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createWritable();case 2:return r=e.sent,e.next=5,r.write(n);case 5:return e.next=7,r.close();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return Be.apply(this,arguments)}function Be(){return(Be=Object($.a)(X.a.mark((function e(t,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n&&(r.writable=!0,r.mode="readwrite"),e.next=4,t.queryPermission(r);case 4:if(e.t0=e.sent,"granted"!==e.t0){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.requestPermission(r);case 9:if(e.t1=e.sent,"granted"!==e.t1){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve=function(){function e(t){Object(L.a)(this,e),this.dbConnector=t,this.data=void 0}return Object(B.a)(e,[{key:"save",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setData(),e.next=3,this.saveDataToDisk();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){this.data=JSON.stringify(this.dbConnector.dbStore.db)}},{key:"saveDataToDisk",value:function(){return function(e,t){return Me.apply(this,arguments)}(this.dbConnector.options.projectInfo.fileHandle,this.data)}}]),e}(),Ue=function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(B.a)(e,[{key:"autoDelete",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.args).length){e.next=2;break}return e.abrupt("return","Fatal error: trying to delete without any parameter");case 2:return t=this.dbConnector.dbStore.db[this.section].findIndex((function(e){return e.id===n.args.id})),this.dbConnector.dbStore.db[this.section].splice(t,1),e.next=6,new Ve(this.dbConnector).save();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearSection",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dbConnector.dbStore.db[this.section].length=0,e.next=3,new Ve(this.dbConnector).save();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Re=n(7),qe=n(8),We="286b88f2ceb76ce1e7d28117bb2a7659";function He(e,t){return V.a.AES.encrypt(e,t).toString()}function ze(e,t){return V.a.AES.decrypt(e,t).toString()}var Ke=function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.owner=void 0,this.undecryptedKey=void 0,this.keyIdentifier=void 0}return Object(B.a)(e,[{key:"getUserKey",value:function(){if(this.setOwner(),this.setUndecryptedKey(),this.undecryptedKey)return this.makeKeyIdentifier(),e.userKeys[this.keyIdentifier]||this.decryptUserKey(),this.returnUserUnencryptedKey()}},{key:"logNoKeyError",value:function(){pe.error("ERROR: skipping encryption as no key was found for user ".concat(this.owner,". Did you forget to pass the user key in the options when initializing DbInit?"))}},{key:"setOwner",value:function(){this.owner=this.element[this.dbConnector.DS[this.section].ownerIdentifier]}},{key:"setUndecryptedKey",value:function(){this.undecryptedKey="object"===typeof this.dbConnector.options.encryptionKeys&&this.dbConnector.options.encryptionKeys[this.owner]?this.dbConnector.options.encryptionKeys[this.owner]:void 0}},{key:"makeKeyIdentifier",value:function(){this.keyIdentifier="".concat(this.owner).concat(this.undecryptedKey)}},{key:"decryptUserKey",value:function(){e.userKeys[this.keyIdentifier]=ze(this.undecryptedKey,We)}},{key:"returnUserUnencryptedKey",value:function(){return e.userKeys[this.keyIdentifier]}}],[{key:"decryptUserKey",value:function(e){return He(e,We)}}]),e}();Ke.userKeys={};var Ge=function(e){Object(Re.a)(n,e);var t=Object(qe.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"do",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(u).includes(n)||this.encrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){this.element[t]&&(this.element[t]=He(this.element[t],e))}}]),n}(Ke),Je=function(){function e(t,n,r){Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.elements=r,this.index=void 0,this.element=void 0}return Object(B.a)(e,[{key:"save",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setSectionStore(),this.elements instanceof Array){t=Object(ge.a)(this.elements);try{for(t.s();!(n=t.n()).done;)r=n.value,this.processElement(r)}catch(i){t.e(i)}finally{t.f()}}else this.processElement(this.elements);return e.next=4,new Ve(this.dbConnector).save();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSectionStore",value:function(){this.dbConnector.dbStore.db[this.section]||(this.dbConnector.dbStore.db[this.section]=[])}},{key:"processElement",value:function(e){this.element=e,this.checkIfElementInStoreAndSetIndex(),this.addToStore()}},{key:"checkIfElementInStoreAndSetIndex",value:function(){var e=this,t=this.dbConnector.dbStore.db[this.section],n=t.findIndex((function(t){return e.element[e.dbConnector.DS[e.section].pk]===t[e.dbConnector.DS[e.section].pk]}));this.index=n>=0?n:t.length}},{key:"addToStore",value:function(){this.dbConnector.dbStore.db[this.section][this.index]=this.element}}]),e}(),Ye=function(e){Object(Re.a)(n,e);var t=Object(qe.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"autoInsert",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.elements instanceof Array)){e.next=20;break}t=Object(ge.a)(this.elements),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=10;break}return r=n.value,e.next=8,new Ge(this.dbConnector,this.section,r).do();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:e.next=22;break;case 20:return e.next=22,new Ge(this.dbConnector,this.section,this.elements).do();case 22:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Je),Qe=function(e){Object(Re.a)(n,e);var t=Object(qe.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"do",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(u).includes(n)||this.decrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(e,t){this.element[t]&&(this.element[t]=ze(this.element[t],e))}}]),n}(Ke),Xe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(L.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.results=void 0}return Object(B.a)(e,[{key:"single",value:function(){var e=Object($.a)(X.a.mark((function e(){var t=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:if(this.results.length){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this.results.find((function(e){return t.filterKeys(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterKeys",value:function(e){for(var t=Object.keys(this.args),n=!0,r=0;n&&r<t.length;)n=e[t[r]]===this.args[t[r]],r++;return n}},{key:"multiple",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:return e.abrupt("return",this.results);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.multiple();case 2:return e.abrupt("return",this.results.length);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doSelect",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.results=this.dbConnector.dbStore.db[this.section]&&this.dbConnector.dbStore.db[this.section].length?this.dbConnector.dbStore.db[this.section]:[],e.next=3,this.handleDecryption();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDecryption",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted||!this.results.length){e.next=8;break}t=0;case 2:if(!(t<this.results.length)){e.next=8;break}return e.next=5,new Qe(this.dbConnector,this.section,this.results[t]).do();case 5:t++,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function $e(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.projectInfo.fileHandle){e.next=4;break}return e.next=3,Te("anita-fh-".concat(t.projectInfo.id));case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,Le(t.projectInfo.fileHandle,!0);case 6:return e.abrupt("return",t.projectInfo.fileHandle);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(){function e(t,n){var r;Object(L.a)(this,e),this.dbConnector=t,this.options=n,this.db=(r={},Object(o.a)(r,F._settings,[]),Object(o.a)(r,F._sections,[]),r),this.contents=void 0}return Object(B.a)(e,[{key:"initDB",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.projectInfo){e.next=2;break}throw new Error("No projectInfo passed to DbConnector.\nTo retrieve a project from a local file, pass the an Object of type LocalProjectSettings as value of projectInfo to the options of DbConnector");case 2:return e.next=4,$e(this.options);case 4:if(t=e.sent,!this.options.projectInfo.fileHandle){e.next=10;break}return e.next=8,this.initializeExistingProject();case 8:e.next=11;break;case 10:this.options.projectInfo.fileHandle=t;case 11:return e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postProjectCreation",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializeExistingProject();case 2:return e.abrupt("return",{fileHandle:this.dbConnector.options.projectInfo.fileHandle});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postProjectUpdate",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{fileHandle:this.dbConnector.options.projectInfo.fileHandle});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){}},{key:"initializeExistingProject",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doReadFile();case 2:this.parseFileContents(),this.makedDS();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doReadFile",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(this.options.projectInfo.fileHandle);case 2:this.contents=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.db=JSON.parse(this.contents)}},{key:"makedDS",value:function(){this.dbConnector.DS=Object.assign(this.dbConnector.DS,new ve(this.db[F._sections]).extend())}}]),e}(),tt={insertor:Ye,selector:Xe,updator:function(e){Object(Re.a)(n,e);var t=Object(qe.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"autoUpdate",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.elements instanceof Array)){e.next=20;break}t=Object(ge.a)(this.elements),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=10;break}return r=n.value,e.next=8,new Ge(this.dbConnector,this.section,r).do();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:e.next=22;break;case 20:return e.next=22,new Ge(this.dbConnector,this.section,this.elements).do();case 22:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Je),deletor:Ue,dbStore:et},nt=function(){function e(t,n,r){Object(L.a)(this,e),this.projectInfo=t,this.projectSections=n,this.fileHandle=r,this.projectId=void 0,this.projectId=t.id}return Object(B.a)(e,[{key:"init",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projectInfo.localStorage!=l.fileSystem){e.next=5;break}return e.next=3,this.doFileSystem();case 3:e.next=7;break;case 5:return e.next=7,this.doIndexedDb();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doFileSystem",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileHandle&&(this.projectInfo=Object(i.a)(Object(i.a)({},this.projectInfo),{},{fileHandle:this.fileHandle})),e.next=3,new xe(tt,{projectInfo:this.projectInfo}).init();case 3:Z[this.projectId]=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doIndexedDb",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.projectSections){e.next=8;break}return(t=new ve(this.projectSections)).extend(),e.next=5,new xe(Ne,{previousVersions:[],indexedDbName:this.projectId},t.allSez).init();case 5:Z[this.projectId]=e.sent,e.next=12;break;case 8:if(!this.projectInfo.dexieInfoForUpgrade){e.next=12;break}return e.next=11,new xe(Ne,{previousVersions:this.projectInfo.dexieInfoForUpgrade.previousVersions,DS:this.projectInfo.dexieInfoForUpgrade.DS,indexedDbName:this.projectId}).init();case 11:Z[this.projectId]=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),rt=function(){function e(t,n){Object(L.a)(this,e),this.projectSettings=t,this.sectionsDefinitions=n}return Object(B.a)(e,[{key:"set",value:function(){var e;Y.dispatch({type:r.setCurrentProject,payload:(e={},Object(o.a)(e,F._settings,this.projectSettings.concat()),Object(o.a)(e,F._sections,this.sectionsDefinitions.concat()),e)})}}]),e}(),it=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(L.a)(this,e),this.projectId=t,this.projectInfo=n,this.setProject=r,this.projectSettings=void 0,this.projectSections=void 0}return Object(B.a)(e,[{key:"loadProject",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projectInfo){e.next=3;break}return e.next=3,this.setProjectInfoFromIndexedDB();case 3:return e.next=5,this.createNewInstanceOfDbConnectorForrProject();case 5:return e.next=7,this.loadProjectSettings();case 7:return e.next=9,this.loadProjectSections();case 9:this.setProject&&this.callCurrentProjectSetter();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectInfoFromIndexedDB",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callSelector(re.projects,{id:this.projectId}).single();case 2:this.projectInfo=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNewInstanceOfDbConnectorForrProject",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new nt(this.projectInfo).init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProjectSettings",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[this.projectId].callSelector(F._settings).multiple();case 2:this.projectSettings=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProjectSections",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[this.projectId].callSelector(F._sections).multiple();case 2:this.projectSections=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callCurrentProjectSetter",value:function(){new rt(this.projectSettings,this.projectSections).set()}}]),e}();function at(e){return ct.apply(this,arguments)}function ct(){return(ct=Object($.a)(X.a.mark((function e(t){var n,r,i,a=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(a.length>1&&void 0!==a[1])||a[1],"function"!==typeof(null===Z||void 0===Z||null===(n=Z[t])||void 0===n?void 0:n.callSelector)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,Z.system.callSelector(re.projects,{id:t}).single();case 5:if((i=e.sent).localStorage!=l.IndexedDB){e.next=10;break}return e.next=9,new it(t,i,r).loadProject();case 9:return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ot=function(){function e(t,n){Object(L.a)(this,e),this.childOf=t,this.sections=n,this.parentInfoFormModel=void 0,this.options=[]}return Object(B.a)(e,[{key:"build",value:function(){return this.setOptions(),this.setParentSelector(),this.parentInfoFormModel}},{key:"setOptions",value:function(){var e=this;this.childOf.forEach((function(t){var n=e.sections.find((function(e){return e.id===t}));e.options.push({value:t,label:n.title})}))}},{key:"setParentSelector",value:function(){this.parentInfoFormModel={componentCode:a.parentsSelector,fieldName:u.parentsInfo,label:"Parent elements",options:this.options}}}]),e}();function st(e,t){return e.find((function(e){return e.id===t}))}var lt=n(0),ut=function(e){var t=e.children,n=e.width;return Object(lt.jsx)("div",{className:"".concat(n," my-3 px-2 inline-block align-top"),children:t})},dt=function(e){var t=e.label;return Object(lt.jsx)("label",{className:"w-full block mb-0 ml-1 text-gray-700 text-sm",children:t})},ft=function(e){var t=e.formEle,n=e.element,i=e.fieldId,a=e.touched,c=n[t.fieldName];return Object(Ce.useEffect)((function(){Y.dispatch({type:r.setValidStateForEle,payload:{formEleId:"".concat(i,"-required"),valid:""!==c&&void 0!==c&&null!==c}})}),[c,i]),c||!a?Object(lt.jsx)("div",{className:"ml-1 text-xs italic text-gray-400",children:"Required"}):Object(lt.jsx)("div",{className:"ml-1 text-red-600 text-xs italic",children:"This field is required"})},pt=function(e){var t=[];return e.formEle.required&&t.push(Object(lt.jsx)(ft,Object(i.a)({},e),"required-validator")),Object(lt.jsx)("span",{children:t})},ht=n(17),bt=n.n(ht),jt=n(10),mt=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?t.width:"w-full";return Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("input",{name:t.fieldName,type:"checkbox",checked:!(!Reflect.has(n,t.fieldName)||"boolean"!==typeof n[t.fieldName])&&n[t.fieldName],className:"rounded mt-3 ".concat(d&&o?"text-red-600 border border-red-600":"text-prussian-blue-500"),onChange:function(e){return i(t.fieldName,e.target.checked)},onBlur:function(){return s(!0)}},t.fieldName),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})};function xt(e){switch(e){case"1":return"w-full lg:w-1/12";case"2":return"w-full lg:w-2/12";case"3":return"w-full lg:w-3/12";case"4":return"w-full lg:w-4/12";case"5":return"w-full lg:w-5/12";case"6":return"w-full lg:w-6/12";case"7":return"w-full lg:w-7/12";case"8":return"w-full lg:w-8/12";case"9":return"w-full lg:w-9/12";case"10":return"w-full lg:w-10/12";case"11":return"w-full lg:w-11/12";case"12":return"w-full lg:w-12/12";default:return"w-full"}}var vt="rounded-md border border-gray-300 hover:border-gray-400 focus:border-prussian-blue-500 focus:ring-0",Ot="rounded-md border-2 border-red-300 hover:border-red-400 focus:border-red-200 focus:ring-0",yt=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?xt(t.width):"w-full";return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("input",{name:t.fieldName,type:"text",placeholder:t.label,disabled:!!t.disabled&&t.disabled,required:!!t.required&&t.required,className:"w-full ".concat(d&&o?Ot:vt),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})},gt=n(22),wt=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?t.width:"w-full";return!n[t.fieldName]&&t.value&&(n[t.fieldName]=t.value),Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("div",{className:"mt-2 pl-1",children:t.options.map((function(e,r){return Object(lt.jsxs)("div",{className:"mb-2",children:[Object(lt.jsx)("input",{type:"radio",value:e.value,name:t.fieldName,checked:n[t.fieldName]==e.value,disabled:!(!e.disabled&&!t.disabled),className:"".concat(d&&o?"bg-red-600 text-red-600":"bg-gray-200 text-prussian-blue-500"," mr-2 border-transparent focus:border-gray-500 focus:text-prussian-blue-600 focus:ring-prussian-blue-600"),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}}),Object(lt.jsx)("span",{className:e.disabled||t.disabled?"text-gray-300 cursor-not-allowed":"",children:e.label}),e.hint&&Object(lt.jsxs)("span",{children:[Object(lt.jsx)("sup",{children:Object(lt.jsx)("i",{className:"ml-1 text-xs bi-info-circle","data-tip":!0,"data-for":"".concat(l).concat(r)})}),Object(lt.jsx)(gt.a,{id:"".concat(l).concat(r),effect:"solid","data-multiline":!0,className:"msg-wrapper text-center",children:Object(lt.jsx)("span",{children:e.hint})})]})]},e.value)}))}),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]},t.fieldName)},kt=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?xt(t.width):"w-full";return Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsxs)("select",{className:"w-full ".concat(d&&o?Ot:vt),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)},children:[Object(lt.jsx)("option",{value:"",children:"Please chose one"}),t.options.map((function(e,t){return Object(lt.jsx)("option",{value:e.value,children:e.label},t)}))]}),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})},St=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?t.width:"w-full";return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("textarea",{name:t.fieldName,className:"w-full ".concat(d&&o?Ot:vt),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}}),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})};function Nt(e){var t=[];return e.forEach((function(e){t.push(e.value)})),t}function It(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.options.find((function(t){return t.value===e}))}));if(r){var i=r.options.find((function(t){return t.value===e}));i&&n.push(i)}})),n):n}function Ct(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.value===e}));r&&n.push(r)})),n):n}var Dt=n(31),Et=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=e.sectionId,c=Object(jt.b)((function(e){return e.formProject.project[F._sections]})),o=Object(Ce.useState)([]),s=Object(Fe.a)(o,2),l=s[0],u=s[1],d=Object(Ce.useState)(!1),f=Object(Fe.a)(d,2),p=f[0],h=f[1],b=Object(Ce.useRef)(bt()(t.fieldName)).current,j=Object(jt.b)((function(e){return e.formElesValidState})),m=Object.keys(j).some((function(e){return e.startsWith(b)&&!1===j[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:b})}}),[b]),Object(Ce.useEffect)((function(){var e=!0;return e&&function(){if(Array.isArray(c)){var e=[];c.forEach((function(t){t.id!==a&&e.push({value:t.id,label:t.title})})),u(e)}}(),function(){e=!1}}),[c,c.length,a]);return 0===l.length?null:Object(lt.jsxs)(ut,{width:"w-full",children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)(Dt.a,{defaultValue:Ct(n[t.fieldName],l),isMulti:!0,name:t.fieldName,options:l,className:m&&p?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,Nt(e))},onBlur:function(){return h(!0)}}),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:b,touched:p})]})},Pt=n(19),Ft=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?t.width:"w-full";return Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("input",{name:t.fieldName,type:"date",placeholder:t.label,className:"w-full ".concat(d&&o?Ot:vt),value:Pt("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})},At=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(Ce.useRef)(bt()(t.fieldName)).current,u=Object(jt.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var f=t.width?xt(t.width):"w-full";return Object(lt.jsxs)(ut,{width:f,children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)("input",{name:t.fieldName,type:"datetime-local",placeholder:t.label,className:"w-full ".concat(d&&o?Ot:vt),value:Pt("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:l,touched:o})]})},_t=function(e){var t=e.formEle,n=e.element,r=e.handleChange;return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(lt.jsx)("input",{name:t.fieldName,type:"hidden",value:n[t.fieldName],onChange:function(e){return r(t.fieldName,e.target.value)}},t.fieldName)},Tt="bg-transparent hover:".concat("bg-green-500"," ").concat("text-green-700"," font-semibold hover:text-white border ").concat("border-green-500"," hover:border-transparent rounded"),Mt="bg-transparent hover:".concat("bg-red-500"," ").concat("text-red-700"," font-semibold hover:text-white border ").concat("border-red-500"," hover:border-transparent rounded");var Lt=function(e){var t=e.formEle,n=e.element,r=e.handleOptionsChange,i=e.handleClickDeleteOption,a=e.indexSection,c=e.indexFormElement,o=e.index,s=e.optionElement,l=Object(jt.b)((function(e){return e.formProject.mode})),u=Object(jt.b)((function(e){return e.formProject.original[F._sections][a]})),d=Object(Ce.useMemo)((function(){!function(e,t,n){!(e&&e.formModel[t]&&e.formModel[t].options&&e.formModel[t].options.length)||e.formModel[t].options.some((function(e){return e.value===n}))}(u,c,s.value);return A[l].optionEles.newItem}),[u,c,s.value,l]);return Object(lt.jsxs)("li",{children:[Object(lt.jsx)(Gt,{formModel:d,element:s,handleChange:r.bind(void 0,o,s)}),"function"===typeof i&&n[t.fieldName].length>2&&Object(lt.jsxs)("div",{className:"inline-block w-full lg:w-1/12 px-2 lg:pl-1 lg:pr-3 lg:align-bottom mb-8",children:[Object(lt.jsxs)("button",{onClick:i.bind(void 0,o),"data-tip":!0,"data-for":"deleteOption-".concat(o),className:"w-full py-1 ".concat(Mt),children:[Object(lt.jsx)("i",{className:"bi-trash hidden lg:block"}),Object(lt.jsxs)("span",{className:"lg:hidden",children:["Delete option ",o+1]})]}),Object(lt.jsx)(gt.a,{id:"deleteOption-".concat(o),effect:"solid",children:Object(lt.jsxs)("span",{children:["Delete option ",o+1]})})]})]})},Bt=function(e){var t=e.formEle,n=e.element,r=e.handleOptionsChange,a=e.handleClickAddOption;return"function"!==typeof r?null:(n[t.fieldName]&&Array.isArray(n[t.fieldName])&&n[t.fieldName].length||(n[t.fieldName]=Array.from(Array(2),(function(e,t){return{label:"",value:t+1}}))),Object(lt.jsxs)("div",{className:"mt-6 pl-10 py-4 bg-gray-50 rounded-lg",children:[Object(lt.jsx)("p",{className:"-ml-5 font-semibold mb-1",children:"Choices"}),Object(lt.jsx)("ol",{className:"list-decimal",children:n[t.fieldName].map((function(t,n){return Object(lt.jsx)(Lt,Object(i.a)({index:n,optionElement:t},e),n)}))}),"function"===typeof a&&Object(lt.jsx)("div",{className:"flex items-end",children:Object(lt.jsx)("button",{className:"ml-auto mr-4 mt-3 py-2 px-3 ".concat(Tt),onClick:a,children:"Add option"})})]}))};function Vt(e){var t=void 0;return e.some((function(e,n){return!u[e.fieldName]&&(t=n,!0)})),t}function Ut(e){var t=e.toLowerCase(),n={a:"[\xe0\xe1\xe2\xe3\xe4\xe5]",ae:"\xe6",c:"\xe7",e:"[\xe8\xe9\xea\xeb]",i:"[\xec\xed\xee\xef]",n:"\xf1",o:"[\xf2\xf3\xf4\xf5\xf6]",oe:"\u0153",u:"[\xf9\xfa\xfb\u0171\xfc]",y:"[\xfd\xff]"};for(var r in n)t=t.replace(new RegExp(n[r],"g"),r);return t.replace(/\s/g,"-").replace(/[^\w-]/gi,"")}function Rt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Object($.a)(X.a.mark((function e(t,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.length,i=0;case 2:if(!(i<r)){e.next=8;break}return e.next=5,n(t[i],i,t);case 5:i++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wt=function(){function e(t,n){Object(L.a)(this,e),this.project=t,this.options=n,this.optionsGroups=[]}return Object(B.a)(e,[{key:"buildOptions",value:function(){var e=Object($.a)(X.a.mark((function e(){var t=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(this.options,function(){var e=Object($.a)(X.a.mark((function e(n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[t.project[F._settings][0].id].callSelector(n.value).multiple();case 2:(r=e.sent).length&&t.createGroupOption(n.value,n.label,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.optionsGroups);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createGroupOption",value:function(e,t,n){var r=[],i=st(this.project[F._sections],e),a=Vt(i.formModel);n.forEach((function(t){return r.push({value:"".concat(e,"|").concat(t.id),label:t[i.formModel[a].fieldName]})})),this.optionsGroups.push({label:t,options:r})}}]),e}(),Ht=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Ce.useState)([]),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=Object(jt.b)((function(e){return e.project})),u=Object(Ce.useState)(!1),d=Object(Fe.a)(u,2),f=d[0],p=d[1],h=Object(Ce.useRef)(bt()(t.fieldName)).current,b=Object(jt.b)((function(e){return e.formElesValidState})),j=Object.keys(b).some((function(e){return e.startsWith(h)&&!1===b[e]}));Object(Ce.useEffect)((function(){return function(){Y.dispatch({type:r.unsetValidStateForEle,payload:h})}}),[h]),Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var n=Object($.a)(X.a.mark((function n(){var r;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Wt(l,t.options).buildOptions();case 2:r=n.sent,e&&s(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!1}}),[l,t.options]);return 0===o.length?null:Object(lt.jsxs)(ut,{width:"w-full",children:[Object(lt.jsx)(dt,{label:t.label}),Object(lt.jsx)(Dt.a,{defaultValue:It(n[t.fieldName],o),isMulti:!0,name:t.fieldName,options:o,className:j&&f?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,Nt(e))},onBlur:function(){return p(!0)}}),Object(lt.jsx)(pt,{formEle:t,element:n,fieldId:h,touched:f})]})};var zt=function(){function e(t,n){Object(L.a)(this,e),this.formEle=t,this.objValues=n,this.isIntegrated=!1}return Object(B.a)(e,[{key:"integrates",value:function(){return!this.formEle.prerequisites||!this.formEle.prerequisites.length||(this.loopPrerequisites(),this.isIntegrated)}},{key:"loopPrerequisites",value:function(){for(var e=0;!1===this.isIntegrated&&e<this.formEle.prerequisites.length;)this.checkPrerequisites(this.formEle.prerequisites[e]),e++}},{key:"checkPrerequisites",value:function(e){var t=this,n=function(n){t.objValues[n]&&e[n].filter((function(e){return e==t.objValues[n]})).length>0&&t.setIsIntegrated()};for(var r in e)n(r)}},{key:"setIsIntegrated",value:function(){this.isIntegrated=!0}}]),e}(),Kt=function(e){return Object(Ce.useMemo)((function(){return new zt(e.formEle,e.element).integrates()}),[e.formEle,e.element])?function(e,t,n){switch(t){case a.hiddenInput:return Object(lt.jsx)(_t,Object(i.a)({},n),e);case a.basicInput:return Object(lt.jsx)(yt,Object(i.a)({},n),e);case a.basicSelect:return Object(lt.jsx)(kt,Object(i.a)({},n),e);case a.basicTextarea:return Object(lt.jsx)(St,Object(i.a)({},n),e);case a.basicCheckbox:return Object(lt.jsx)(mt,Object(i.a)({},n),e);case a.basicRadio:return Object(lt.jsx)(wt,Object(i.a)({},n),e);case a.datePicker:return Object(lt.jsx)(Ft,Object(i.a)({},n),e);case a.dateTimePicker:return Object(lt.jsx)(At,Object(i.a)({},n),e);case a.optionsMaker:return Object(lt.jsx)(Bt,Object(i.a)({},n),e);case a.childOfSelectorForSection:return Object(lt.jsx)(Et,Object(i.a)({},n),e);case a.parentsSelector:return Object(lt.jsx)(Ht,Object(i.a)({},n),e);default:return Object(lt.jsx)(yt,Object(i.a)({},n),e)}}(e.formEle.fieldName,e.formEle.componentCode,e):null},Gt=function(e){return Object(lt.jsx)("span",{children:e.formModel.map((function(t){return Object(lt.jsx)(Kt,Object(i.a)({formEle:t},e),t.fieldName)}))})},Jt=function(e){var t=e.sectionId,n=Object(jt.b)((function(e){return e.project}))[F._sections],a=st(n,t),c=Object(jt.b)((function(e){return e.formElement.element})),s=function(e,t){Y.dispatch({type:r.updateFormElement,payload:Object(i.a)(Object(i.a)({},c),{},Object(o.a)({},e,t))})};return Object(lt.jsxs)("form",{name:"element-form",children:[a.childOf&&a.childOf.length>0&&Object(lt.jsx)(Gt,{formModel:[new ot(a.childOf,n).build()],element:c,handleChange:s}),Object(lt.jsx)(Gt,{formModel:a.formModel,element:c,handleChange:s})]})},Yt=function(){function e(t,n,r,i){Object(L.a)(this,e),this.projectId=t,this.sectionId=n,this.element=r,this.mode=i,this.sectionModelInDS=void 0}return Object(B.a)(e,[{key:"save",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setSectionModel(),this.checkAndSetPk(),this.setcreatedAt(),this.deleteEmptyProps(),this.mode!==he.add){e.next=9;break}return e.next=7,Z[this.projectId].callInsertor(this.sectionId,this.element).autoInsert();case 7:e.next=12;break;case 9:return this.setupdatedAtValueIfInEditMode(),e.next=12,Z[this.projectId].callUpdator(this.sectionId,this.element).autoUpdate();case 12:return e.abrupt("return",this.element);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSectionModel",value:function(){this.sectionModelInDS=Z[this.projectId].DS[this.sectionId]}},{key:"checkAndSetPk",value:function(){this.element[this.sectionModelInDS.pk]||(this.element[this.sectionModelInDS.pk]=U.make(this.sectionModelInDS.name))}},{key:"deleteEmptyProps",value:function(){for(var e in this.element)""===this.element[e]&&delete this.element[e]}},{key:"setcreatedAt",value:function(){this.sectionModelInDS.fields.includes(u.createdAt)&&!this.element[u.createdAt]&&(this.element[u.createdAt]=new Date((new Date).toUTCString()).toISOString())}},{key:"setupdatedAtValueIfInEditMode",value:function(){this.sectionModelInDS.fields.includes(u.updatedAt)&&(this.element[u.updatedAt]=new Date((new Date).toUTCString()).toISOString())}}]),e}(),Qt=n(11),Xt=function(e){var t=e.sectionId,n=Object(jt.b)((function(e){return e.project})),r=Object(jt.b)((function(e){return e.formElement.element})),i=Object(jt.b)((function(e){return e.formElesValidState})),a=Object(Qt.g)(),c=function(){var e=Object($.a)(X.a.mark((function e(){var i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.id?he.edit:he.add,e.next=3,new Yt(n[F._settings][0].id,t,r,i).save();case 3:a(-1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(lt.jsxs)("div",{className:"mt-6 mb-3 px-2 flex justify-end",children:[Object(lt.jsx)("button",{className:"py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return a(-1)},children:"Cancel"}),Object(lt.jsx)("button",{disabled:Object.keys(i).some((function(e){return!1===i[e]})),className:"py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500",onClick:c,children:"Save"})]})},$t=function(e){var t=e.children,n=e.headerText;return Object(lt.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[n?Object(lt.jsxs)("div",{className:"mt-3",children:[Object(lt.jsx)("h3",{className:"text-xl font-bold",children:n}),Object(lt.jsx)("hr",{className:"mt-4"})]}):null,Object(lt.jsx)("div",{className:"pt-4",children:t})]})},Zt=function(){return Object(lt.jsxs)("svg",{className:"mx-auto my-5 animate-spin h-5 w-5 text-prussian-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(lt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(lt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},en=function(){var e=Object(Qt.h)(),t=e[be.elementId]?he.edit:he.add,n=e[be.projectId],i=e[be.sectionId],a=t===he.edit?e[be.elementId]:null,c=Object(Ce.useState)(null),o=Object(Fe.a)(c,2),s=o[0],l=o[1];if(Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var r=Object($.a)(X.a.mark((function r(){var c,o;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,at(n);case 2:if(c=r.sent,n&&i&&c){r.next=5;break}return r.abrupt("return",l(void 0));case 5:if(t!==he.add){r.next=7;break}return r.abrupt("return",l({}));case 7:return r.next=9,Z[n].callSelector(i,{id:a}).single();case 9:o=r.sent,e&&l(o);case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){e=!1}}),[t,n,i,a]),void 0===s)return Object(lt.jsx)(Qt.a,{to:Pe.projectsList});var u=t===he.add?"Add Element":"Edit Element";return Y.dispatch({type:r.updateFormElement,payload:s}),Object(lt.jsxs)($t,{headerText:u,children:[null===s&&Object(lt.jsx)(Zt,{}),null!==s&&Object(lt.jsx)(Jt,{sectionId:i}),null!==s&&Object(lt.jsx)(Xt,{sectionId:i})]})},tn=function(){function e(t){Object(L.a)(this,e),this.project=t}return Object(B.a)(e,[{key:"delete",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOnProjectDeleted();case 2:return e.next=4,this.doDelete();case 4:this.reloadProjectList();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callDeletor(re.projects,{id:this.project.id}).autoDelete();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callOnProjectDeleted",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(this.project.id,!1);case 2:if(!e.sent){e.next=6;break}return e.next=6,null===(t=(n=Z[this.project.id].dbStore).onProjectDeleted)||void 0===t?void 0:t.call(n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadProjectList",value:function(){(new Ie).load()}}]),e}(),nn=function(e){var t=e.children;return Object(lt.jsx)("div",{className:"mt-2",children:t})},rn=function(e){var t=e.children,n=e.icon;return Object(lt.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(lt.jsxs)("div",{className:"sm:flex sm:items-start",children:[n&&Object(lt.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Object(lt.jsx)("i",{className:"".concat(n," text-xl -mt-1")})}),Object(lt.jsx)("div",{className:"sm:flex sm:items-start",children:Object(lt.jsx)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:t})})]})})},an=function(e){var t=e.children;return Object(lt.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:t})},cn=function(e){var t=e.children;return Object(lt.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t})},on={confirm:{normal:"bg-prussian-blue-500",hover:"bg-prussian-blue-600",focus:"bg-prussian-blue-800"},alert:{normal:"bg-red-600",hover:"bg-red-700",focus:"bg-red-900"}},sn=function(e){var t=e.title,n=e.children,r=e.type,i=e.actionText,a=e.icon,c=e.handleClickAction,o=e.closeFn,s=e.animationClass,l=e.disableAction,u=void 0!==l&&l;return Object(lt.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(lt.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(lt.jsx)("div",{className:"animate__animated ".concat(s," animate__faster fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"),"aria-hidden":"true"}),Object(lt.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(lt.jsxs)("div",{className:"animate__animated ".concat(s," animate__faster inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"),children:[Object(lt.jsxs)(rn,{icon:a,children:[Object(lt.jsx)(cn,{children:t}),Object(lt.jsx)(nn,{children:n})]}),Object(lt.jsxs)(an,{children:[Object(lt.jsx)("button",{onClick:c,type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 ".concat(on[r].normal," text-base font-medium text-white hover:").concat(on[r].focus," focus:outline-none focus:ring-0 focus:").concat(on[r].focus," sm:ml-3 sm:w-auto sm:text-sm"),disabled:u,children:i}),Object(lt.jsx)("button",{onClick:o,type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-0 focus:bg-gray-200 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},ln=function(e){var t=e.project,n=Object(Ce.useState)(!1),i=Object(Fe.a)(n,2),a=i[0],c=i[1],o=Object(Ce.useState)("animate__fadeIn"),s=Object(Fe.a)(o,2),l=s[0],u=s[1],d=Object(jt.b)((function(e){return e.project})),f=Object(Qt.g)(),p=function(){a?(u("animate__fadeOut"),setTimeout((function(){return c(!1)}),500)):(u("animate__fadeIn"),c(!0))};return Object(lt.jsxs)("span",{children:[Object(lt.jsxs)("button",{onClick:p,className:"px-4 py-2 text-red-700 inline-flex items-center md:mb-2 lg:mb-0 rounded bg-red-700 bg-opacity-10 hover:bg-opacity-20 text-sm",children:[Object(lt.jsx)("i",{className:"bi-trash"}),Object(lt.jsx)("span",{className:"ml-2 hidden lg:inline-block",children:"Delete project"})]}),a&&Object(lt.jsx)(sn,{title:"Delete Project",actionText:"Delete",type:"alert",handleClickAction:function(){var e;p(),(null===d||void 0===d||null===(e=d[F._settings][0])||void 0===e?void 0:e.id)===t.id&&Y.dispatch({type:r.resetCurrentProject}),setTimeout((function(){new tn(t).delete(),f(Pe.projectsList)}),500)},closeFn:p,animationClass:l,icon:"text-red-600 bi-exclamation-triangle",children:Object(lt.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete this project?",Object(lt.jsx)("br",{}),Object(lt.jsx)("br",{}),"All project data will be permanently removed from this device. This action cannot be undone.",Object(lt.jsx)("br",{}),Object(lt.jsx)("br",{}),"Data stored on other devices will not be affected."]})})]})};function un(e,t){var n=e;return t.forEach((function(e){n=n.replace(new RegExp(":".concat(e.name),"g"),e.value)})),n}var dn=n(16),fn=function(e){var t=e.project;return Object(lt.jsxs)(dn.b,{to:un(Pe.projectEdit,[{name:be.projectId,value:t.id}]),className:"px-4 py-3 text-gray-800 mr-3 inline-flex items-center ml-auto leading-none text-sm bg-gray-100 hover:bg-gray-200 rounded",children:[Object(lt.jsx)("i",{className:"bi-pencil"})," ",Object(lt.jsx)("span",{className:"ml-2 hidden sm:inline-block",children:"Edit Project"})]})},pn=function(e){var t=e.children;return Object(lt.jsx)("div",{className:"flex items-end flex-wrap mt-6",children:t})},hn=function(e){var t=e.project;return Object(lt.jsxs)("div",{className:"p-6",children:[Object(lt.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(lt.jsx)("p",{className:"text-gray-600 text-xs",children:"Description"}),Object(lt.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(lt.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(lt.jsx)("p",{className:"text-md",children:Pt("yyyy/MM/dd, at hh:mm",new Date(t.createdAt))}),Object(lt.jsxs)(pn,{children:[Object(lt.jsx)(ln,{project:t}),Object(lt.jsx)(fn,{project:t})]})]})},bn=function(){var e=Object(Qt.h)()[be.projectId],t=Object(Ce.useState)(null),n=Object(Fe.a)(t,2),r=n[0],i=n[1];return Object(Ce.useEffect)((function(){var t=!0;return t&&function(){var n=Object($.a)(X.a.mark((function n(){var r;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,at(e);case 2:if(n.sent){n.next=5;break}return n.abrupt("return",i(void 0));case 5:return n.next=7,Z[e].callSelector(F._settings).single();case 7:r=n.sent,t&&i(r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){t=!1}}),[e]),void 0===r?Object(lt.jsx)(Qt.a,{to:Pe.projectsList}):Object(lt.jsx)("div",{className:"relative border-2 border-gray-200 border-opacity-60 rounded bg-white",style:{minHeight:"200px"},children:null===r?Object(lt.jsx)(Zt,{}):Object(lt.jsx)(hn,{project:r})})},jn=function(){function e(t,n,r){Object(L.a)(this,e),this.listOfParents=t,this.projectId=n,this.sections=r,this.parentInfoForDetailsView=[]}return Object(B.a)(e,[{key:"get",value:function(){var e=Object($.a)(X.a.mark((function e(){var t=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(this.listOfParents,function(){var e=Object($.a)(X.a.mark((function e(n){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processElement(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.parentInfoForDetailsView);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processElement",value:function(){var e=Object($.a)(X.a.mark((function e(t){var n,r,i,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("|"),e.next=3,Z[this.projectId].callSelector(n[0],Object(o.a)({},u.id,n[1])).single();case 3:r=e.sent,i=st(this.sections,n[0]),a=Vt(i.formModel),this.parentInfoForDetailsView.push({sectionId:n[0],element:r,txt:r[i.formModel[a].fieldName]});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),mn=function(e){var t=e.projectId,n=e.parentsInfo,r=e.sections,i=Object(Ce.useState)([]),a=Object(Fe.a)(i,2),c=a[0],o=a[1];return Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var i=Object($.a)(X.a.mark((function i(){var a;return X.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,new jn(n,t,r).get();case 2:a=i.sent,e&&o(a);case 4:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!1}}),[n,t,r]),Object(lt.jsxs)("div",{className:"p-3 pt-0",children:[Object(lt.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Parent elements:"}),c.map((function(e,n){return Object(lt.jsx)(dn.b,{to:un(Pe.projectSectionEleDetails,[{name:be.projectId,value:t},{name:be.sectionId,value:e.sectionId},{name:be.elementId,value:e.element.id}]),className:"mr-2 py-1 px-4 bg-gray-200 hover:bg-gray-300 bg-opacity-80 rounded-md text-sm font-semibold",children:e.txt},e.element.id)}))]})},xn=function(e){return e.value||null},vn=function(e){return e.value?"\u2713":null},On=function(e){var t=e.value;return t?Pt("yyyy/MM/dd hh:mm",new Date(t)):null},yn=function(e){var t=e.value;return t?Pt("yyyy/MM/dd",new Date(t)):null};var gn=function(e,t){return function(e,t){var n=e.find((function(e){return e.value==t}));return"undefined"===typeof n?null:n.label}(e,t.value)},wn=function(e){switch(e.componentCode){case a.basicInput:case a.basicTextarea:return xn;case a.basicSelect:case a.basicRadio:return gn.bind(null,e.options);case a.basicCheckbox:return vn;case a.datePicker:return yn;case a.dateTimePicker:return On;default:return xn}},kn=function(e){var t=e.projectId,n=e.sectionId,r=e.mode,i=e.elementId,a=r===he.add?"bi-plus":"bi-pencil",c=[{name:be.projectId,value:t},{name:be.sectionId,value:n}];r===he.edit&&c.push({name:be.elementId,value:i});var o=un(r===he.add?Pe.projectSectionAddEle:Pe.projectSectionEditEle,c);return Object(lt.jsx)(dn.b,{to:o,className:"absolute bottom-5 right-7 md:bottom-7 md:right-10 bg-prussian-blue-400 text-white text-xl shadow-xl rounded-3xl h-14 w-14 flex items-center justify-center",children:Object(lt.jsx)("i",{className:a})})},Sn=function(){var e=Object(Ce.useState)(null),t=Object(Fe.a)(e,2),n=t[0],r=t[1],i=Object(jt.b)((function(e){return e.project})),a=Object(Qt.h)(),c=a[be.projectId],o=a[be.sectionId],s=a[be.elementId];return Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var t=Object($.a)(X.a.mark((function t(){var n,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at(c);case 2:if(n=t.sent,c&&o&&s&&n){t.next=5;break}return t.abrupt("return",r(void 0));case 5:return t.next=7,Z[c].callSelector(o,{id:s}).single();case 7:i=t.sent,e&&r(i);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[c,o,s,i]),void 0===n?c&&o?Object(lt.jsx)(Qt.a,{to:un(Pe.projectSectionElesList,[{name:be.projectId,value:c},{name:be.sectionId,value:o}])}):Object(lt.jsx)(Qt.a,{to:Pe.projectsList}):Object(lt.jsxs)($t,{headerText:"Details",children:[null===n||null===i?Object(lt.jsx)(Zt,{}):Object(lt.jsx)(Nn,{element:n,formModels:st(i[F._sections],o).formModel}),null!==n&&n.parentsInfo&&Array.isArray(n.parentsInfo)&&n.parentsInfo.length>0&&Object(lt.jsx)(mn,{projectId:c,parentsInfo:n.parentsInfo,sections:i[F._sections]}),null!==n&&Object(lt.jsx)(kn,{projectId:c,sectionId:o,elementId:s,mode:he.edit})]})},Nn=function(e){var t=e.element,n=e.formModels;return Object(lt.jsx)("div",{className:"p-3",children:n.map((function(e){return e.label?Object(lt.jsx)(In,{formModel:e,value:t[e.fieldName]},e.fieldName):null}))})},In=function(e){var t=e.formModel,n=e.value;return"undefined"===typeof n?null:Object(lt.jsxs)("div",{children:[Object(lt.jsx)("p",{className:"text-sm text-gray-500",children:t.label}),Object(lt.jsx)("p",{className:"mb-3",children:wn(t)({value:n})})]})},Cn=function(e){var t=e.children,n=e.tdProps,r=e.elementId,a=Object(Qt.g)(),c=Object(Qt.h)();return Object(lt.jsx)("td",Object(i.a)(Object(i.a)({onClick:function(){return a(un(Pe.projectSectionEleDetails,[{name:be.projectId,value:c.projectId},{name:be.sectionId,value:c.sectionId},{name:be.elementId,value:r}]))},className:"px-6 py-4 cursor-pointer"},n),{},{children:t}))},Dn=n(36),En=function(e){var t=e.sectionInfo,n=e.sectionData,r=function(e){var t=Object(Ce.useMemo)((function(){return[]}),[e.id,e.formModel]);return Object(Ce.useMemo)((function(){return e.formModel.forEach((function(n){e.id&&n.label&&t.push({Header:n.label,accessor:n.fieldName,Cell:wn(n)})}))}),[e.id,e.formModel,t]),t}(t),a=Object(Dn.useTable)({columns:r,data:n},Dn.useSortBy),c=a.getTableProps,o=a.getTableBodyProps,s=a.headerGroups,l=a.rows,u=a.prepareRow;return Object(lt.jsxs)("table",Object(i.a)(Object(i.a)({className:"table-auto w-full divide-y divide-gray-200"},c()),{},{children:[Object(lt.jsx)("thead",{className:"bg-gray-50",children:s.map((function(e){return Object(lt.jsx)("tr",Object(i.a)(Object(i.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(lt.jsx)("th",Object(i.a)(Object(i.a)({className:"px-6 py-2 text-xs text-gray-500 text-left"},e.getHeaderProps(e.getSortByToggleProps())),{},{children:e.render("Header")}))}))}))}))}),Object(lt.jsx)("tbody",Object(i.a)(Object(i.a)({className:"divide-y divide-gray-200"},o()),{},{children:l.map((function(e){return u(e),Object(lt.jsx)("tr",Object(i.a)(Object(i.a)({className:"whitespace-nowrap"},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(lt.jsx)(Cn,{tdProps:e.getCellProps(),elementId:e.row.original.id,children:e.render("Cell")},"".concat(e.column.id).concat(e.row.id))}))}))}))}))]}))},Pn=function(e){var t=e.sectionTitle,n=e.sectionId,r=e.projectId;return Object(lt.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(lt.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(lt.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(lt.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"Nothing here yet"}),Object(lt.jsxs)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:["There are no items in ",t]}),Object(lt.jsx)("p",{className:"leading-relaxed mb-3",children:"Create a new entry to populate this list"}),Object(lt.jsx)("div",{className:"flex flex-wrap mt-7",children:Object(lt.jsx)(dn.b,{to:un(Pe.projectSectionAddEle,[{name:be.projectId,value:r},{name:be.sectionId,value:n}]),className:"flex-grow mx-2 mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Create a new element"})})]})})})},Fn=function(){var e=Object(Qt.h)(),t=e[be.projectId],n=e[be.sectionId],r=Object(jt.b)((function(e){return e.project})),i=Object(Ce.useState)(null),a=Object(Fe.a)(i,2),c=a[0],o=a[1];if(Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var r=Object($.a)(X.a.mark((function r(){var i;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,at(t);case 2:if(r.sent){r.next=5;break}return r.abrupt("return",o(void 0));case 5:return r.next=7,Z[t].callSelector(n).multiple();case 7:i=r.sent,e&&o(i);case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){e=!1}}),[n,t]),void 0===c)return Object(lt.jsx)(Qt.a,{to:Pe.projectsList});if(null===r||null===c)return Object(lt.jsx)(Zt,{});var s=st(r[F._sections],n);return s?0===c.length?Object(lt.jsx)(Pn,{sectionId:n,sectionTitle:s.title,projectId:t}):Object(lt.jsxs)($t,{headerText:s.title,children:[Object(lt.jsx)(En,{sectionInfo:s,sectionData:c}),Object(lt.jsx)(kn,{projectId:t,sectionId:n,mode:he.add})]}):null},An=function(){function e(t,n){Object(L.a)(this,e),this.projectSettings=t,this.localSettingAdditionalKeys=n,this.copyOfProjectSettings=void 0}return Object(B.a)(e,[{key:"save",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setProjectSettingsCloneWithAdditionalKeys(),this.doStoreProjectSettings(),e.abrupt("return",this.copyOfProjectSettings);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectSettingsCloneWithAdditionalKeys",value:function(){this.copyOfProjectSettings=Object(i.a)(Object(i.a)({},this.projectSettings),this.localSettingAdditionalKeys)}},{key:"doStoreProjectSettings",value:function(){Z.system.callInsertor(re.projects,this.copyOfProjectSettings).autoInsert()}}]),e}(),_n=function(){function e(t,n){var r;Object(L.a)(this,e),this.project=t,this.mode=n,this.projectDataToSave=(r={},Object(o.a)(r,F._settings,[]),Object(o.a)(r,F._sections,[]),r)}return Object(B.a)(e,[{key:"save",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projectDataToSave[F._settings]=this.project[F._settings].concat(),this.projectDataToSave[F._sections]=this.project[F._sections].concat(),this.setcreatedAt(),this.mode===he.edit&&this.setupdatedAt(),Z[this.projectDataToSave[F._settings][0].id]){e.next=7;break}return e.next=7,this.initDbInstance();case 7:return e.next=9,this.saveSettings();case 9:return e.next=11,this.saveSections();case 11:return e.next=13,this.postSaveActions();case 13:return e.abrupt("return",this.projectDataToSave);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setcreatedAt",value:function(){this.projectDataToSave[F._settings][0].createdAt=new Date((new Date).toUTCString()).toISOString()}},{key:"setupdatedAt",value:function(){this.projectDataToSave[F._settings][0].updatedAt=new Date((new Date).toUTCString()).toISOString()}},{key:"initDbInstance",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new nt(this.projectDataToSave[F._settings][0],this.projectDataToSave[F._sections]).init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSettings",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[this.projectDataToSave[F._settings][0].id].callInsertor(F._settings,this.projectDataToSave[F._settings][0]).autoInsert();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSections",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[this.projectDataToSave[F._settings][0].id].callDeletor(F._sections).clearSection();case 2:return e.next=4,Z[this.projectDataToSave[F._settings][0].id].callInsertor(F._sections,this.projectDataToSave[F._sections]).autoInsert();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postSaveActions",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.mode===he.add?"postProjectCreation":"postProjectUpdate",e.next=3,null===(t=(n=Z[this.projectDataToSave[F._settings][0].id].dbStore)[r])||void 0===t?void 0:t.call(n,this.projectDataToSave);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,e.next=9,new An(this.projectDataToSave[F._settings][0],i).save();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tn=function(e){var t=e.indexSection,n=e.indexFormElement,a=e.element,c=Object(Qt.h)(),s=Object(jt.b)((function(e){return e.formProject.mode})),l=Object(jt.b)((function(e){return e.formProject.original[F._sections][t]})),u=c[be.projectId],d=Object(Ce.useMemo)((function(){return u?he.edit:he.add}),[u]),f=function(e,t){return!(!t||!e)&&e.formModel.some((function(e){return e.fieldName===t}))}(l,a.fieldName),p=Object(Ce.useMemo)((function(){return d===he.edit&&f?A[s].sectionEles.existingItem:A[s].sectionEles.newItem}),[f,d,s]);return Object(lt.jsx)(Gt,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{formModel:p,handleChange:function(e,t,n,c){var s="label"!==n||f?{}:{fieldName:"string"===typeof c?Ut(c):c};Y.dispatch({type:r.updateFormProjectUpdateFormModelOfSection,payload:{indexSection:e,indexFormElement:t,formElement:Object(i.a)(Object(i.a)(Object(i.a)({},a),s),{},Object(o.a)({},n,c))}})}.bind(void 0,t,n),handleOptionsChange:function(e,t,n,a,c,s){Y.dispatch({type:r.updateFormProjectUpdateFormModelOptionValue,payload:{indexSection:e,indexFormElement:t,indexOptions:n,formElement:Object(i.a)(Object(i.a)({},a),{},Object(o.a)({},c,s))}})}.bind(void 0,t,n),handleClickAddOption:function(e,t){Y.dispatch({type:r.updateFormProjectUpdateFormModelAddOption,payload:{indexSection:e,indexFormElement:t}})}.bind(void 0,t,n),handleClickDeleteOption:function(e,t,n){Y.dispatch({type:r.updateFormProjectUpdateFormModelDeleteOption,payload:{indexSection:e,indexFormElement:t,indexOptions:n}})}.bind(void 0,t,n)})))},Mn=function(e){var t=e.section,n=e.sectionIndex,a=Object(jt.b)((function(e){return e.formProject.mode})),c=Object(jt.b)((function(e){return e.formProject.project[F._sections]})),s=t.formModel.map((function(e){return Object.values(u).includes(e.fieldName)?null:e.fieldName})).filter((function(e){return null!==e})),l=function(e){Y.dispatch({type:r.updateFormProjectRemoveFieldFromSection,payload:{sectionIndex:n,fieldIndex:e}})};return Object(lt.jsxs)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:[Object(lt.jsxs)("div",{children:[Object(lt.jsx)("h3",{className:"text-md font-bold",children:"Section # ".concat(n+1)}),Object(lt.jsx)("hr",{className:"mt-4"})]}),Object(lt.jsx)("div",{className:"pt-4",children:Object(lt.jsx)(Gt,{formModel:A[a].sectionInfo,element:t,handleChange:function(e,n,a){Y.dispatch({type:r.updateFormProjectUpdateSection,payload:{section:Object(i.a)(Object(i.a)({},t),{},Object(o.a)({},n,a)),index:e}})}.bind(void 0,n),sectionId:t.id})}),Object(lt.jsx)("h4",{className:"pl-2 font-bold mb-2 mt-6",children:"Section element fields"}),t.formModel.map((function(e,r){return s.includes(e.fieldName)?Object(lt.jsxs)("div",{className:"border border-transparent hover:border-prussian-blue-500 shadow rounded mb-3 p-4",children:[Object(lt.jsx)(Tn,{indexFormElement:r,indexSection:n,element:e}),s.length<2?null:Object(lt.jsx)("div",{className:"flex justify-end",children:Object(lt.jsx)("button",{onClick:l.bind(void 0,r),className:"text-sm py-1 px-3 ".concat(Mt),children:"Delete field"})})]},"".concat(t.id,"-").concat(r)):null})),Object(lt.jsxs)("div",{className:"flex items-end mt-10 mb-1",children:[c.length>1&&Object(lt.jsx)("button",{onClick:function(){Y.dispatch({type:r.updateFormProjectRemoveSection,payload:n})},className:"py-2 px-4 text-sm ".concat(Mt),children:"Delete section"}),Object(lt.jsx)("button",{onClick:function(){Y.dispatch({type:r.updateFormProjectAddFieldToSection,payload:n})},className:"ml-auto py-2 px-4 text-sm ".concat(Tt),children:"Add field"})]})]})},Ln=function(){var e=Object(Qt.h)().projectId,t=Object(jt.b)((function(e){return e.formProject.mode})),n=Object(jt.b)((function(e){return e.formProject.project})),a=Object(jt.b)((function(e){return e.formElesValidState})),c=e?he.edit:he.add,s=Object(Qt.g)(),l=function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new _n(n,c).save();case 2:return e.next=4,(new Ie).load();case 4:new rt(n[F._settings],n[F._sections]).set(),s(un(Pe.projectDetails,[{name:be.projectId,value:n[F._settings][0].id}]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=c===he.add?A[t].projectInfo.newItem:A[t].projectInfo.existingItem;return Object(lt.jsxs)("span",{children:[Object(lt.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(lt.jsx)(Gt,{formModel:u,element:n[F._settings][0],handleChange:function(e,t){Y.dispatch({type:r.updateFormProjectSettings,payload:Object(i.a)(Object(i.a)({},n[F._settings][0]),{},Object(o.a)({},e,t))})}})}),Object(lt.jsx)("div",{className:"px-1 md:px-2 lg:px-3",children:n[F._sections].map((function(e,t){return Object(lt.jsx)(Mn,{section:e,sectionIndex:t},e.id)}))}),Object(lt.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(lt.jsxs)("div",{className:"flex items-end flex-wrap",children:[Object(lt.jsx)("button",{className:"w-full sm:w-auto py-2 px-6 sm:mr-3 ".concat(Tt),onClick:function(){Y.dispatch({type:r.updateFormProjectAddSection})},children:"Add section"}),Object(lt.jsx)("button",{className:"w-5/12 sm:w-auto sm:ml-auto py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return s(-1)},children:"Cancel"}),Object(lt.jsx)("button",{disabled:Object.keys(a).some((function(e){return!1===a[e]})),className:"w-5/12 ml-auto sm:ml-0 mt-8 sm:mt-0 sm:w-auto py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500 disabled:bg-gray-400 disabled:bg-opacity-40 disabled:cursor-not-allowed",onClick:l,children:"Save"})]})})]})},Bn=(n(83),function(){return Object(lt.jsx)("div",{className:"ml-auto",children:Object(lt.jsxs)("label",{htmlFor:"project-editor-mode-toggle",className:"flex items-center cursor-pointer",children:[Object(lt.jsxs)("div",{className:"mr-3 mt-1 text-gray-500 text-xs leading-none text-right",children:["Advanced",Object(lt.jsx)("br",{}),"mode"]}),Object(lt.jsxs)("div",{className:"relative mt-1",children:[Object(lt.jsx)("input",{type:"checkbox",id:"project-editor-mode-toggle",className:"sr-only",onChange:function(){Y.dispatch({type:r.setProjectEditorMode})}}),Object(lt.jsx)("div",{className:"block bg-gray-600 w-10 h-6 rounded-full"}),Object(lt.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"})]})]})})}),Vn=function(){var e=Object(Qt.h)(),t=e[be.projectId]?he.edit:he.add,n=e[be.projectId],i=Object(Ce.useState)(null),a=Object(Fe.a)(i,2),c=a[0],s=a[1];if(Object(Ce.useEffect)((function(){var e,r=!0;return t===he.add?s((e={},Object(o.a)(e,F._settings,[{id:U.random(),title:"",description:"",createdAt:"",localStorage:l.IndexedDB}]),Object(o.a)(e,F._sections,[{id:U.random(),title:"",formModel:[{}]}]),e)):(r&&function(){var e=Object($.a)(X.a.mark((function e(){var t,i,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(n);case 2:if(t=e.sent,n&&t){e.next=5;break}return e.abrupt("return",s(void 0));case 5:return e.next=7,Z[n].callSelector(F._settings).multiple();case 7:return i=e.sent,e.next=10,Z[n].callSelector(F._sections).multiple();case 10:a=e.sent,r&&s({_settings:i,_sections:a});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){r=!1})}),[t,n]),void 0===c)return Object(lt.jsx)(Qt.a,{to:Pe.projectsList});var u=t===he.add?"Add Project":"Edit Project";return Y.dispatch({type:r.setFormProject,payload:c}),Object(lt.jsxs)("span",{children:[Object(lt.jsxs)("div",{className:"p-4 bg-white rounded shadow flex",children:[Object(lt.jsx)("div",{children:Object(lt.jsx)("h3",{className:"text-xl font-bold",children:u})}),null!==c&&Object(lt.jsx)(Bn,{})]}),null===c&&Object(lt.jsx)(Zt,{}),null!==c&&Object(lt.jsx)(Ln,{})]})},Un=function(){function e(t,n){Object(L.a)(this,e),this.projectData=t,this.fileHandle=n}return Object(B.a)(e,[{key:"import",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializeDb();case 2:return e.next=4,this.setLocalProjectSettings();case 4:if(this.dispatchProject(this.projectData[F._settings][0]),this.projectData[F._settings][0].localStorage!=l.IndexedDB){e.next=8;break}return e.next=8,this.saveDataToDb();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLocalProjectSettings",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=Z[this.projectData[F._settings][0].id].dbStore).postProjectCreation)||void 0===t?void 0:t.call(n,this.projectData);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return r=e.t0,e.next=8,new An(this.projectData[F._settings][0],r).save();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeDb",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new nt(this.projectData[F._settings][0],this.projectData[F._sections],this.fileHandle).init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveDataToDb",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=X.a.keys(this.projectData);case 1:if((e.t1=e.t0()).done){e.next=7;break}return t=e.t1.value,e.next=5,Z[this.projectData[F._settings][0].id].callInsertor(t,this.projectData[t]).autoInsert();case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProject",value:function(e){Y.dispatch({type:r.addProjectToList,payload:e})}}]),e}(),Rn=n(42),qn=n.n(Rn),Wn=function(){function e(){Object(L.a)(this,e),this.fileHandle=void 0,this.fileContents=void 0,this.projectData=void 0}return Object(B.a)(e,[{key:"import",value:function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof window.showOpenFilePicker){e.next=5;break}return e.next=3,this.askForFileHandle();case 3:e.next=7;break;case 5:return e.next=7,this.importFromFile();case 7:if(this.fileContents){e.next=9;break}return e.abrupt("return");case 9:return this.parseFileContents(),e.abrupt("return",{project:this.projectData,fileHandle:this.fileHandle});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"askForFileHandle",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker({multiple:!1}).then((function(e){return e}));case 2:return t=e.sent,this.fileHandle=t[0],e.next=6,Ae(this.fileHandle);case 6:this.fileContents=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importFromFile",value:function(){var e=Object($.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn()({multiple:!1,accept:"text/json"});case 2:return t=e.sent,e.next=5,t[0].text();case 5:this.fileContents=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.projectData=JSON.parse(this.fileContents)}}]),e}(),Hn=function(e){var t=e.btnType,n=void 0===t?"icon":t,r=Object(Qt.g)(),a=Object(jt.b)((function(e){return e.formElesValidState})),c=Object(Ce.useState)(!1),s=Object(Fe.a)(c,2),l=s[0],u=s[1],d=Object(Ce.useState)("animate__fadeIn"),f=Object(Fe.a)(d,2),p=f[0],h=f[1],b=Object(Ce.useState)(null),j=Object(Fe.a)(b,2),m=j[0],x=j[1],v=Object(Ce.useState)(),O=Object(Fe.a)(v,2),y=O[0],g=O[1],w=Object(Ce.useState)(null),S=Object(Fe.a)(w,2),N=S[0],I=S[1],C=function(){var e=Object($.a)(X.a.mark((function e(){var t,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}h("animate__fadeOut"),setTimeout((function(){return u(!1)}),500),e.next=20;break;case 5:return e.next=7,(new Wn).import();case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:if(t=e.t0,n=t.project,r=t.fileHandle,n){e.next=15;break}return e.abrupt("return");case 15:h("animate__fadeIn"),u(!0),x(n),I(n[F._settings][0]),g(r);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m[F._settings][0]=N,e.next=3,new Un(m,y).import();case 3:C(),new rt(m[F._settings],m[F._sections]).set(),setTimeout((function(){return r(Pe.projectsList)}),500);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(lt.jsxs)("span",{children:["icon"===n?Object(lt.jsxs)("span",{children:[Object(lt.jsx)("button",{"data-tip":!0,"data-for":"importProject",onClick:C,className:"mx-2 my-2 text-white bg-prussian-blue-600 border-0 py-1 px-6 focus:outline-none hover:bg-prussian-blue-700 rounded font-bold text-sm",children:Object(lt.jsx)("i",{className:"bi bi-arrow-bar-down"})}),Object(lt.jsx)(gt.a,{id:"importProject",effect:"solid",children:Object(lt.jsx)("span",{children:"Import an existing project"})})]}):Object(lt.jsx)("button",{"data-tip":!0,"data-for":"importProject",onClick:C,className:"w-full mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Import an existing project"}),l&&Object(lt.jsx)(sn,{title:"Import project",actionText:"Import",type:"confirm",handleClickAction:D,closeFn:C,animationClass:p,disableAction:Object.keys(a).some((function(e){return!1===a[e]})),children:N&&Object(lt.jsx)(Gt,{element:N,formModel:k,handleChange:function(e,t){I(Object(i.a)(Object(i.a)({},N),{},Object(o.a)({},e,t)))}})})]})},zn=function(){return Object(lt.jsx)("div",{className:"container px-0 md:px2 lg:px-5 pt-20 md:pt-24 mx-auto",children:Object(lt.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(lt.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(lt.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"No projects found"}),Object(lt.jsx)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:"You don't have any Projects on this device yet"}),Object(lt.jsx)("p",{className:"leading-relaxed mb-3",children:"You can create a new project or import one from an existing project file."}),Object(lt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:gap-2 mt-7",children:[Object(lt.jsx)(Hn,{btnType:"text"}),Object(lt.jsx)(dn.b,{to:Pe.projectAdd,className:"w-full flex flex-wrap content-center justify-center mt-4 bg-gray-200 border-0 py-3 px-8 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:"Create a new project"})]})]})})})},Kn=function(e){var t=e.project;return Object(lt.jsxs)("div",{className:"ml-auto",children:[Object(lt.jsx)(fn,{project:t}),Object(lt.jsxs)(dn.b,{to:un(Pe.projectDetails,[{name:be.projectId,value:t.id}]),className:"px-4 py-3 text-white inline-flex items-center leading-none text-sm bg-prussian-blue-400 hover:bg-prussian-blue-500 rounded",children:[Object(lt.jsx)("i",{className:"bi-info-circle mr-2"}),"Project details"]})]})},Gn=function(e){var t=e.project;return Object(lt.jsx)("button",{onClick:function(){return new it(t.id).loadProject()},className:"px-4 py-2 text-white ml-auto inline-flex items-center md:mb-2 lg:mb-0 rounded bg-green-500 hover:bg-green-600 text-sm",children:"Load project"})},Jn=function(e){var t=e.project,n=Object(jt.b)((function(e){return e.project}));return Object(lt.jsx)("div",{className:" mt-4 h-full border-2 border-gray-200 border-opacity-60 rounded-lg bg-white",children:Object(lt.jsxs)("div",{className:"p-6",children:[Object(lt.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(lt.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(lt.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(lt.jsx)("p",{className:"text-md",children:Pt("yyyy/MM/dd, at hh:mm",new Date(t.createdAt))}),Object(lt.jsxs)(pn,{children:[Object(lt.jsx)(ln,{project:t}),null===n||n[F._settings][0].id!==t.id||void 0===Z[t.id]?Object(lt.jsx)(Gn,{project:t}):Object(lt.jsx)(Kn,{project:t})]})]})})},Yn=function(){var e=Object(Ce.useState)(!1),t=Object(Fe.a)(e,2),n=t[0],r=t[1],i=Object(jt.b)((function(e){return e.projects})),a=(null===i||void 0===i?void 0:i.length)||0;return Object(Ce.useEffect)((function(){var e=!0;return e&&function(){var e=Object($.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ie).load();case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){e=!1}}),[a]),Array.isArray(i)&&0===i.length?Object(lt.jsx)(Qt.a,{to:Pe.projectsNone}):n?Object(lt.jsxs)("div",{children:[Object(lt.jsx)("div",{className:"md:w-full bg-white border-b-2 rounded border-white",children:Object(lt.jsxs)("div",{className:"flex h-full border-t-2 border-prussian-blue-400 border-opacity-60 rounded justify-between",children:[Object(lt.jsx)("div",{className:"px-6 py-3",children:Object(lt.jsx)("h1",{className:"title-font text-md font-medium text-gray-900",children:"Projects on this device"})}),Object(lt.jsxs)("div",{className:"my-2",children:[Object(lt.jsx)(Hn,{}),Object(lt.jsx)(dn.b,{"data-tip":!0,"data-for":"createProject",to:Pe.projectAdd,className:"mx-2 my-2 text-white bg-prussian-blue-400 border-0 py-1 px-6 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:Object(lt.jsx)("i",{className:"bi bi-plus"})}),Object(lt.jsx)(gt.a,{id:"createProject",effect:"solid",children:Object(lt.jsx)("span",{children:"Create a new project"})})]})]})}),Object(lt.jsx)("div",{className:"p-1 md:w-full",children:i.map((function(e,t){return Object(lt.jsx)(Jn,{project:e},e.id)}))})]}):Object(lt.jsx)("span",{})},Qn=function(){return Object(lt.jsxs)(Qt.d,{children:[Object(lt.jsx)(Qt.b,{path:Pe.projectsList,element:Object(lt.jsx)(Yn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectAdd,element:Object(lt.jsx)(Vn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectEdit,element:Object(lt.jsx)(Vn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectsNone,element:Object(lt.jsx)(zn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectDetails,element:Object(lt.jsx)(bn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectSectionElesList,element:Object(lt.jsx)(Fn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectSectionEleDetails,element:Object(lt.jsx)(Sn,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectSectionAddEle,element:Object(lt.jsx)(en,{})}),Object(lt.jsx)(Qt.b,{path:Pe.projectSectionEditEle,element:Object(lt.jsx)(en,{})}),Object(lt.jsx)(Qt.b,{path:"*",element:Object(lt.jsx)(Qt.a,{to:Pe.projectsList})})]})},Xn=function(e){var t,n=e.project,r=Object(jt.b)((function(e){return e.projects})),i=Object(Qt.g)(),a=Object(Ce.useState)(!1),c=Object(Fe.a)(a,2),o=c[0],s=c[1],l=function(e){s(!o)},u=function(){var e=Object($.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new it(t).loadProject();case 2:d(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){i(un(Pe.projectDetails,[{name:be.projectId,value:e}]))};return Object(lt.jsxs)("span",{children:[o&&Object(lt.jsx)("div",{onClick:function(){return s(!1)},className:"absolute inset-0 h-full w-full z-10"}),Object(lt.jsx)("p",{className:"text-xs text-gray-600 pl-3",children:"Current project:"}),Object(lt.jsxs)("div",{"x-data":"{ dropdownOpen: true }",className:"relative",children:[Object(lt.jsxs)("button",{onClick:function(){return s(!o)},className:"relative w-full flex justify-between text-left z-10 rounded py-2 px-3 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:bg-gray-300",children:[Object(lt.jsx)("span",{children:null===n||void 0===n||null===(t=n[F._settings][0])||void 0===t?void 0:t.title}),Object(lt.jsx)("i",{className:"bi-chevron-expand my-auto"})]}),o&&Object(lt.jsxs)("div",{className:"absolute left-0 mt-2 w-60 bg-white rounded-md overflow-hidden shadow-xl z-20 border border-bg-500",children:[(null===r||void 0===r?void 0:r.length)>1&&Object(lt.jsx)("div",{className:"block py-2.5 px-4 text-sm bg-gray-100 text-gray-600",children:"Projects on this device"}),null===r||void 0===r?void 0:r.map((function(e){return n[F._settings][0].id===e.id?null:Object(lt.jsx)("button",{className:"w-full block text-left px-4 py-2 text-sm text-gray-800 border-b hover:bg-gray-200",onClick:function(){return l(u(e.id))},children:e.title})})),Object(lt.jsx)("div",{className:"block py-2.5 px-4 text-sm bg-gray-100 text-gray-600",children:"Actions"}),Object(lt.jsx)("button",{className:"w-full block text-left px-4 py-2 text-sm text-gray-800 border-b hover:bg-gray-200",onClick:function(){return l(d(n[F._settings][0].id))},children:"Go to the details of this project"}),Object(lt.jsx)("button",{className:"w-full block text-left px-4 py-2 text-sm text-gray-800 border-b hover:bg-gray-200",onClick:function(){return l(i(Pe.projectsList))},children:"Go to the projects list"}),Object(lt.jsx)("button",{className:"w-full block text-left px-4 py-2 text-sm text-gray-800 border-b hover:bg-gray-200",onClick:function(){return l(i(Pe.projectAdd))},children:"Create a new project"})]})]})]})},$n="block py-2.5 px-4 transition duration-200 border-l-2 hover:border-prussian-blue-700 hover:text-prussian-blue-500 text-sm font-semibold",Zn=function(e,t){return"".concat($n,e===t?" border-prussian-blue-700":" border-transparent")},er=[{to:Pe.projectsList,txt:"Projects",icon:"bi-files"}],tr=function(){var e,t=Object(jt.b)((function(e){return e.project})),n=Object(Qt.f)();return null===t?Object(lt.jsx)("span",{}):Object(lt.jsxs)("div",{className:"mt-3",children:[Object(lt.jsx)("div",{className:"block py-2.5 px-1",children:Object(lt.jsx)(Xn,{project:t})}),Object(lt.jsx)("div",{className:"block py-2.5 px-4",children:Object(lt.jsx)("p",{className:"text-xs text-gray-600",children:"Project sections:"})}),null===t||void 0===t||null===(e=t[F._sections])||void 0===e?void 0:e.map((function(e){var r=un(Pe.projectSectionElesList,[{name:be.projectId,value:t[F._settings][0].id},{name:be.sectionId,value:e.id}]);return Object(lt.jsxs)(dn.b,{to:r,className:Zn(n.pathname,r),children:[Object(lt.jsx)("i",{className:"bi-chevron-compact-right"}),Object(lt.jsx)("span",{className:"ml-2",children:e.title})]},e.id)}))]})},nr=function(){var e=Object(Qt.f)();return Object(lt.jsxs)("div",{children:[er.map((function(t){return Object(lt.jsxs)(dn.b,{to:t.to,className:Zn(e.pathname,t.to),children:[Object(lt.jsx)("i",{className:t.icon}),Object(lt.jsx)("span",{className:"ml-2",children:t.txt})]},t.to)})),Object(lt.jsx)(tr,{})]})},rr=function(e){return Object(lt.jsx)("div",{className:"flex-1 p-2 md:p-3 md:pt-5 lg:pt-5 lg:p-10 pt-5 overflow-auto",children:e.children})},ir=function(){var e=Object(jt.b)((function(e){return e.layout.sidebar})),t=function(){Y.dispatch({type:r.toggleSidebar})};return Object(lt.jsxs)("div",{className:"bg-white text-gray-700 flex h-14 shadow-md justify-between",children:[Object(lt.jsx)("button",{className:"mobile-menu-button p-4 focus:outline-none  md:hidden",onClick:t,children:Object(lt.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),Object(lt.jsxs)("div",{className:"relative flex items-center lg:w-auto lg:static md:pl-5 -ml-7 md:ml-0",children:[Object(lt.jsx)(dn.b,{to:"/",className:"text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase",children:Object(lt.jsx)("img",{src:"".concat("/app","/assets/logo/logo_square.svg"),style:{height:"30px",width:"auto"},alt:"Anita"})}),Object(lt.jsxs)(dn.b,{to:"/",className:"hidden md:inline-block mr-4 py-2 whitespace-no-wrap text-prussian-blue-400",children:[Object(lt.jsx)("span",{className:"text-md font-bold leading-relaxed uppercase",children:"Anita"}),Object(lt.jsx)("sup",{style:{fontVariant:"small-caps"},children:"Beta"})]})]}),Object(lt.jsx)("div",{className:"visible md:hidden",children:"\xa0"}),""===e&&Object(lt.jsx)("div",{onClick:t,className:"absolute inset-0 h-full w-full z-10 md:hidden"})]})},ar=function(e){var t=Object(jt.b)((function(e){return e.layout.sidebar}));return Object(lt.jsx)("div",{className:"py-5 z-10",children:Object(lt.jsxs)("div",{className:"".concat(t," sidebar h-full bg-white shadow rounded-sm text-prussian-blue-500 w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform md:relative md:translate-x-0 transition duration-200 ease-in-out"),children:[Object(lt.jsx)("nav",{children:e.children}),Object(lt.jsxs)("div",{className:"absolute bottom-1 text-xs text-gray-400",children:[Object(lt.jsxs)("p",{className:"inline-block mr-1",children:["v","0.10.1"]}),"|",Object(lt.jsxs)("a",{className:"ml-1",href:"https://github.com/anita-app/anita/issues",target:"_blank",rel:"noreferrer",children:[Object(lt.jsx)("i",{className:"bi-bug","data-tip":!0,"data-for":"reportBug"}),Object(lt.jsx)(gt.a,{id:"reportBug",effect:"solid",children:Object(lt.jsx)("span",{children:"Report a bug"})})]})]})]})})},cr=function(){return Object(lt.jsxs)(dn.a,{children:[Object(lt.jsx)(ir,{}),Object(lt.jsxs)("div",{className:"relative admin-container flex",children:[Object(lt.jsx)(ar,{children:Object(lt.jsx)(nr,{})}),Object(lt.jsx)(rr,{children:Object(lt.jsx)(Qn,{})})]})]})},or=n(24),sr=n.n(or),lr=(n(84),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ur(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}(new Ee).init(),sr.a.render(Object(lt.jsx)(De.a.StrictMode,{children:Object(lt.jsx)(jt.a,{store:Y,children:Object(lt.jsx)(cr,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/app","/service-worker.js");lr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ur(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ur(t,e)}))}}()}},[[85,1,2]]]);
//# sourceMappingURL=main.039590f4.chunk.js.map