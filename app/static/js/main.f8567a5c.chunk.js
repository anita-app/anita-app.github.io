(this["webpackJsonpanita-app"]=this["webpackJsonpanita-app"]||[]).push([[0],{81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r,i=n(8);!function(e){e[e.toggleSidebar=1]="toggleSidebar",e[e.addProjectToList=2]="addProjectToList",e[e.setProjectList=3]="setProjectList",e[e.setCurrentProject=4]="setCurrentProject",e[e.addSectionForChildOfSelector=5]="addSectionForChildOfSelector",e[e.resetSectionForChildOfSelector=6]="resetSectionForChildOfSelector",e[e.setValidStateForEle=7]="setValidStateForEle",e[e.unsetValidStateForEle=8]="unsetValidStateForEle",e[e.updateFormElement=9]="updateFormElement",e[e.setFormProject=10]="setFormProject",e[e.setProjectEditorMode=11]="setProjectEditorMode",e[e.updateFormProjectSettings=12]="updateFormProjectSettings",e[e.updateFormProjectAddSection=13]="updateFormProjectAddSection",e[e.updateFormProjectUpdateSection=14]="updateFormProjectUpdateSection",e[e.updateFormProjectUpdateFormModelOfSection=15]="updateFormProjectUpdateFormModelOfSection",e[e.updateFormProjectRemoveSection=16]="updateFormProjectRemoveSection",e[e.updateFormProjectAddFieldToSection=17]="updateFormProjectAddFieldToSection",e[e.updateFormProjectRemoveFieldFromSection=18]="updateFormProjectRemoveFieldFromSection",e[e.updateFormProjectUpdateFormModelAddOption=19]="updateFormProjectUpdateFormModelAddOption",e[e.updateFormProjectUpdateFormModelDeleteOption=20]="updateFormProjectUpdateFormModelDeleteOption",e[e.updateFormProjectUpdateFormModelOptionValue=21]="updateFormProjectUpdateFormModelOptionValue"}(r||(r={}));var a,c={element:null},o=n(14),s={};!function(e){e[e.basicInput=1]="basicInput",e[e.basicTextarea=2]="basicTextarea",e[e.basicCheckbox=3]="basicCheckbox",e[e.basicSelect=4]="basicSelect",e[e.basicRadio=5]="basicRadio",e[e.hiddenInput=6]="hiddenInput",e[e.optionsMaker=7]="optionsMaker",e[e.datePicker=8]="datePicker",e[e.dateTimePicker=9]="dateTimePicker",e[e.childOfSelectorForSection=10]="childOfSelectorForSection",e[e.parentsSelector=11]="parentsSelector"}(a||(a={}));var l,u=[{value:a.basicInput,label:"Short text"},{value:a.basicTextarea,label:"Long text"},{value:a.basicCheckbox,label:"Check box"},{value:a.basicSelect,label:"Drop-down list"},{value:a.basicRadio,label:"Alternative choice"},{value:a.datePicker,label:"Date picker"},{value:a.dateTimePicker,label:"Date & time picker"}],d={componentCode:a.basicInput,fieldName:"label",type:"text",label:"Label",required:!0,width:"8"},h={componentCode:a.basicInput,fieldName:"label",type:"text",label:"Label",required:!0,width:"11"},f=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",required:!0,width:"3"},d],p=[{componentCode:a.hiddenInput,fieldName:"value"},h],b=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",disabled:!0,required:!0,width:"3"},d],j=[{componentCode:a.hiddenInput,fieldName:"value"},h];!function(e){e.id="id",e.dateCreation="dateCreation",e.parentsInfo="parentsInfo",e.lastModified="lastModified",e.createdBy="createdBy"}(l||(l={}));var m,v,x=[{componentCode:a.hiddenInput,fieldName:l.id},{componentCode:a.hiddenInput,fieldName:l.dateCreation},{componentCode:a.basicInput,fieldName:"title",type:"text",value:"",label:"Project",required:!0},{componentCode:a.basicTextarea,fieldName:"description",value:"",label:"Description",required:!0}],O=[{componentCode:a.hiddenInput,fieldName:l.id},{componentCode:a.basicInput,fieldName:"title",type:"text",label:"Section name",required:!0},{componentCode:a.childOfSelectorForSection,fieldName:"childOf",label:"Parent sections:",options:[]}],y=[{componentCode:a.optionsMaker,fieldName:"options",type:"text",label:"Possible values",prerequisites:[{componentCode:[a.basicSelect,a.basicRadio]}],required:!0},{componentCode:a.basicCheckbox,fieldName:"required",value:!1,label:"Required"}],g=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:u,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",required:!0,width:"2"}].concat(y),w=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"8"},{componentCode:a.basicSelect,fieldName:"componentCode",options:u,value:1,label:"Data type",required:!0,width:"4"},{componentCode:a.hiddenInput,fieldName:"fieldName"}].concat(y),k=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:u,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",disabled:!0,required:!0,width:"2"}].concat(y),S=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"8"},{componentCode:a.basicSelect,fieldName:"componentCode",options:u,value:1,label:"Data type",required:!0,width:"4"},{componentCode:a.hiddenInput,fieldName:"fieldName"}].concat(y);!function(e){e[e.advanced=1]="advanced",e[e.basic=2]="basic"}(v||(v={}));var N,I=(m={},Object(o.a)(m,v.advanced,{projectInfo:x,sectionInfo:O,sectionEles:{newItem:g,existingItem:k},optionEles:{newItem:f,existingItem:b}}),Object(o.a)(m,v.basic,{projectInfo:x,sectionInfo:O,sectionEles:{newItem:w,existingItem:S},optionEles:{newItem:p,existingItem:j}}),m);!function(e){e._settings="_settings",e._sections="_sections"}(N||(N={}));var C,E,D,F=n(3),P=n(4),M=n(25),T=function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,null,[{key:"make",value:function(e){var t=new Date((new Date).toUTCString()).toISOString(),n=Math.floor(9e3*Math.random())+1e3,r="".concat(e).concat(t).concat(n);return M.a.SHA256(r).toString()}},{key:"random",value:function(){var e=new Date((new Date).toUTCString()).toISOString(),t=Math.floor(9e3*Math.random())+1e3,n="".concat(e).concat(t);return M.a.SHA256(n).toString()}}]),e}(),_=n(22),A=n.n(_),L={original:(C={},Object(o.a)(C,N._settings,[]),Object(o.a)(C,N._sections,[]),C),project:(E={},Object(o.a)(E,N._settings,[]),Object(o.a)(E,N._sections,[]),E),mode:v.basic},V={sidebar:"-translate-x-full"},B=[],U={project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setCurrentProject:return t.payload;default:return e}},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addProjectToList:return e.concat(t.payload);case r.setProjectList:return t.payload;default:return e}},sectionsForChildOfSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addSectionForChildOfSelector:var n=e.concat();if(n.length){var i=n.findIndex((function(e){return e.id===t.payload.id})),a=i>=0?i:n.length;n[a]=t.payload}else n.push(t.payload);return n;default:return e}},formElesValidState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setValidStateForEle:return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t.payload.formEleId,t.payload.valid));case r.unsetValidStateForEle:var n=Object(i.a)({},e);return Object.keys(n).forEach((function(e){e.startsWith(t.payload)&&delete n[e]})),n;default:return e}},formElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.updateFormElement:return{element:Object(i.a)({},t.payload)};default:return e}},formProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setProjectEditorMode:return{original:e.original,project:e.project,mode:e.mode===v.basic?v.advanced:v.basic};case r.setFormProject:return{original:A()(t.payload),mode:e.mode,project:A()(t.payload)};case r.updateFormProjectSettings:return{original:e.original,mode:e.mode,project:Object(i.a)(Object(i.a)({},e.project),{},Object(o.a)({},N._settings,[Object(i.a)({},t.payload)]))};case r.updateFormProjectAddSection:return{original:e.original,mode:e.mode,project:Object(i.a)(Object(i.a)({},e.project),{},Object(o.a)({},N._sections,e.project[N._sections].concat({id:T.random(),title:"",formModel:[{}]})))};case r.updateFormProjectUpdateSection:var n={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return n.project[N._sections][t.payload.index]=Object(i.a)({},t.payload.section),n;case r.updateFormProjectUpdateFormModelOfSection:var a={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return a.project[N._sections][t.payload.indexSection].formModel[t.payload.indexFormElement]=Object(i.a)({},t.payload.formElement),a;case r.updateFormProjectAddFieldToSection:var c={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return c.project[N._sections][t.payload].formModel.push({}),c;case r.updateFormProjectRemoveFieldFromSection:var s={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return s.project[N._sections][t.payload.sectionIndex].formModel.splice(t.payload.fieldIndex,1),s;case r.updateFormProjectRemoveSection:var l={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return l.project[N._sections].splice(t.payload,1),l;case r.updateFormProjectUpdateFormModelAddOption:var u={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)},d=u.project[N._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.length+1;return u.project[N._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.push({label:"",value:d}),u;case r.updateFormProjectUpdateFormModelDeleteOption:var h={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return h.project[N._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.splice(t.payload.indexOptions,1),h;case r.updateFormProjectUpdateFormModelOptionValue:var f={original:e.original,mode:e.mode,project:Object(i.a)({},e.project)};return f.project[N._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options[t.payload.indexOptions]=t.payload.formElement,f;default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.toggleSidebar:var n=Object(i.a)({},e);return n.sidebar="-translate-x-full"===n.sidebar?"":"-translate-x-full",n;default:return e}}},R=n(37),q=Object(R.a)(U),W=Object(R.b)(q),H=n(2),K=n.n(H),z=n(5),G={name:"localSettings",fields:["data"]};!function(e){e[e.testData=1]="testData"}(D||(D={}));var J,Q={name:"projects",fields:["title","fileHandle","description",l.dateCreation]},Y={projects:Q.name,localSettings:G.name},X=[],$=[Q,G],Z={system:void 0},ee={name:N._sections,pk:"id",fields:["title","childOf","formModel"]},te={name:N._settings,pk:"id",fields:["title","dateCreation","description"]};!function(e){e[e.auds_settings=1]="auds_settings",e[e.auds_sections=2]="auds_sections"}(J||(J={}));var ne=[te,ee],re=l.id,ie=l.parentsInfo,ae=l.createdBy,ce=n(42),oe=function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,null,[{key:"info",value:function(t,n){var r=n?["".concat(t,": ").concat(JSON.stringify(n))]:[t];return e.doLog(r)}},{key:"list",value:function(t,n){e.isEmptyList(n)&&e.doLog([t,"none"]);var r=Array.isArray(n)?e.listFromArray(n):e.listFromObject(n);return r=r.substring(0,r.length-1),r+=".",e.doLog(["".concat(t," ").concat(r)])}},{key:"isEmptyList",value:function(e){return Array.isArray(e)&&!e.length||"object"===typeof e&&!Object.keys(e).length}},{key:"listFromArray",value:function(t){var n="";return t.forEach((function(t){n+="".concat(e.spacesForListeles).concat(e.formatValueForList(t),";")})),n}},{key:"listFromObject",value:function(t){var n="";for(var r in t)n+="".concat(e.spacesForListeles).concat(r,": ").concat(e.formatValueForList(t[r]),";");return n}},{key:"raw",value:function(t,n){return e.doLog(["".concat(t,": "),n])}},{key:"error",value:function(t,n,r){return e.doLog([t,n,r],"error")}},{key:"warn",value:function(t,n,r){return e.doLog([t,n,r],"warn")}},{key:"formatValueForList",value:function(t){return e.isPrimitiveValue(t)||null===t?t:JSON.stringify(t)}},{key:"isPrimitiveValue",value:function(e){switch(typeof e){case"string":case"number":case"boolean":case"undefined":return!0;default:return!1}}},{key:"doLog",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",i=(new Date).toISOString();return t[0]="[".concat(i,"] ").concat(t[0]),!0===e.debug&&(n=console)[r].apply(n,Object(ce.a)(t)),t.join(". ")}}]),e}();oe.debug=!0,oe.spacesForListeles="\n                            - ";var se,le,ue=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:re,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[re],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:re,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;Object(F.a)(this,e),this.allSez=t,this.name=n,this.fields=r,this.pk=i,this.indexes=a,this.orderBy=c,this.childOf=o,this.parentsIdentifiers=s,this.ownerIdentifier=l,this.section=void 0}return Object(P.a)(e,[{key:"make",value:function(){return this.addPkToFields(),this.addPkToIndexes(),this.addSpecialFieldsToFields("indexes"),this.setOwnerIdentifier(),this.checkOrderByExists(),this.checkRelations(),this.checkParentIdentifier(),this.buildSez(),this.section}},{key:"addPkToFields",value:function(){this.fields.includes(this.pk)||this.fields.unshift(this.pk)}},{key:"addPkToIndexes",value:function(){this.indexes.includes(this.pk)||this.indexes.unshift(this.pk)}},{key:"addSpecialFieldsToFields",value:function(e){var t=this;this[e].forEach((function(e){t.fields.includes(e)||t.fields.push(e)}))}},{key:"setOwnerIdentifier",value:function(){this.ownerIdentifier||(this.ownerIdentifier=ae),this.fields.includes(this.ownerIdentifier)||this.fields.push(this.ownerIdentifier)}},{key:"checkOrderByExists",value:function(){this.fields.includes(this.orderBy)||this.fields.push(this.orderBy)}},{key:"checkRelations",value:function(){this.childOf&&this.loopAllRelations()}},{key:"loopAllRelations",value:function(){var e=this;this.childOf.forEach((function(t){return e.checkRelationsExist(t)})),this.childOf.length||(this.childOf=void 0)}},{key:"checkRelationsExist",value:function(e){if(!(this.getSezByName(e)>=0)){var t=this.childOf.indexOf(e);this.childOf.splice(t,1),oe.error("Error in .childOf list","Section '".concat(e,"' does not exist in the sections list and has hence been removed from the .childOf list"))}}},{key:"getSezByName",value:function(e){for(var t=-1,n=0,r=this.allSez.length;-1===t&&n<r;)this.allSez[n].name===e&&(t=n),n++;return t}},{key:"checkParentIdentifier",value:function(){this.childOf&&!this.parentsIdentifiers&&(this.parentsIdentifiers=ie)}},{key:"buildSez",value:function(){this.section={name:this.name,pk:this.pk,indexes:this.indexes,orderBy:this.orderBy,fields:this.fields,ownerIdentifier:this.ownerIdentifier},this.addChildOf()}},{key:"addChildOf",value:function(){this.childOf&&(this.section.childOf=this.childOf,this.section.parentsIdentifiers=this.parentsIdentifiers)}}]),e}(),de=function(){function e(t){Object(F.a)(this,e),this.allSez=t,this.ds={}}return Object(P.a)(e,[{key:"make",value:function(){var e=this;return this.allSez.forEach((function(t){return e.buildSez(t)})),this.ds}},{key:"buildSez",value:function(e){var t=new ue(this.allSez,e.name,e.fields,e.pk,e.indexes,e.orderBy,e.childOf,e.parentsIdentifiers,e.ownerIdentifier).make();this.addToTempDs(t)}},{key:"addToTempDs",value:function(e){this.ds[e.name]=e}}]),e}(),he=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(F.a)(this,e),this.executers=t,this.options=n,this.allSez=r,this.addSystemSections=i,this.dbStore=void 0,this.DS={}}return Object(P.a)(e,[{key:"init",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.addSystemSections&&(this.DS=Object.assign(this.DS,new de(ne).make())),this.allSez.length&&(this.DS=Object.assign(this.DS,new de(this.allSez).make())),!this.executers.dbStore){e.next=8;break}return e.next=5,new this.executers.dbStore(this,this.options).initDB();case 5:this.dbStore=e.sent,e.next=9;break;case 8:throw new Error("No dbStore passed to DbConnector. To initialize DbConnector, you must pass a valid dbStore");case 9:return e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callInsertor",value:function(e,t){return new this.executers.insertor(this,e,t)}},{key:"callSelector",value:function(e,t){return new this.executers.selector(this,e,t)}},{key:"callUpdator",value:function(e,t){return new this.executers.updator(this,e,t)}},{key:"callDeletor",value:function(e,t){return new this.executers.deletor(this,e,t)}}]),e}(),fe=n(40),pe=function(){function e(t,n){Object(F.a)(this,e),this.dbConnector=t,this.options=n,this.db=void 0,this.lastPreviousVersionScheme=void 0}return Object(P.a)(e,[{key:"initDB",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dbConnector.options.indexedDbName){e.next=2;break}throw Error("No name found in DsDbInitOptions. Please provide a name for the database by setting the name on the property indexedDbName in the options passed to DbConnector.");case 2:return this.setDb(),this.options.previousVersions||(this.options.previousVersions=[]),t=this.options.previousVersions.length?this.options.previousVersions.length+1:1,this.options.previousVersions.length&&this.options.previousVersions.forEach((function(e,t){return n.handlePreviousVersion(e,t+1)})),this.buildVersionDb(this.dbConnector.DS,t),e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){}},{key:"setDb",value:function(){this.db=new fe.a(this.dbConnector.options.indexedDbName)}},{key:"handlePreviousVersion",value:function(e,t){var n=new de(e).make();this.buildVersionDb(n,t),this.lastPreviousVersionScheme=n}},{key:"buildVersionDb",value:function(e,t){var n={};for(var r in e)this.lastPreviousVersionScheme&&this.lastPreviousVersionScheme[r]||(n[e[r].name]=e[r].indexes.join());this.db.version(t).stores(n)}}]),e}(),be=n(31),je=function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,null,[{key:"methodToExecute",value:function(e,t,n){var r=t.length;if(!r)return"dexieFullCollection";if(2===r&&(">="===t[0][1]||">"===t[0][1])&&("<="===t[1][1]||"<"===t[1][1]))return"dexieBetween";if("="!==t[0][1])return"complexSelect";if(1===r&&t[0][0]===e[n].pk)return"dexieGet";if(e[n].indexes.indexOf(t[0][0])>-1)return"dexieGet";var i=!0;return t.forEach((function(t){"="!==t[1]&&(i=!1),e[n].indexes.indexOf(t[0])<0&&(i=!1)})),i?"dexieWhere":"complexSelect"}},{key:"buildArrayFildsNValues",value:function(e){var t={};return e.forEach((function(e){t[e[0]]=e[2]})),t}},{key:"buildBetweenSearchParams",value:function(e){var t=">="===e[0][1],n="<="===e[1][1];return{field:e[0][0],lowerBound:e[0][2],upperBound:e[1][2],includeLower:t,includeUpper:n}}},{key:"buildFilter4Dexie",value:function(e){var t=e[0],n=e[1],r=e[2];return function(e){switch(n){case"===":return e[t]===r;case"!=":return e[t]!=r;case">":return e[t]>r;case">=":return e[t]>=r;case"<":return e[t]>r;case"<=":return e[t]<=r;default:return e[t]==r}}}},{key:"chainFilters",value:function(e,t){return function(n){if(!e.length)return!0;var r,i=e[0](n),a=Object(be.a)(e);try{for(a.s();!(r=a.n()).done;){var c=r.value;switch(t){case"OR":i=i||c(n);break;default:i=i&&c(n)}}}catch(o){a.e(o)}finally{a.f()}return i}}}]),e}(),me=function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.logic="AND",this.table=void 0,this.collection=void 0,this.dexieFilters=[],this.arrWhere=[],this.orderBy=void 0,this.debug=!1,this.table=this.dbConnector.DS[this.section].name,this.collection=this.dbConnector.dbStore.db[this.table]}return Object(P.a)(e,[{key:"addWhere",value:function(e){return this.arrWhere.push(e),this}},{key:"setOrLogic",value:function(){return this.logic="OR",this}},{key:"setOrderBy",value:function(e){this.orderBy=e}},{key:"select",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("AND"===this.logic){e.next=2;break}return e.abrupt("return",this.complexSelect());case 2:return t=je.methodToExecute(this.dbConnector.DS,this.arrWhere,this.section),this.handleDebug("SELECT","methodToExecute",t),e.abrupt("return",this[t]());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieGet",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={})[this.arrWhere[0][0]]=this.arrWhere[0][2],e.next=4,this.dbConnector.dbStore.db[this.table].get(t);case 4:return n=e.sent,r=n?[n]:[],e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieWhere",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=je.buildArrayFildsNValues(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieBetween",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=je.buildBetweenSearchParams(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t.field).between(t.lowerBound,t.upperBound,t.includeLower,t.includeUpper).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieFullCollection",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbConnector.dbStore.db[this.table].toArray());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"complexSelect",value:function(){var e=this;this.arrWhere.forEach((function(t){return e.dexieFilters.push(je.buildFilter4Dexie(t))}));var t=this.dbConnector.dbStore.db[this.table].toCollection(),n=je.chainFilters(this.dexieFilters,this.logic);return t=t.and(n),this.handleDebug("SELECT","WHERE",this.arrWhere),this.orderBy?t.sortBy(this.orderBy):t.toArray()}},{key:"insert",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=A()(this.element),this.element)this.dbConnector.DS[this.section].fields.includes(n)||delete t[n];return this.handleDebug("INSERT","WITH OBJECT",t),e.next=5,this.dbConnector.dbStore.db[this.table].put(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=A()(this.element),this.element)this.dbConnector.DS[this.section].fields.includes(n)?t[n]||(t[n]=void 0):delete t[n];return this.handleDebug("UPDATE","WITH OBJECT",t),e.next=5,this.dbConnector.dbStore.db[this.table].update(t[this.dbConnector.DS[this.section].pk],t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){return this.collection.count()}},{key:"delete",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=je.buildArrayFildsNValues(this.arrWhere),this.handleDebug("DELETE","WHERE",this.arrWhere),e.next=4,this.dbConnector.dbStore.db[this.table].where(t).delete();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearDb",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.dbConnector.DS)this.dbConnector.DS[n].name&&t.push(this.dbConnector.dbStore.db[this.dbConnector.DS[n].name].clear());return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearTable",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbConnector.dbStore.db[this.table].clear();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDebug",value:function(e,t,n){this.debug&&oe.raw("EXECUTING ".concat(e," FOR TABLE ").concat(this.table," ").concat(t," "),n)}}]),e}(),ve=function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(P.a)(e,[{key:"autoDelete",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.args[this.dbConnector.DS[this.section].pk]){e.next=6;break}return t=this.args[this.dbConnector.DS[this.section].pk],e.next=4,new me(this.dbConnector,this.section).addWhere([this.dbConnector.DS[this.section].pk,"=",t]).delete();case 4:e.next=7;break;case 6:oe.error("Error in autoDelete","No PK value was found on the element");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xe={insertor:function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(P.a)(e,[{key:"autoInsert",value:function(){return new me(this.dbConnector,this.section,this.element).insert().catch((function(e){oe.error("Error in autoinsert: ",e)}))}}]),e}(),selector:function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.data=[],this.qe=void 0}return Object(P.a)(e,[{key:"single",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),e.next=4,this.executeSelect();case 4:return e.abrupt("return",this.data[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"multiple",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),this.setOrder(),e.next=5,this.executeSelect();case 5:return e.abrupt("return",this.data);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new me(this.dbConnector,this.section).count());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUpSelect",value:function(){this.qe=new me(this.dbConnector,this.section)}},{key:"setQuery",value:function(){this.args&&this.args[this.dbConnector.DS[this.section].pk]&&this.qe.addWhere([this.dbConnector.DS[this.section].pk,"=",this.args[this.dbConnector.DS[this.section].pk]])}},{key:"setOrder",value:function(){this.qe.setOrderBy(this.dbConnector.DS[this.section].orderBy)}},{key:"executeSelect",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.qe.select();case 2:this.data=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),updator:function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(P.a)(e,[{key:"autoUpdate",value:function(){return new me(this.dbConnector,this.section,this.element).update().catch((function(e){oe.error("Error in autoUpdate",e)}))}}]),e}(),deletor:ve,dbStore:pe},Oe=n(1),ye=n.n(Oe),ge=function(){function e(){Object(F.a)(this,e),this.systemDbName="anitaDB"}return Object(P.a)(e,[{key:"init",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe.info("Anita web app."),e.next=3,this.initSystemIndexedDb(this.systemDbName);case 3:this.setLoggerDebug();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initSystemIndexedDb",value:function(){var e=Object(z.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new he(xe,{previousVersions:X,indexedDbName:t},$,!1).init();case 2:Z.system=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReactDev",value:function(){return"_self"in ye.a.createElement("div")}},{key:"setLoggerDebug",value:function(){oe.debug=this.isReactDev()}}]),e}();!function(e){e.add="add",e.edit="edit"}(se||(se={})),function(e){e.projectId="projectId",e.sectionId="sectionId",e.elementId="elementId",e.parentId="parentId"}(le||(le={}));var we={projectsNone:"/projects/none",projectsList:"/projects/list",projectAdd:"/projects/".concat(se.add),projectEdit:"/projects/".concat(se.edit,"/:").concat(le.projectId),projectDetails:"/project/:".concat(le.projectId,"/info"),projectSectionElesList:"/project/:".concat(le.projectId,"/list/:").concat(le.sectionId),projectSectionAddEle:"/project/:".concat(le.projectId,"/:").concat(le.sectionId,"/").concat(se.add),projectSectionEditEle:"/project/:".concat(le.projectId,"/:").concat(le.sectionId,"/").concat(se.edit,"/:").concat(le.elementId),projectSectionEleDetails:"/project/:".concat(le.projectId,"/:").concat(le.sectionId,"/details/:").concat(le.elementId)},ke=n(12);function Se(e){return!!Z[e]}var Ne=function(){function e(t,n){Object(F.a)(this,e),this.childOf=t,this.sections=n,this.parentInfoFormModel=void 0,this.options=[]}return Object(P.a)(e,[{key:"build",value:function(){return this.setOptions(),this.setParentSelector(),this.parentInfoFormModel}},{key:"setOptions",value:function(){var e=this;this.childOf.forEach((function(t){var n=e.sections.find((function(e){return e.id===t}));e.options.push({value:t,label:n.title})}))}},{key:"setParentSelector",value:function(){this.parentInfoFormModel={componentCode:a.parentsSelector,fieldName:l.parentsInfo,label:"Parent elements",options:this.options}}}]),e}();function Ie(e,t){return e.find((function(e){return e.id===t}))}var Ce=n(0),Ee=function(e){var t=e.children,n=e.width;return Object(Ce.jsx)("div",{className:"".concat(n," my-3 px-2 inline-block align-top"),children:t})},De=function(e){var t=e.label;return Object(Ce.jsx)("label",{className:"w-full block mb-0 ml-1 text-gray-700 text-sm",children:t})},Fe=function(e){var t=e.formEle,n=e.element,i=e.fieldId,a=e.touched,c=n[t.fieldName];return Object(Oe.useEffect)((function(){W.dispatch({type:r.setValidStateForEle,payload:{formEleId:"".concat(i,"-required"),valid:""!==c&&void 0!==c&&null!==c}})}),[c,i]),c||!a?Object(Ce.jsx)("div",{className:"ml-1 text-xs italic text-gray-400",children:"Required"}):Object(Ce.jsx)("div",{className:"ml-1 text-red-600 text-xs italic",children:"This field is required"})},Pe=function(e){var t=[];return e.formEle.required&&t.push(Object(Ce.jsx)(Fe,Object(i.a)({},e),"required-validator")),Object(Ce.jsx)("span",{children:t})},Me=n(17),Te=n.n(Me),_e=n(10),Ae=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?t.width:"w-full";return Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("input",{name:t.fieldName,type:"checkbox",checked:!(!Reflect.has(n,t.fieldName)||"boolean"!==typeof n[t.fieldName])&&n[t.fieldName],className:"rounded mt-3 ".concat(d&&o?"text-red-600 border border-red-600":"text-prussian-blue-500"),onChange:function(e){return i(t.fieldName,e.target.checked)},onBlur:function(){return s(!0)}},t.fieldName),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})};function Le(e){return"w-full lg:w-".concat(e,"/12")}var Ve="rounded-md border border-gray-300 hover:border-gray-400 focus:border-gray-200 focus:shadow-inner focus:bg-white focus:ring-0",Be="rounded-md border-2 border-red-300 hover:border-red-400 focus:border-red-200 focus:shadow-inner focus:bg-white focus:ring-0",Ue=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?Le(t.width):"w-full";return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("input",{name:t.fieldName,type:"text",placeholder:t.label,disabled:!!t.disabled&&t.disabled,required:!!t.required&&t.required,className:"w-full ".concat(d&&o?Be:Ve),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})},Re=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?t.width:"w-full";return Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("div",{className:"mt-2 pl-1",children:t.options.map((function(e){return Object(Ce.jsxs)("div",{className:"mb-2",children:[Object(Ce.jsx)("input",{type:"radio",value:e.value,name:t.fieldName,checked:n[t.fieldName]==e.value,className:"".concat(d&&o?"bg-red-600 text-red-600":"bg-gray-200 text-prussian-blue-500"," mr-2 border-transparent focus:border-gray-500 focus:text-prussian-blue-600 focus:ring-prussian-blue-600"),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}})," ",e.label]},e.value)}))}),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]},t.fieldName)},qe=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?Le(t.width):"w-full";return Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsxs)("select",{className:"w-full ".concat(d&&o?Be:Ve),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)},children:[Object(Ce.jsx)("option",{value:"",children:"Please chose one"}),t.options.map((function(e,t){return Object(Ce.jsx)("option",{value:e.value,children:e.label},t)}))]}),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})},We=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?t.width:"w-full";return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("textarea",{name:t.fieldName,className:"w-full ".concat(d&&o?Be:Ve),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}}),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})};function He(e){var t=[];return e.forEach((function(e){t.push(e.value)})),t}function Ke(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.options.find((function(t){return t.value===e}))}));if(r){var i=r.options.find((function(t){return t.value===e}));i&&n.push(i)}})),n):n}function ze(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.value===e}));r&&n.push(r)})),n):n}var Ge=n(32),Je=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=e.sectionId,c=Object(_e.b)((function(e){return e.formProject.project[N._sections]})),o=Object(Oe.useState)([]),s=Object(ke.a)(o,2),l=s[0],u=s[1],d=Object(Oe.useState)(!1),h=Object(ke.a)(d,2),f=h[0],p=h[1],b=Object(Oe.useRef)(Te()(t.fieldName)).current,j=Object(_e.b)((function(e){return e.formElesValidState})),m=Object.keys(j).some((function(e){return e.startsWith(b)&&!1===j[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:b})}}),[b]),Object(Oe.useEffect)((function(){var e=!0;return e&&function(){if(Array.isArray(c)){var e=[];c.forEach((function(t){t.id!==a&&e.push({value:t.id,label:t.title})})),u(e)}}(),function(){e=!1}}),[c,c.length,a]);return 0===l.length?null:Object(Ce.jsxs)(Ee,{width:"w-full",children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)(Ge.a,{defaultValue:ze(n[t.fieldName],l),isMulti:!0,name:t.fieldName,options:l,className:m&&f?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,He(e))},onBlur:function(){return p(!0)}}),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:b,touched:f})]})},Qe=n(19),Ye=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?t.width:"w-full";return Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("input",{name:t.fieldName,type:"date",placeholder:t.label,className:"w-full ".concat(d&&o?Be:Ve),value:Qe("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})},Xe=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)(!1),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(Oe.useRef)(Te()(t.fieldName)).current,u=Object(_e.b)((function(e){return e.formElesValidState})),d=Object.keys(u).some((function(e){return e.startsWith(l)&&!1===u[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:l})}}),[l]);var h=t.width?Le(t.width):"w-full";return Object(Ce.jsxs)(Ee,{width:h,children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)("input",{name:t.fieldName,type:"datetime-local",placeholder:t.label,className:"w-full ".concat(d&&o?Be:Ve),value:Qe("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return s(!0)}},t.fieldName),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:l,touched:o})]})},$e=function(e){var t=e.formEle,n=e.element,r=e.handleChange;return void 0!==n[t.fieldName]&&null!==n[t.fieldName]||(n[t.fieldName]=""),Object(Ce.jsx)("input",{name:t.fieldName,type:"hidden",value:n[t.fieldName],onChange:function(e){return r(t.fieldName,e.target.value)}},t.fieldName)},Ze="green",et="red",tt="bg-transparent hover:bg-".concat(Ze,"-500 text-").concat(Ze,"-700 font-semibold hover:text-white border border-").concat(Ze,"-500 hover:border-transparent rounded"),nt="bg-transparent hover:bg-".concat(et,"-500 text-").concat(et,"-700 font-semibold hover:text-white border border-").concat(et,"-500 hover:border-transparent rounded"),rt=n(24);var it=function(e){var t=e.formEle,n=e.element,r=e.handleOptionsChange,i=e.handleClickDeleteOption,a=e.indexSection,c=e.indexFormElement,o=e.index,s=e.optionElement,l=Object(_e.b)((function(e){return e.formProject.mode})),u=Object(_e.b)((function(e){return e.formProject.original[N._sections][a]})),d=Object(Oe.useMemo)((function(){!function(e,t,n){!(e&&e.formModel[t]&&e.formModel[t].options&&e.formModel[t].options.length)||e.formModel[t].options.some((function(e){return e.value===n}))}(u,c,s.value);return I[l].optionEles.newItem}),[u,c,s.value,l]);return Object(Ce.jsxs)("li",{children:[Object(Ce.jsx)(pt,{formModel:d,element:s,handleChange:r.bind(void 0,o,s)}),"function"===typeof i&&n[t.fieldName].length>2&&Object(Ce.jsxs)("div",{className:"inline-block w-full lg:w-1/12 px-2 lg:pl-1 lg:pr-3 lg:align-bottom mb-8",children:[Object(Ce.jsxs)("button",{onClick:i.bind(void 0,o),"data-tip":!0,"data-for":"deleteOption-".concat(o),className:"w-full py-1 ".concat(nt),children:[Object(Ce.jsx)("i",{className:"bi-trash hidden lg:block"}),Object(Ce.jsxs)("span",{className:"lg:hidden",children:["Delete option ",o+1]})]}),Object(Ce.jsx)(rt.a,{id:"deleteOption-".concat(o),effect:"solid",children:Object(Ce.jsxs)("span",{children:["Delete option ",o+1]})})]})]})},at=function(e){var t=e.formEle,n=e.element,r=e.handleOptionsChange,a=e.handleClickAddOption;return"function"!==typeof r?null:(n[t.fieldName]&&Array.isArray(n[t.fieldName])&&n[t.fieldName].length||(n[t.fieldName]=Array.from(Array(2),(function(e,t){return{label:"",value:t+1}}))),Object(Ce.jsxs)("div",{className:"mt-6 pl-10 py-4 bg-gray-50 rounded-lg",children:[Object(Ce.jsx)("p",{className:"-ml-5 font-semibold mb-1",children:"Choices"}),Object(Ce.jsx)("ol",{className:"list-decimal",children:n[t.fieldName].map((function(t,n){return Object(Ce.jsx)(it,Object(i.a)({index:n,optionElement:t},e),n)}))}),"function"===typeof a&&Object(Ce.jsx)("div",{className:"flex items-end",children:Object(Ce.jsx)("button",{className:"ml-auto mr-4 mt-3 py-2 px-3 ".concat(tt),onClick:a,children:"Add option"})})]}))};function ct(e){var t=void 0;return e.some((function(e,n){return!l[e.fieldName]&&(t=n,!0)})),t}function ot(e){var t=e.toLowerCase(),n={a:"[\xe0\xe1\xe2\xe3\xe4\xe5]",ae:"\xe6",c:"\xe7",e:"[\xe8\xe9\xea\xeb]",i:"[\xec\xed\xee\xef]",n:"\xf1",o:"[\xf2\xf3\xf4\xf5\xf6]",oe:"\u0153",u:"[\xf9\xfa\xfb\u0171\xfc]",y:"[\xfd\xff]"};for(var r in n)t=t.replace(new RegExp(n[r],"g"),r);return t.replace(/\s/g,"-").replace(/[^\w-]/gi,"")}function st(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(z.a)(K.a.mark((function e(t,n){var r,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.length,i=0;case 2:if(!(i<r)){e.next=8;break}return e.next=5,n(t[i],i,t);case 5:i++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=function(){function e(t,n){Object(F.a)(this,e),this.project=t,this.options=n,this.optionsGroups=[]}return Object(P.a)(e,[{key:"buildOptions",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(this.options,function(){var e=Object(z.a)(K.a.mark((function e(n){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[t.project[N._settings][0].id].callSelector(n.value).multiple();case 2:(r=e.sent).length&&t.createGroupOption(n.value,n.label,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.optionsGroups);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createGroupOption",value:function(e,t,n){var r=[],i=Ie(this.project[N._sections],e),a=ct(i.formModel);n.forEach((function(t){return r.push({value:"".concat(e,"|").concat(t.id),label:t[i.formModel[a].fieldName]})})),this.optionsGroups.push({label:t,options:r})}}]),e}(),dt=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(Oe.useState)([]),c=Object(ke.a)(a,2),o=c[0],s=c[1],l=Object(_e.b)((function(e){return e.project})),u=Object(Oe.useState)(!1),d=Object(ke.a)(u,2),h=d[0],f=d[1],p=Object(Oe.useRef)(Te()(t.fieldName)).current,b=Object(_e.b)((function(e){return e.formElesValidState})),j=Object.keys(b).some((function(e){return e.startsWith(p)&&!1===b[e]}));Object(Oe.useEffect)((function(){return function(){W.dispatch({type:r.unsetValidStateForEle,payload:p})}}),[p]),Object(Oe.useEffect)((function(){var e=!0;return e&&function(){var n=Object(z.a)(K.a.mark((function n(){var r;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new ut(l,t.options).buildOptions();case 2:r=n.sent,e&&s(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!1}}),[l,t.options]);return 0===o.length?null:Object(Ce.jsxs)(Ee,{width:"w-full",children:[Object(Ce.jsx)(De,{label:t.label}),Object(Ce.jsx)(Ge.a,{defaultValue:Ke(n[t.fieldName],o),isMulti:!0,name:t.fieldName,options:o,className:j&&h?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,He(e))},onBlur:function(){return f(!0)}}),Object(Ce.jsx)(Pe,{formEle:t,element:n,fieldId:p,touched:h})]})};var ht=function(){function e(t,n){Object(F.a)(this,e),this.formEle=t,this.objValues=n,this.isIntegrated=!1}return Object(P.a)(e,[{key:"integrates",value:function(){return!this.formEle.prerequisites||!this.formEle.prerequisites.length||(this.loopPrerequisites(),this.isIntegrated)}},{key:"loopPrerequisites",value:function(){for(var e=0;!1===this.isIntegrated&&e<this.formEle.prerequisites.length;)this.checkPrerequisites(this.formEle.prerequisites[e]),e++}},{key:"checkPrerequisites",value:function(e){var t=this,n=function(n){t.objValues[n]&&e[n].filter((function(e){return e==t.objValues[n]})).length>0&&t.setIsIntegrated()};for(var r in e)n(r)}},{key:"setIsIntegrated",value:function(){this.isIntegrated=!0}}]),e}(),ft=function(e){return Object(Oe.useMemo)((function(){return new ht(e.formEle,e.element).integrates()}),[e.formEle,e.element])?function(e,t,n){switch(t){case a.hiddenInput:return Object(Ce.jsx)($e,Object(i.a)({},n),e);case a.basicInput:return Object(Ce.jsx)(Ue,Object(i.a)({},n),e);case a.basicSelect:return Object(Ce.jsx)(qe,Object(i.a)({},n),e);case a.basicTextarea:return Object(Ce.jsx)(We,Object(i.a)({},n),e);case a.basicCheckbox:return Object(Ce.jsx)(Ae,Object(i.a)({},n),e);case a.basicRadio:return Object(Ce.jsx)(Re,Object(i.a)({},n),e);case a.datePicker:return Object(Ce.jsx)(Ye,Object(i.a)({},n),e);case a.dateTimePicker:return Object(Ce.jsx)(Xe,Object(i.a)({},n),e);case a.optionsMaker:return Object(Ce.jsx)(at,Object(i.a)({},n),e);case a.childOfSelectorForSection:return Object(Ce.jsx)(Je,Object(i.a)({},n),e);case a.parentsSelector:return Object(Ce.jsx)(dt,Object(i.a)({},n),e);default:return Object(Ce.jsx)(Ue,Object(i.a)({},n),e)}}(e.formEle.fieldName,e.formEle.componentCode,e):null},pt=function(e){return Object(Ce.jsx)("span",{children:e.formModel.map((function(t){return Object(Ce.jsx)(ft,Object(i.a)({formEle:t},e),t.fieldName)}))})},bt=function(e){var t=e.sectionId,n=Object(_e.b)((function(e){return e.project}))[N._sections],a=Ie(n,t),c=Object(_e.b)((function(e){return e.formElement.element})),s=function(e,t){W.dispatch({type:r.updateFormElement,payload:Object(i.a)(Object(i.a)({},c),{},Object(o.a)({},e,t))})};return Object(Ce.jsxs)("form",{name:"element-form",children:[a.childOf&&a.childOf.length>0&&Object(Ce.jsx)(pt,{formModel:[new Ne(a.childOf,n).build()],element:c,handleChange:s}),Object(Ce.jsx)(pt,{formModel:a.formModel,element:c,handleChange:s})]})},jt=function(){function e(t,n,r,i){Object(F.a)(this,e),this.projectId=t,this.sectionId=n,this.element=r,this.mode=i,this.sectionModelInDS=void 0}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setSectionModel(),this.checkAndSetPk(),this.setDateCreation(),this.deleteEmptyProps(),this.mode!==se.add){e.next=9;break}return e.next=7,Z[this.projectId].callInsertor(this.sectionId,this.element).autoInsert();case 7:e.next=12;break;case 9:return this.setLastModifiedValueIfInEditMode(),e.next=12,Z[this.projectId].callUpdator(this.sectionId,this.element).autoUpdate();case 12:return e.abrupt("return",this.element);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSectionModel",value:function(){this.sectionModelInDS=Z[this.projectId].DS[this.sectionId]}},{key:"checkAndSetPk",value:function(){this.element[this.sectionModelInDS.pk]||(this.element[this.sectionModelInDS.pk]=T.make(this.sectionModelInDS.name))}},{key:"deleteEmptyProps",value:function(){for(var e in this.element)""===this.element[e]&&delete this.element[e]}},{key:"setDateCreation",value:function(){this.sectionModelInDS.fields.includes(l.dateCreation)&&!this.element[l.dateCreation]&&(this.element[l.dateCreation]=new Date((new Date).toUTCString()).toISOString())}},{key:"setLastModifiedValueIfInEditMode",value:function(){this.sectionModelInDS.fields.includes(l.lastModified)&&(this.element[l.lastModified]=new Date((new Date).toUTCString()).toISOString())}}]),e}(),mt=n(11),vt=function(e){var t=e.sectionId,n=Object(_e.b)((function(e){return e.project})),r=Object(_e.b)((function(e){return e.formElement.element})),i=Object(_e.b)((function(e){return e.formElesValidState})),a=Object(mt.g)(),c=function(){var e=Object(z.a)(K.a.mark((function e(){var i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.id?se.edit:se.add,e.next=3,new jt(n[N._settings][0].id,t,r,i).save();case 3:a(-1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ce.jsxs)("div",{className:"mt-6 mb-3 px-2 flex justify-end",children:[Object(Ce.jsx)("button",{className:"py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return a(-1)},children:"Cancel"}),Object(Ce.jsx)("button",{disabled:Object.keys(i).some((function(e){return!1===i[e]})),className:"py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500",onClick:c,children:"Save"})]})},xt=function(e){var t=e.children,n=e.headerText;return Object(Ce.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[n?Object(Ce.jsxs)("div",{className:"mt-3",children:[Object(Ce.jsx)("h3",{className:"text-xl font-bold",children:n}),Object(Ce.jsx)("hr",{className:"mt-4"})]}):null,Object(Ce.jsx)("div",{className:"pt-4",children:t})]})},Ot=function(){return Object(Ce.jsxs)("svg",{className:"absolute top-1/2 left-2/4 animate-spin -ml-1 mr-3 h-5 w-5 text-prussian-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(Ce.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(Ce.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},yt=function(){var e=Object(mt.h)(),t=e[le.elementId]?se.edit:se.add,n=e[le.projectId],i=e[le.sectionId],a=t===se.edit?e[le.elementId]:null,c=Object(Oe.useState)(null),o=Object(ke.a)(c,2),s=o[0],l=o[1];if(Object(Oe.useEffect)((function(){var e=!0;return Se(n)&&n&&i?t===se.add?l({}):(e&&function(){var t=Object(z.a)(K.a.mark((function t(){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z[n].callSelector(i,{id:a}).single();case 2:r=t.sent,e&&l(r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}):l(void 0)}),[t,n,i,a]),void 0===s)return Object(Ce.jsx)(mt.a,{to:we.projectsList});var u=t===se.add?"Add Element":"Edit Element";return W.dispatch({type:r.updateFormElement,payload:s}),Object(Ce.jsxs)(xt,{headerText:u,children:[null===s&&Object(Ce.jsx)(Ot,{}),null!==s&&Object(Ce.jsx)(bt,{sectionId:i}),null!==s&&Object(Ce.jsx)(vt,{sectionId:i})]})},gt=function(){function e(){Object(F.a)(this,e),this.projectList=[]}return Object(P.a)(e,[{key:"load",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromLocalDB();case 2:this.dispatchProjectList(this.projectList);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromLocalDB",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callSelector(Y.projects).multiple();case 2:this.projectList=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProjectList",value:function(e){W.dispatch({type:r.setProjectList,payload:e})}}]),e}(),wt=function(){function e(t){Object(F.a)(this,e),this.project=t}return Object(P.a)(e,[{key:"delete",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doDelete();case 2:this.reloadProjectList();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callDeletor(Y.projects,{id:this.project.id}).autoDelete();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadProjectList",value:function(){(new gt).load()}}]),e}(),kt=function(e){var t=e.project,n=Object(Oe.useState)(!1),r=Object(ke.a)(n,2),i=r[0],a=r[1];return Object(Ce.jsxs)("span",{children:[Object(Ce.jsxs)("button",{onClick:function(){return a(!0)},className:"px-4 py-2 text-red-700 inline-flex items-center md:mb-2 lg:mb-0 rounded bg-red-700 bg-opacity-10 hover:bg-opacity-20 text-sm",children:[Object(Ce.jsx)("i",{className:"bi-trash"}),Object(Ce.jsx)("span",{className:"ml-2 hidden lg:inline-block",children:"Delete project"})]}),i&&Object(Ce.jsx)(St,{project:t,closeFn:function(){return a(!1)}})]})},St=function(e){var t=e.project,n=e.closeFn;return Object(Ce.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(Ce.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(Ce.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(Ce.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(Ce.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(Ce.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(Ce.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(Ce.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Object(Ce.jsx)("i",{className:" text-red-600 bi-exclamation-triangle text-xl -mt-1"})}),Object(Ce.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(Ce.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Delete Project"}),Object(Ce.jsx)("div",{className:"mt-2",children:Object(Ce.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete this project?",Object(Ce.jsx)("br",{}),Object(Ce.jsx)("br",{}),"All project data will be permanently removed from this device. This action cannot be undone.",Object(Ce.jsx)("br",{}),Object(Ce.jsx)("br",{}),"Data stored on other devices will not be affected."]})})]})]})}),Object(Ce.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(Ce.jsx)("button",{onClick:function(){return new wt(t).delete()},type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),Object(Ce.jsx)("button",{onClick:n,type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})};function Nt(e,t){var n=e;return t.forEach((function(e){n=n.replace(new RegExp(":".concat(e.name),"g"),e.value)})),n}var It=n(16),Ct=function(e){var t=e.project;return Object(Ce.jsxs)(It.b,{to:Nt(we.projectEdit,[{name:le.projectId,value:t.id}]),className:"px-4 py-3 text-gray-800 mr-3 inline-flex items-center ml-auto leading-none text-sm bg-gray-100 hover:bg-gray-200 rounded",children:[Object(Ce.jsx)("i",{className:"bi-pencil"})," ",Object(Ce.jsx)("span",{className:"ml-2 hidden sm:inline-block",children:"Edit Project"})]})},Et=function(e){var t=e.children;return Object(Ce.jsx)("div",{className:"flex items-end flex-wrap mt-6",children:t})},Dt=function(e){var t=e.project;return Object(Ce.jsxs)("div",{className:"p-6",children:[Object(Ce.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(Ce.jsx)("p",{className:"text-gray-600 text-xs",children:"Description"}),Object(Ce.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(Ce.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(Ce.jsx)("p",{className:"text-md",children:Qe("yyyy/MM/dd, at hh:mm",new Date(t.dateCreation))}),Object(Ce.jsxs)(Et,{children:[Object(Ce.jsx)(kt,{project:t}),Object(Ce.jsx)(Ct,{project:t})]})]})},Ft=function(){var e=Object(mt.h)()[le.projectId],t=Object(Oe.useState)(null),n=Object(ke.a)(t,2),r=n[0],i=n[1];return Object(Oe.useEffect)((function(){var t=!0;return t&&function(){var n=Object(z.a)(K.a.mark((function n(){var r;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Se(e)){n.next=2;break}return n.abrupt("return",i(void 0));case 2:return n.next=4,Z[e].callSelector(N._settings).single();case 4:r=n.sent,t&&i(r);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){t=!1}}),[e]),void 0===r?Object(Ce.jsx)(mt.a,{to:we.projectsList}):Object(Ce.jsx)("div",{className:"relative border-2 border-gray-200 border-opacity-60 rounded bg-white",style:{minHeight:"200px"},children:null===r?Object(Ce.jsx)(Ot,{}):Object(Ce.jsx)(Dt,{project:r})})},Pt=function(){function e(t,n,r){Object(F.a)(this,e),this.listOfParents=t,this.projectId=n,this.sections=r,this.parentInfoForDetailsView=[]}return Object(P.a)(e,[{key:"get",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(this.listOfParents,function(){var e=Object(z.a)(K.a.mark((function e(n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processElement(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.parentInfoForDetailsView);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processElement",value:function(){var e=Object(z.a)(K.a.mark((function e(t){var n,r,i,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("|"),e.next=3,Z[this.projectId].callSelector(n[0],Object(o.a)({},l.id,n[1])).single();case 3:r=e.sent,i=Ie(this.sections,n[0]),a=ct(i.formModel),this.parentInfoForDetailsView.push({sectionId:n[0],element:r,txt:r[i.formModel[a].fieldName]});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Mt=function(e){var t=e.projectId,n=e.parentsInfo,r=e.sections,i=Object(Oe.useState)([]),a=Object(ke.a)(i,2),c=a[0],o=a[1];return Object(Oe.useEffect)((function(){var e=!0;return e&&function(){var i=Object(z.a)(K.a.mark((function i(){var a;return K.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,new Pt(n,t,r).get();case 2:a=i.sent,e&&o(a);case 4:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!1}}),[n,t,r]),Object(Ce.jsxs)("div",{className:"p-3 pt-0",children:[Object(Ce.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Parent elements:"}),c.map((function(e,n){return Object(Ce.jsx)(It.b,{to:Nt(we.projectSectionEleDetails,[{name:le.projectId,value:t},{name:le.sectionId,value:e.sectionId},{name:le.elementId,value:e.element.id}]),className:"mr-2 py-1 px-4 bg-gray-200 hover:bg-gray-300 bg-opacity-80 rounded-md text-sm font-semibold",children:e.txt},e.element.id)}))]})},Tt=function(e){return e.value||null},_t=function(e){return e.value?"\u2713":null},At=function(e){var t=e.value;return t?Qe("yyyy/MM/dd hh:mm",new Date(t)):null},Lt=function(e){var t=e.value;return t?Qe("yyyy/MM/dd",new Date(t)):null};var Vt=function(e,t){return function(e,t){var n=e.find((function(e){return e.value==t}));return"undefined"===typeof n?null:n.label}(e,t.value)},Bt=function(e){switch(e.componentCode){case a.basicInput:case a.basicTextarea:return Tt;case a.basicSelect:case a.basicRadio:return Vt.bind(null,e.options);case a.basicCheckbox:return _t;case a.datePicker:return Lt;case a.dateTimePicker:return At;default:return Tt}},Ut=function(e){var t=e.projectId,n=e.sectionId,r=e.mode,i=e.elementId,a=r===se.add?"bi-plus":"bi-pencil",c=[{name:le.projectId,value:t},{name:le.sectionId,value:n}];r===se.edit&&c.push({name:le.elementId,value:i});var o=Nt(r===se.add?we.projectSectionAddEle:we.projectSectionEditEle,c);return Object(Ce.jsx)(It.b,{to:o,className:"absolute bottom-5 right-7 md:bottom-7 md:right-10 bg-prussian-blue-400 text-white text-xl shadow-xl rounded-3xl h-14 w-14 flex items-center justify-center",children:Object(Ce.jsx)("i",{className:a})})},Rt=function(){var e=Object(Oe.useState)(null),t=Object(ke.a)(e,2),n=t[0],r=t[1],i=Object(_e.b)((function(e){return e.project})),a=Object(mt.h)(),c=a[le.projectId],o=a[le.sectionId],s=a[le.elementId];return Object(Oe.useEffect)((function(){var e=!0;return e&&function(){var t=Object(z.a)(K.a.mark((function t(){var n;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Se(c)&&c&&o&&s&&i&&i[N._settings][0].id===c){t.next=2;break}return t.abrupt("return",r(void 0));case 2:return t.next=4,Z[c].callSelector(o,{id:s}).single();case 4:n=t.sent,e&&r(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[c,o,s,i]),void 0===n?c&&o?Object(Ce.jsx)(mt.a,{to:Nt(we.projectSectionElesList,[{name:le.projectId,value:c},{name:le.sectionId,value:o}])}):Object(Ce.jsx)(mt.a,{to:we.projectsList}):Object(Ce.jsxs)(xt,{headerText:"Details",children:[null===n?Object(Ce.jsx)(Ot,{}):Object(Ce.jsx)(qt,{element:n,formModels:Ie(i[N._sections],o).formModel}),null!==n&&n.parentsInfo&&Array.isArray(n.parentsInfo)&&n.parentsInfo.length>0&&Object(Ce.jsx)(Mt,{projectId:c,parentsInfo:n.parentsInfo,sections:i[N._sections]}),null!==n&&Object(Ce.jsx)(Ut,{projectId:c,sectionId:o,elementId:s,mode:se.edit})]})},qt=function(e){var t=e.element,n=e.formModels;return Object(Ce.jsx)("div",{className:"p-3",children:n.map((function(e){return e.label?Object(Ce.jsx)(Wt,{formModel:e,value:t[e.fieldName]},e.fieldName):null}))})},Wt=function(e){var t=e.formModel,n=e.value;return"undefined"===typeof n?null:Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("p",{className:"text-sm text-gray-500",children:t.label}),Object(Ce.jsx)("p",{className:"mb-3",children:Bt(t)({value:n})})]})},Ht=function(e){var t=e.children,n=e.tdProps,r=e.elementId,a=Object(mt.g)(),c=Object(mt.h)();return Object(Ce.jsx)("td",Object(i.a)(Object(i.a)({onClick:function(){return a(Nt(we.projectSectionEleDetails,[{name:le.projectId,value:c.projectId},{name:le.sectionId,value:c.sectionId},{name:le.elementId,value:r}]))},className:"px-6 py-4 cursor-pointer"},n),{},{children:t}))},Kt=n(36),zt=function(e){var t=e.sectionInfo,n=e.sectionData,r=function(e){var t=Object(Oe.useMemo)((function(){return[]}),[e.id,e.formModel]);return Object(Oe.useMemo)((function(){return e.formModel.forEach((function(n){e.id&&n.label&&t.push({Header:n.label,accessor:n.fieldName,Cell:Bt(n)})}))}),[e.id,e.formModel,t]),t}(t),a=Object(Kt.useTable)({columns:r,data:n},Kt.useSortBy),c=a.getTableProps,o=a.getTableBodyProps,s=a.headerGroups,l=a.rows,u=a.prepareRow;return Object(Ce.jsxs)("table",Object(i.a)(Object(i.a)({className:"table-auto w-full divide-y divide-gray-200"},c()),{},{children:[Object(Ce.jsx)("thead",{className:"bg-gray-50",children:s.map((function(e){return Object(Ce.jsx)("tr",Object(i.a)(Object(i.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(Ce.jsx)("th",Object(i.a)(Object(i.a)({className:"px-6 py-2 text-xs text-gray-500 text-left"},e.getHeaderProps(e.getSortByToggleProps())),{},{children:e.render("Header")}))}))}))}))}),Object(Ce.jsx)("tbody",Object(i.a)(Object(i.a)({className:"divide-y divide-gray-200"},o()),{},{children:l.map((function(e){return u(e),Object(Ce.jsx)("tr",Object(i.a)(Object(i.a)({className:"whitespace-nowrap"},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(Ce.jsx)(Ht,{tdProps:e.getCellProps(),elementId:e.row.original.id,children:e.render("Cell")},"".concat(e.column.id).concat(e.row.id))}))}))}))}))]}))},Gt=function(e){var t=e.sectionTitle,n=e.sectionId,r=e.projectId;return Object(Ce.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(Ce.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(Ce.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(Ce.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"Nothing here yet"}),Object(Ce.jsxs)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:["There are no items in ",t]}),Object(Ce.jsx)("p",{className:"leading-relaxed mb-3",children:"Create a new entry to populate this list"}),Object(Ce.jsx)("div",{className:"flex flex-wrap mt-7",children:Object(Ce.jsx)(It.b,{to:Nt(we.projectSectionAddEle,[{name:le.projectId,value:r},{name:le.sectionId,value:n}]),className:"flex-grow mx-2 mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Create a new element"})})]})})})},Jt=function(){var e=Object(mt.h)(),t=e[le.projectId],n=e[le.sectionId],r=Object(_e.b)((function(e){return e.project})),i=Object(Oe.useState)(null),a=Object(ke.a)(i,2),c=a[0],o=a[1];if(Object(Oe.useEffect)((function(){var e=!0;return e&&function(){var r=Object(z.a)(K.a.mark((function r(){var i;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(Se(t)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Z[t].callSelector(n).multiple();case 4:i=r.sent,e&&o(i);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){e=!1}}),[n,t]),null===r)return Object(Ce.jsx)(mt.a,{to:we.projectsList});var s=Ie(r[N._sections],n);return null===c?Object(Ce.jsx)("div",{children:"Loading..."}):0===c.length?Object(Ce.jsx)(Gt,{sectionId:n,sectionTitle:s.title,projectId:t}):Object(Ce.jsxs)(xt,{headerText:s.title,children:[Object(Ce.jsx)(zt,{sectionInfo:s,sectionData:c}),Object(Ce.jsx)(Ut,{projectId:t,sectionId:n,mode:se.add})]})},Qt=function(){function e(t,n){Object(F.a)(this,e),this.projectSettings=t,this.sectionsDefinitions=n}return Object(P.a)(e,[{key:"set",value:function(){var e;W.dispatch({type:r.setCurrentProject,payload:(e={},Object(o.a)(e,N._settings,this.projectSettings.concat()),Object(o.a)(e,N._sections,this.sectionsDefinitions.concat()),e)})}}]),e}(),Yt=function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(P.a)(e,[{key:"autoDelete",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.args).length){e.next=2;break}return e.abrupt("return","Fatal error: trying to delete without any parameter");case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xt=n(6),$t=n(7),Zt="286b88f2ceb76ce1e7d28117bb2a7659";function en(e,t){return M.a.AES.encrypt(e,t).toString()}function tn(e,t){return M.a.AES.decrypt(e,t).toString()}var nn=function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.owner=void 0,this.undecryptedKey=void 0,this.keyIdentifier=void 0}return Object(P.a)(e,[{key:"getUserKey",value:function(){if(this.setOwner(),this.setUndecryptedKey(),this.undecryptedKey)return this.makeKeyIdentifier(),e.userKeys[this.keyIdentifier]||this.decryptUserKey(),this.returnUserUnencryptedKey()}},{key:"logNoKeyError",value:function(){oe.error("ERROR: skipping encryption as no key was found for user ".concat(this.owner,". Did you forget to pass the user key in the options when initializing DbInit?"))}},{key:"setOwner",value:function(){this.owner=this.element[this.dbConnector.DS[this.section].ownerIdentifier]}},{key:"setUndecryptedKey",value:function(){this.undecryptedKey="object"===typeof this.dbConnector.options.encryptionKeys&&this.dbConnector.options.encryptionKeys[this.owner]?this.dbConnector.options.encryptionKeys[this.owner]:void 0}},{key:"makeKeyIdentifier",value:function(){this.keyIdentifier="".concat(this.owner).concat(this.undecryptedKey)}},{key:"decryptUserKey",value:function(){e.userKeys[this.keyIdentifier]=tn(this.undecryptedKey,Zt)}},{key:"returnUserUnencryptedKey",value:function(){return e.userKeys[this.keyIdentifier]}}],[{key:"decryptUserKey",value:function(e){return en(e,Zt)}}]),e}();nn.userKeys={};var rn=function(e){Object(Xt.a)(n,e);var t=Object($t.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"do",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(l).includes(n)||this.encrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){this.element[t]&&(this.element[t]=en(this.element[t],e))}}]),n}(nn);function an(e){return cn.apply(this,arguments)}function cn(){return(cn=Object(z.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFile();case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={types:[{name:e,description:"Anita project data file",accept:{"application/json":[".json"]}}]};return window.showSaveFilePicker(t)}function sn(){return(sn=Object(z.a)(K.a.mark((function e(t,n){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createWritable();case 2:return r=e.sent,e.next=5,r.write(n);case 5:return e.next=7,r.close();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ln(e,t){return un.apply(this,arguments)}function un(){return(un=Object(z.a)(K.a.mark((function e(t,n){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n&&(r.writable=!0,r.mode="readwrite"),e.next=4,t.queryPermission(r);case 4:if(e.t0=e.sent,"granted"!==e.t0){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.requestPermission(r);case 9:if(e.t1=e.sent,"granted"!==e.t1){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dn=function(){function e(t,n){Object(F.a)(this,e),this.projectSettings=t,this.fileHandle=n,this.copyOfProjectSettings=void 0}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setProjectSettingsClone(),this.setFileHandleOnProjectSettingsClone(),this.doStoreProjectSettings(),e.abrupt("return",this.copyOfProjectSettings);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectSettingsClone",value:function(){this.copyOfProjectSettings=A()(this.projectSettings)}},{key:"setFileHandleOnProjectSettingsClone",value:function(){this.copyOfProjectSettings.fileHandle=this.fileHandle}},{key:"doStoreProjectSettings",value:function(){Z.system.callInsertor(Y.projects,this.copyOfProjectSettings).autoInsert()}}]),e}(),hn=function(){function e(t){Object(F.a)(this,e),this.dbConnector=t,this.data=void 0}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setData(),this.saveDataToDisk(),e.next=4,new dn(this.dbConnector.dbStore.db[N._settings][0],this.dbConnector.options.projectInfo.fileHandle).save();case 4:return e.next=6,new Qt(this.dbConnector.dbStore.db[N._settings],this.dbConnector.dbStore.db[N._sections]).set();case 6:return e.next=8,(new gt).load();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){this.data=JSON.stringify(this.dbConnector.dbStore.db)}},{key:"saveDataToDisk",value:function(){!function(e,t){sn.apply(this,arguments)}(this.dbConnector.options.projectInfo.fileHandle,this.data)}}]),e}(),fn=function(){function e(t,n,r){Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.index=void 0}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setSectionStore(),this.checkIfElementInStoreAndSetIndex(),this.addToStore(),e.next=5,new hn(this.dbConnector).save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkIfElementInStoreAndSetIndex",value:function(){var e=this,t=this.dbConnector.dbStore.db[this.section],n=t.findIndex((function(t){return e.element[e.dbConnector.DS[e.section].pk]===t[e.dbConnector.DS[e.section].pk]}));this.index=n>=0?n:t.length}},{key:"setSectionStore",value:function(){this.dbConnector.dbStore.db[this.section]||(this.dbConnector.dbStore.db[this.section]=[])}},{key:"addToStore",value:function(){this.dbConnector.dbStore.db[this.section][this.index]=this.element}}]),e}(),pn=function(e){Object(Xt.a)(n,e);var t=Object($t.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"autoInsert",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new rn(this.dbConnector,this.section,this.element).do();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fn),bn=function(e){Object(Xt.a)(n,e);var t=Object($t.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"do",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(l).includes(n)||this.decrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(e,t){this.element[t]&&(this.element[t]=tn(this.element[t],e))}}]),n}(nn),jn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(F.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.results=void 0}return Object(P.a)(e,[{key:"single",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:if(this.results.length){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this.results.find((function(e){return t.filterKeys(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterKeys",value:function(e){for(var t=Object.keys(this.args),n=!0,r=0;n&&r<t.length;)n=e[t[r]]===this.args[t[r]],r++;return n}},{key:"multiple",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:return e.abrupt("return",this.results);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.multiple();case 2:return e.abrupt("return",this.results.length);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doSelect",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.results=this.dbConnector.dbStore.db[this.section]&&this.dbConnector.dbStore.db[this.section].length?this.dbConnector.dbStore.db[this.section]:[],e.next=3,this.handleDecryption();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDecryption",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted||!this.results.length){e.next=8;break}t=0;case 2:if(!(t<this.results.length)){e.next=8;break}return e.next=5,new bn(this.dbConnector,this.section,this.results[t]).do();case 5:t++,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mn=function(){function e(t){Object(F.a)(this,e),this.sections=t,this.allSez=[],this.datastructure={}}return Object(P.a)(e,[{key:"extend",value:function(){var e=this;return this.sections.forEach((function(t){return e.buildSectionDefinition(t)})),this.allSez.forEach((function(t){return e.buildAndAddAllSections(t)})),this.datastructure}},{key:"buildSectionDefinition",value:function(e){var t={name:e.id,fields:Object.values(l)};e.formModel.forEach((function(e){t.fields.push(e.fieldName)})),this.allSez.push(t)}},{key:"buildAndAddAllSections",value:function(e){var t=new ue(this.allSez,e.name,e.fields).make();this.addToTempTs(t)}},{key:"addToTempTs",value:function(e){this.datastructure[e.name]=e}}]),e}();function vn(e){return xn.apply(this,arguments)}function xn(){return(xn=Object(z.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.projectInfo.fileHandle){e.next=4;break}return e.next=3,on("anita-fh-".concat(t.projectInfo.id));case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,ln(t.projectInfo.fileHandle,!0);case 6:return e.abrupt("return",t.projectInfo.fileHandle);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var On=function(){function e(t,n){var r;Object(F.a)(this,e),this.dbConnector=t,this.options=n,this.db=(r={},Object(o.a)(r,N._settings,[]),Object(o.a)(r,N._sections,[]),r),this.contents=void 0}return Object(P.a)(e,[{key:"initDB",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.projectInfo){e.next=2;break}throw new Error("No projectInfo passed to DbConnector.\nTo retrieve a project from a local file, pass the an Object of type LocalProjectSettings as value of projectInfo to the options of DbConnector");case 2:return e.next=4,vn(this.options);case 4:if(t=e.sent,!this.options.projectInfo.fileHandle){e.next=10;break}return e.next=8,this.initializeExistingProject();case 8:e.next=11;break;case 10:this.options.projectInfo.fileHandle=t;case 11:return e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){}},{key:"initializeExistingProject",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doReadFile();case 2:this.parseFileContents(),this.makedDS();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doReadFile",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(this.options.projectInfo.fileHandle);case 2:this.contents=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.db=JSON.parse(this.contents)}},{key:"makedDS",value:function(){this.dbConnector.DS=Object.assign(this.dbConnector.DS,new mn(this.db[N._sections]).extend())}}]),e}(),yn={insertor:pn,selector:jn,updator:function(e){Object(Xt.a)(n,e);var t=Object($t.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"autoUpdate",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new rn(this.dbConnector,this.section,this.element).do();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fn),deletor:Yt,dbStore:On},gn=function(){function e(t,n){var r;Object(F.a)(this,e),this.project=t,this.mode=n,this.projectDataToSave=(r={},Object(o.a)(r,N._settings,[]),Object(o.a)(r,N._sections,[]),r)}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projectDataToSave[N._settings]=this.project[N._settings].concat(),this.projectDataToSave[N._sections]=this.project[N._sections].concat(),this.setDateCreation(),this.mode===se.edit&&this.setLastModified(),Z[this.projectDataToSave[N._settings][0].id]){e.next=7;break}return e.next=7,this.initDbInstance();case 7:return e.next=9,this.saveSettings();case 9:return e.next=11,this.saveSections();case 11:return this.fileHandleOnlyActions(),e.abrupt("return",this.projectDataToSave);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDateCreation",value:function(){this.projectDataToSave[N._settings][0].dateCreation=new Date((new Date).toUTCString()).toISOString()}},{key:"setLastModified",value:function(){this.projectDataToSave[N._settings][0].lastModified=new Date((new Date).toUTCString()).toISOString()}},{key:"initDbInstance",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new he(yn,{projectInfo:this.projectDataToSave[N._settings][0]}).init();case 2:Z[this.projectDataToSave[N._settings][0].id]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSettings",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[this.projectDataToSave[N._settings][0].id].callInsertor(N._settings,this.projectDataToSave[N._settings][0]).autoInsert();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSections",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(this.projectDataToSave[N._sections],function(){var e=Object(z.a)(K.a.mark((function e(n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[t.projectDataToSave[N._settings][0].id].callInsertor(N._sections,n).autoInsert();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fileHandleOnlyActions",value:function(){if(this.mode===se.add)return Z[this.projectDataToSave[N._settings][0].id].dbStore.initializeExistingProject()}}]),e}(),wn=function(e){var t=e.indexSection,n=e.indexFormElement,a=e.element,c=Object(mt.h)(),s=Object(_e.b)((function(e){return e.formProject.mode})),l=Object(_e.b)((function(e){return e.formProject.original[N._sections][t]})),u=c[le.projectId],d=Object(Oe.useMemo)((function(){return u?se.edit:se.add}),[u]),h=function(e,t){return!(!t||!e)&&e.formModel.some((function(e){return e.fieldName===t}))}(l,a.fieldName),f=Object(Oe.useMemo)((function(){return d===se.edit&&h?I[s].sectionEles.existingItem:I[s].sectionEles.newItem}),[h,d,s]);return Object(Ce.jsx)(pt,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{formModel:f,handleChange:function(e,t,n,c){var s="label"!==n||h?{}:{fieldName:"string"===typeof c?ot(c):c};W.dispatch({type:r.updateFormProjectUpdateFormModelOfSection,payload:{indexSection:e,indexFormElement:t,formElement:Object(i.a)(Object(i.a)(Object(i.a)({},a),s),{},Object(o.a)({},n,c))}})}.bind(void 0,t,n),handleOptionsChange:function(e,t,n,a,c,s){W.dispatch({type:r.updateFormProjectUpdateFormModelOptionValue,payload:{indexSection:e,indexFormElement:t,indexOptions:n,formElement:Object(i.a)(Object(i.a)({},a),{},Object(o.a)({},c,s))}})}.bind(void 0,t,n),handleClickAddOption:function(e,t){W.dispatch({type:r.updateFormProjectUpdateFormModelAddOption,payload:{indexSection:e,indexFormElement:t}})}.bind(void 0,t,n),handleClickDeleteOption:function(e,t,n){W.dispatch({type:r.updateFormProjectUpdateFormModelDeleteOption,payload:{indexSection:e,indexFormElement:t,indexOptions:n}})}.bind(void 0,t,n)})))},kn=function(e){var t=e.section,n=e.sectionIndex,a=Object(_e.b)((function(e){return e.formProject.mode})),c=Object(_e.b)((function(e){return e.formProject.project[N._sections]})),s=t.formModel.map((function(e){return Object.values(l).includes(e.fieldName)?null:e.fieldName})).filter((function(e){return null!==e})),u=function(e){W.dispatch({type:r.updateFormProjectRemoveFieldFromSection,payload:{sectionIndex:n,fieldIndex:e}})};return Object(Ce.jsxs)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:[Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{className:"text-md font-bold",children:"Section # ".concat(n+1)}),Object(Ce.jsx)("hr",{className:"mt-4"})]}),Object(Ce.jsx)("div",{className:"pt-4",children:Object(Ce.jsx)(pt,{formModel:I[a].sectionInfo,element:t,handleChange:function(e,n,a){W.dispatch({type:r.updateFormProjectUpdateSection,payload:{section:Object(i.a)(Object(i.a)({},t),{},Object(o.a)({},n,a)),index:e}})}.bind(void 0,n),sectionId:t.id})}),Object(Ce.jsx)("h4",{className:"pl-2 font-bold mb-2 mt-6",children:"Section element fields"}),t.formModel.map((function(e,r){return s.includes(e.fieldName)?Object(Ce.jsxs)("div",{className:"border border-transparent hover:border-prussian-blue-500 shadow rounded mb-3 p-4",children:[Object(Ce.jsx)(wn,{indexFormElement:r,indexSection:n,element:e}),s.length<2?null:Object(Ce.jsx)("div",{className:"flex justify-end",children:Object(Ce.jsx)("button",{onClick:u.bind(void 0,r),className:"text-sm py-1 px-3 ".concat(nt),children:"Delete field"})})]},"".concat(t.id,"-").concat(r)):null})),Object(Ce.jsxs)("div",{className:"flex items-end mt-10 mb-1",children:[c.length>1&&Object(Ce.jsx)("button",{onClick:function(){W.dispatch({type:r.updateFormProjectRemoveSection,payload:n})},className:"py-2 px-4 text-sm ".concat(nt),children:"Delete section"}),Object(Ce.jsx)("button",{onClick:function(){W.dispatch({type:r.updateFormProjectAddFieldToSection,payload:n})},className:"ml-auto py-2 px-4 text-sm ".concat(tt),children:"Add field"})]})]})},Sn=function(){var e=Object(mt.h)().projectId,t=Object(_e.b)((function(e){return e.formProject.mode})),n=Object(_e.b)((function(e){return e.formProject.project})),a=Object(_e.b)((function(e){return e.formElesValidState})),c=Object(mt.g)();return Object(Ce.jsxs)("span",{children:[Object(Ce.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(Ce.jsx)(pt,{formModel:I[t].projectInfo,element:n[N._settings][0],handleChange:function(e,t){W.dispatch({type:r.updateFormProjectSettings,payload:Object(i.a)(Object(i.a)({},n[N._settings][0]),{},Object(o.a)({},e,t))})}})}),Object(Ce.jsx)("div",{className:"px-3",children:n[N._sections].map((function(e,t){return Object(Ce.jsx)(kn,{section:e,sectionIndex:t},e.id)}))}),Object(Ce.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(Ce.jsxs)("div",{className:"flex items-end flex-wrap",children:[Object(Ce.jsx)("button",{className:"py-2 px-6 mr-3 ".concat(tt),onClick:function(){W.dispatch({type:r.updateFormProjectAddSection})},children:"Add section"}),Object(Ce.jsx)("button",{className:"ml-auto py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return c(-1)},children:"Cancel"}),Object(Ce.jsx)("button",{disabled:Object.keys(a).some((function(e){return!1===a[e]})),className:"py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500 disabled:bg-gray-400 disabled:bg-opacity-40 disabled:cursor-not-allowed",onClick:function(){var t=e?se.edit:se.add;new gn(n,t).save(),new Qt(n[N._settings],n[N._sections]).set(),c(Nt(we.projectDetails,[{name:le.projectId,value:n[N._settings][0].id}]))},children:"Save"})]})})]})},Nn=(n(81),function(){return Object(Ce.jsx)("div",{className:"ml-auto",children:Object(Ce.jsxs)("label",{htmlFor:"project-editor-mode-toggle",className:"flex items-center cursor-pointer",children:[Object(Ce.jsx)("div",{className:"mr-3 text-gray-700 font-medium",children:"Advanced mode"}),Object(Ce.jsxs)("div",{className:"relative",children:[Object(Ce.jsx)("input",{type:"checkbox",id:"project-editor-mode-toggle",className:"sr-only",onChange:function(){W.dispatch({type:r.setProjectEditorMode})}}),Object(Ce.jsx)("div",{className:"block bg-gray-600 w-14 h-8 rounded-full"}),Object(Ce.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition"})]})]})})}),In=function(){var e=Object(mt.h)(),t=e[le.projectId]?se.edit:se.add,n=e[le.projectId],i=Object(Oe.useState)(null),a=Object(ke.a)(i,2),c=a[0],s=a[1];if(Object(Oe.useEffect)((function(){var e,r=!0;return t===se.add?s((e={},Object(o.a)(e,N._settings,[{id:T.random(),title:"",description:"",dateCreation:""}]),Object(o.a)(e,N._sections,[{id:T.random(),title:"",formModel:[{}]}]),e)):Se(n)&&n?(r&&function(){var e=Object(z.a)(K.a.mark((function e(){var t,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z[n].callSelector(N._settings).multiple();case 2:return t=e.sent,e.next=5,Z[n].callSelector(N._sections).multiple();case 5:i=e.sent,r&&s({_settings:t,_sections:i});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){r=!1}):s(void 0)}),[t,n]),void 0===c)return Object(Ce.jsx)(mt.a,{to:we.projectsList});var l=t===se.add?"Add Project":"Edit Project";return W.dispatch({type:r.setFormProject,payload:c}),Object(Ce.jsxs)("span",{children:[Object(Ce.jsxs)("div",{className:"p-4 bg-white rounded shadow flex",children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("h3",{className:"text-xl font-bold",children:l})}),null!==c&&Object(Ce.jsx)(Nn,{})]}),null===c&&Object(Ce.jsx)(Ot,{}),null!==c&&Object(Ce.jsx)(Sn,{})]})},Cn=function(){function e(){Object(F.a)(this,e),this.fileHandles=void 0,this.fileContents=void 0,this.projectData=void 0,this.localProjectSettings=void 0}return Object(P.a)(e,[{key:"import",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.askForFile();case 2:return e.next=4,this.processFileHandles();case 4:return e.next=6,this.initializeDb();case 6:new Qt(this.projectData[N._settings],this.projectData[N._sections]).set();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"askForFile",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker({multiple:!0}).then((function(e){return e}));case 2:this.fileHandles=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processFileHandles",value:function(){var e=Object(z.a)(K.a.mark((function e(){var t=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(this.fileHandles,function(){var e=Object(z.a)(K.a.mark((function e(n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processFileHandle(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processFileHandle",value:function(){var e=Object(z.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t);case 2:return this.fileContents=e.sent,this.parseFileContents(),e.next=6,new dn(this.projectData[N._settings][0],t).save();case 6:this.localProjectSettings=e.sent,this.dispatchProject(this.projectData[N._settings][0]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.projectData=JSON.parse(this.fileContents)}},{key:"initializeDb",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new he(yn,{projectInfo:this.localProjectSettings}).init();case 2:Z[this.projectData[N._settings][0].id]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProject",value:function(e){W.dispatch({type:r.addProjectToList,payload:e})}}]),e}(),En=function(){var e=Object(mt.g)(),t=function(){var t=Object(z.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Cn).import();case 2:e(we.projectsList);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(Ce.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(Ce.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(Ce.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(Ce.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"No projects found"}),Object(Ce.jsx)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:"You do not have any Projects on this device yet"}),Object(Ce.jsx)("p",{className:"leading-relaxed mb-3",children:"You can create a new project or import one from an existing project file."}),Object(Ce.jsxs)("div",{className:"flex flex-wrap mt-7",children:[Object(Ce.jsx)("a",{href:"#",onClick:t,className:"flex-grow mx-2 mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Import an existing project"}),Object(Ce.jsx)(It.b,{to:we.projectAdd,className:"flex-grow mx-2 mt-4 bg-gray-200 border-0 py-3 px-8 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:"Create a new project"})]})]})})})},Dn=function(e){var t=e.project;return Object(Ce.jsxs)("div",{className:"ml-auto",children:[Object(Ce.jsx)(Ct,{project:t}),Object(Ce.jsxs)(It.b,{to:Nt(we.projectDetails,[{name:le.projectId,value:t.id}]),className:"px-4 py-3 text-white inline-flex items-center leading-none text-sm bg-prussian-blue-400 hover:bg-prussian-blue-500 rounded",children:[Object(Ce.jsx)("i",{className:"bi-info-circle mr-2"}),"Project details"]})]})},Fn=function(){function e(t){Object(F.a)(this,e),this.projectId=t,this.projectInfo=void 0}return Object(P.a)(e,[{key:"loadProject",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProjectInfoFromIndexedDB();case 2:return e.next=4,this.createNewInstanceOfDbConnectorForrProject();case 4:this.callCurrentProjectSetter();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectInfoFromIndexedDB",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.system.callSelector(Y.projects,{id:this.projectId}).single();case 2:this.projectInfo=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNewInstanceOfDbConnectorForrProject",value:function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new he(yn,{projectInfo:this.projectInfo}).init();case 2:Z[this.projectId]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callCurrentProjectSetter",value:function(){new Qt(Z[this.projectId].dbStore.db[N._settings],Z[this.projectId].dbStore.db[N._sections]).set()}}]),e}(),Pn=function(e){var t=e.project;return Object(Ce.jsx)("button",{onClick:function(){return new Fn(t.id).loadProject()},className:"px-4 py-2 text-white ml-auto inline-flex items-center md:mb-2 lg:mb-0 rounded bg-green-500 hover:bg-green-600 text-sm",children:"Load project"})},Mn=function(e){var t=e.project,n=Object(_e.b)((function(e){return e.project}));return Object(Ce.jsx)("div",{className:" mt-4 h-full border-2 border-gray-200 border-opacity-60 rounded-lg bg-white",children:Object(Ce.jsxs)("div",{className:"p-6",children:[Object(Ce.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(Ce.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(Ce.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(Ce.jsx)("p",{className:"text-md",children:Qe("yyyy/MM/dd, at hh:mm",new Date(t.dateCreation))}),Object(Ce.jsxs)(Et,{children:[Object(Ce.jsx)(kt,{project:t}),null===n||n[N._settings][0].id!==t.id||void 0===Z[t.id]?Object(Ce.jsx)(Pn,{project:t}):Object(Ce.jsx)(Dn,{project:t})]})]})})},Tn=function(){var e=Object(Oe.useState)(!1),t=Object(ke.a)(e,2),n=t[0],r=t[1],i=Object(_e.b)((function(e){return e.projects})),a=Array.isArray(i)?i.length:0;return Object(Oe.useEffect)((function(){var e=!0;return e&&function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new gt).load();case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){e=!1}}),[a]),Array.isArray(i)&&0===i.length?Object(Ce.jsx)(mt.a,{to:we.projectsNone}):n?Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("div",{className:"md:w-full bg-white border-b-2 rounded border-white",children:Object(Ce.jsxs)("div",{className:"flex h-full border-t-2 border-prussian-blue-400 border-opacity-60 rounded justify-between",children:[Object(Ce.jsx)("div",{className:"px-6 py-3",children:Object(Ce.jsx)("h1",{className:"title-font text-md font-medium text-gray-900",children:"Projects on this device"})}),Object(Ce.jsxs)("div",{className:"my-2",children:[Object(Ce.jsx)("a",{"data-tip":!0,"data-for":"importProject",href:"#",onClick:function(){return(new Cn).import()},className:"mx-2 my-2 text-white bg-prussian-blue-600 border-0 py-1 px-6 focus:outline-none hover:bg-prussian-blue-700 rounded font-bold text-sm",children:Object(Ce.jsx)("i",{className:"bi bi-arrow-bar-down"})}),Object(Ce.jsx)(rt.a,{id:"importProject",effect:"solid",children:Object(Ce.jsx)("span",{children:"Import an existing project"})}),Object(Ce.jsx)(It.b,{"data-tip":!0,"data-for":"createProject",to:we.projectAdd,className:"mx-2 my-2 text-white bg-prussian-blue-400 border-0 py-1 px-6 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:Object(Ce.jsx)("i",{className:"bi bi-plus"})}),Object(Ce.jsx)(rt.a,{id:"createProject",effect:"solid",children:Object(Ce.jsx)("span",{children:"Create a new project"})})]})]})}),Object(Ce.jsx)("div",{className:"p-1 md:w-full",children:i.map((function(e,t){return Object(Ce.jsx)(Mn,{project:e},e.id)}))})]}):Object(Ce.jsx)("span",{})},_n=function(){return Object(Ce.jsxs)(mt.d,{children:[Object(Ce.jsx)(mt.b,{path:we.projectsList,element:Object(Ce.jsx)(Tn,{})}),Object(Ce.jsx)(mt.b,{path:we.projectAdd,element:Object(Ce.jsx)(In,{})}),Object(Ce.jsx)(mt.b,{path:we.projectEdit,element:Object(Ce.jsx)(In,{})}),Object(Ce.jsx)(mt.b,{path:we.projectsNone,element:Object(Ce.jsx)(En,{})}),Object(Ce.jsx)(mt.b,{path:we.projectDetails,element:Object(Ce.jsx)(Ft,{})}),Object(Ce.jsx)(mt.b,{path:we.projectSectionElesList,element:Object(Ce.jsx)(Jt,{})}),Object(Ce.jsx)(mt.b,{path:we.projectSectionEleDetails,element:Object(Ce.jsx)(Rt,{})}),Object(Ce.jsx)(mt.b,{path:we.projectSectionAddEle,element:Object(Ce.jsx)(yt,{})}),Object(Ce.jsx)(mt.b,{path:we.projectSectionEditEle,element:Object(Ce.jsx)(yt,{})}),Object(Ce.jsx)(mt.b,{path:"*",element:Object(Ce.jsx)(mt.a,{to:we.projectsList})})]})},An="block py-2.5 px-4 transition duration-200 border-l-2 hover:border-prussian-blue-700 hover:text-prussian-blue-500 text-sm font-semibold",Ln=function(e,t){return"".concat(An,e===t?" border-prussian-blue-700":" border-transparent")},Vn=[{to:we.projectsList,txt:"Projects",icon:"bi-files"}],Bn=function(){var e=Object(_e.b)((function(e){return e.project})),t=Object(mt.f)();return null===e?Object(Ce.jsx)("span",{}):Object(Ce.jsxs)("div",{className:"mt-3",children:[Object(Ce.jsxs)("div",{className:"block py-2.5 px-4",children:[Object(Ce.jsx)("p",{className:"text-xs text-gray-600",children:"Current project:"}),Object(Ce.jsx)("p",{children:e[N._settings][0].title})]}),Object(Ce.jsx)("div",{className:"block py-2.5 px-4",children:Object(Ce.jsx)("p",{className:"text-xs text-gray-600",children:"Project sections:"})}),e[N._sections].map((function(n){var r=Nt(we.projectSectionElesList,[{name:le.projectId,value:e[N._settings][0].id},{name:le.sectionId,value:n.id}]);return Object(Ce.jsxs)(It.b,{to:r,className:Ln(t.pathname,r),children:[Object(Ce.jsx)("i",{className:"bi-chevron-compact-right"}),Object(Ce.jsx)("span",{className:"ml-2",children:n.title})]},n.id)}))]})},Un=function(){var e=Object(mt.f)();return Object(Ce.jsxs)("div",{children:[Vn.map((function(t){return Object(Ce.jsxs)(It.b,{to:t.to,className:Ln(e.pathname,t.to),children:[Object(Ce.jsx)("i",{className:t.icon}),Object(Ce.jsx)("span",{className:"ml-2",children:t.txt})]},t.to)})),Object(Ce.jsx)(Bn,{})]})},Rn=function(e){return Object(Ce.jsx)("div",{className:"flex-1 p-10 pt-5 overflow-auto",children:e.children})},qn=function(){return Object(Ce.jsxs)("div",{className:"bg-white text-gray-700 flex h-14 shadow-md justify-between",children:[Object(Ce.jsx)("button",{className:"mobile-menu-button p-4 focus:outline-none  md:hidden",onClick:function(){W.dispatch({type:r.toggleSidebar})},children:Object(Ce.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Ce.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),Object(Ce.jsxs)("div",{className:"relative flex items-center lg:w-auto lg:static md:pl-5 -ml-7 md:ml-0",children:[Object(Ce.jsx)(It.b,{to:"/",className:"text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase",children:Object(Ce.jsx)("img",{src:"".concat("/app","/assets/logo/logo_square.svg"),style:{height:"30px",width:"auto"},alt:"Anita"})}),Object(Ce.jsxs)(It.b,{to:"/",className:"hidden md:inline-block mr-4 py-2 whitespace-no-wrap text-prussian-blue-400",children:[Object(Ce.jsx)("span",{className:"text-md font-bold leading-relaxed uppercase",children:"Anita"}),Object(Ce.jsx)("sup",{style:{fontVariant:"small-caps"},children:"Beta"})]})]}),Object(Ce.jsx)("div",{className:"visible md:hidden",children:"\xa0"})]})},Wn=function(e){var t=Object(_e.b)((function(e){return e.layout.sidebar}));return Object(Ce.jsx)("div",{className:"py-5",children:Object(Ce.jsxs)("div",{className:"".concat(t," sidebar h-full bg-white shadow rounded-sm text-prussian-blue-500 w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform md:relative md:translate-x-0 transition duration-200 ease-in-out"),children:[Object(Ce.jsx)("nav",{children:e.children}),Object(Ce.jsxs)("div",{className:"absolute bottom-1 text-xs text-gray-400",children:[Object(Ce.jsxs)("p",{className:"inline-block mr-1",children:["v","0.8.0"]}),"|",Object(Ce.jsxs)("a",{className:"ml-1",href:"https://github.com/anita-app/anita/issues",target:"_blank",rel:"noreferrer",children:[Object(Ce.jsx)("i",{className:"bi-bug","data-tip":!0,"data-for":"reportBug"}),Object(Ce.jsx)(rt.a,{id:"reportBug",effect:"solid",children:Object(Ce.jsx)("span",{children:"Report a bug"})})]})]})]})})},Hn=function(){return Object(Ce.jsxs)(It.a,{children:[Object(Ce.jsx)(qn,{}),Object(Ce.jsxs)("div",{className:"relative admin-container flex",children:[Object(Ce.jsx)(Wn,{children:Object(Ce.jsx)(Un,{})}),Object(Ce.jsx)(Rn,{children:Object(Ce.jsx)(_n,{})})]})]})},Kn=n(23),zn=n.n(Kn),Gn=(n(82),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Jn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}(new ge).init(),zn.a.render(Object(Ce.jsx)(ye.a.StrictMode,{children:Object(Ce.jsx)(_e.a,{store:W,children:Object(Ce.jsx)(Hn,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/app","/service-worker.js");Gn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Jn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Jn(t,e)}))}}()}},[[83,1,2]]]);
//# sourceMappingURL=main.f8567a5c.chunk.js.map