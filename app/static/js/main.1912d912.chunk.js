(this["webpackJsonpanita-app"]=this["webpackJsonpanita-app"]||[]).push([[0],{81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r,i=n(8);!function(e){e[e.toggleSidebar=1]="toggleSidebar",e[e.addProjectToList=2]="addProjectToList",e[e.setProjectList=3]="setProjectList",e[e.setCurrentProject=4]="setCurrentProject",e[e.addSectionForChildOfSelector=5]="addSectionForChildOfSelector",e[e.resetSectionForChildOfSelector=6]="resetSectionForChildOfSelector",e[e.setValidStateForEle=7]="setValidStateForEle",e[e.unsetValidStateForEle=8]="unsetValidStateForEle",e[e.updateFormElement=9]="updateFormElement",e[e.setFormProject=10]="setFormProject",e[e.updateFormProjectSettings=11]="updateFormProjectSettings",e[e.updateFormProjectAddSection=12]="updateFormProjectAddSection",e[e.updateFormProjectUpdateSection=13]="updateFormProjectUpdateSection",e[e.updateFormProjectUpdateFormModelOfSection=14]="updateFormProjectUpdateFormModelOfSection",e[e.updateFormProjectRemoveSection=15]="updateFormProjectRemoveSection",e[e.updateFormProjectAddFieldToSection=16]="updateFormProjectAddFieldToSection",e[e.updateFormProjectRemoveFieldFromSection=17]="updateFormProjectRemoveFieldFromSection",e[e.updateFormProjectUpdateFormModelAddOption=18]="updateFormProjectUpdateFormModelAddOption",e[e.updateFormProjectUpdateFormModelDeleteOption=19]="updateFormProjectUpdateFormModelDeleteOption",e[e.updateFormProjectUpdateFormModelOptionValue=20]="updateFormProjectUpdateFormModelOptionValue"}(r||(r={}));var a,c={element:null},s=n(14),o={};!function(e){e[e.basicInput=1]="basicInput",e[e.basicTextarea=2]="basicTextarea",e[e.basicCheckbox=3]="basicCheckbox",e[e.basicSelect=4]="basicSelect",e[e.basicRadio=5]="basicRadio",e[e.hiddenInput=6]="hiddenInput",e[e.optionsMaker=7]="optionsMaker",e[e.datePicker=8]="datePicker",e[e.dateTimePicker=9]="dateTimePicker",e[e.childOfSelectorForSection=10]="childOfSelectorForSection",e[e.parentsSelector=11]="parentsSelector"}(a||(a={}));var u,l=[{value:a.basicInput,label:"Short text"},{value:a.basicTextarea,label:"Long text"},{value:a.basicCheckbox,label:"Check box"},{value:a.basicSelect,label:"Drop-down list"},{value:a.basicRadio,label:"Alternative choice"},{value:a.datePicker,label:"Date picker"},{value:a.dateTimePicker,label:"Date & time picker"}];!function(e){e.id="id",e.dateCreation="dateCreation",e.parentsInfo="parentsInfo",e.lastModified="lastModified",e.createdBy="createdBy"}(u||(u={}));var d;a.hiddenInput,u.id,a.hiddenInput,u.dateCreation;!function(e){e._settings="_settings",e._sections="_sections"}(d||(d={}));var h,f,p,b=n(3),j=n(4),m=n(25),v=function(){function e(){Object(b.a)(this,e)}return Object(j.a)(e,null,[{key:"make",value:function(e){var t=new Date((new Date).toUTCString()).toISOString(),n=Math.floor(9e3*Math.random())+1e3,r="".concat(e).concat(t).concat(n);return m.a.SHA256(r).toString()}},{key:"random",value:function(){var e=new Date((new Date).toUTCString()).toISOString(),t=Math.floor(9e3*Math.random())+1e3,n="".concat(e).concat(t);return m.a.SHA256(n).toString()}}]),e}(),x=n(23),O=n.n(x),y={original:(h={},Object(s.a)(h,d._settings,[]),Object(s.a)(h,d._sections,[]),h),project:(f={},Object(s.a)(f,d._settings,[]),Object(s.a)(f,d._sections,[]),f)},g={sidebar:"-translate-x-full"},w=[],k={project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setCurrentProject:return t.payload;default:return e}},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addProjectToList:return e.concat(t.payload);case r.setProjectList:return t.payload;default:return e}},sectionsForChildOfSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.addSectionForChildOfSelector:var n=e.concat();if(n.length){var i=n.findIndex((function(e){return e.id===t.payload.id})),a=i>=0?i:n.length;n[a]=t.payload}else n.push(t.payload);return n;default:return e}},formElesValidState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setValidStateForEle:return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},t.payload.formEleId,t.payload.valid));case r.unsetValidStateForEle:var n=Object(i.a)({},e);return Object.keys(n).forEach((function(e){e.startsWith(t.payload)&&delete n[e]})),n;default:return e}},formElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.updateFormElement:return{element:Object(i.a)({},t.payload)};default:return e}},formProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.setFormProject:return{original:t.payload,project:O()(t.payload)};case r.updateFormProjectSettings:return{original:e.original,project:Object(i.a)(Object(i.a)({},e.project),{},Object(s.a)({},d._settings,[Object(i.a)({},t.payload)]))};case r.updateFormProjectAddSection:return{original:e.original,project:Object(i.a)(Object(i.a)({},e.project),{},Object(s.a)({},d._sections,e.project[d._sections].concat({id:v.random(),title:"",formModel:[{}]})))};case r.updateFormProjectUpdateSection:var n={original:e.original,project:Object(i.a)({},e.project)};return n.project[d._sections][t.payload.index]=Object(i.a)({},t.payload.section),n;case r.updateFormProjectUpdateFormModelOfSection:var a={original:e.original,project:Object(i.a)({},e.project)};return a.project[d._sections][t.payload.indexSection].formModel[t.payload.indexFormElement]=Object(i.a)({},t.payload.formElement),a;case r.updateFormProjectAddFieldToSection:var c={original:e.original,project:Object(i.a)({},e.project)};return c.project[d._sections][t.payload].formModel.push({}),c;case r.updateFormProjectRemoveFieldFromSection:var o={original:e.original,project:Object(i.a)({},e.project)};return o.project[d._sections][t.payload.sectionIndex].formModel.splice(t.payload.fieldIndex,1),o;case r.updateFormProjectRemoveSection:var u={original:e.original,project:Object(i.a)({},e.project)};return u.project[d._sections].splice(t.payload,1),u;case r.updateFormProjectUpdateFormModelAddOption:var l={original:e.original,project:Object(i.a)({},e.project)};return l.project[d._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.push({label:"",value:""}),l;case r.updateFormProjectUpdateFormModelDeleteOption:var h={original:e.original,project:Object(i.a)({},e.project)};return h.project[d._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options.splice(t.payload.indexOptions,1),h;case r.updateFormProjectUpdateFormModelOptionValue:var f={original:e.original,project:Object(i.a)({},e.project)};return f.project[d._sections][t.payload.indexSection].formModel[t.payload.indexFormElement].options[t.payload.indexOptions]=t.payload.formElement,f;default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.toggleSidebar:var n=Object(i.a)({},e);return n.sidebar="-translate-x-full"===n.sidebar?"":"-translate-x-full",n;default:return e}}},S=n(37),N=Object(S.a)(k),I=Object(S.b)(N),C=n(2),E=n.n(C),D=n(5),F={name:"localSettings",fields:["data"]};!function(e){e[e.testData=1]="testData"}(p||(p={}));var P,M={name:"projects",fields:["title","fileHandle","description",u.dateCreation]},T={projects:M.name,localSettings:F.name},_=[],A=[M,F],V={system:void 0},L={name:d._sections,pk:"id",fields:["title","childOf","formModel"]},B={name:d._settings,pk:"id",fields:["title","dateCreation","description"]};!function(e){e[e.auds_settings=1]="auds_settings",e[e.auds_sections=2]="auds_sections"}(P||(P={}));var U=[B,L],R=u.id,W=u.parentsInfo,q=u.createdBy,H=n(42),K=function(){function e(){Object(b.a)(this,e)}return Object(j.a)(e,null,[{key:"info",value:function(t,n){var r=n?["".concat(t,": ").concat(JSON.stringify(n))]:[t];return e.doLog(r)}},{key:"list",value:function(t,n){e.isEmptyList(n)&&e.doLog([t,"none"]);var r=Array.isArray(n)?e.listFromArray(n):e.listFromObject(n);return r=r.substring(0,r.length-1),r+=".",e.doLog(["".concat(t," ").concat(r)])}},{key:"isEmptyList",value:function(e){return Array.isArray(e)&&!e.length||"object"===typeof e&&!Object.keys(e).length}},{key:"listFromArray",value:function(t){var n="";return t.forEach((function(t){n+="".concat(e.spacesForListeles).concat(e.formatValueForList(t),";")})),n}},{key:"listFromObject",value:function(t){var n="";for(var r in t)n+="".concat(e.spacesForListeles).concat(r,": ").concat(e.formatValueForList(t[r]),";");return n}},{key:"raw",value:function(t,n){return e.doLog(["".concat(t,": "),n])}},{key:"error",value:function(t,n,r){return e.doLog([t,n,r],"error")}},{key:"warn",value:function(t,n,r){return e.doLog([t,n,r],"warn")}},{key:"formatValueForList",value:function(t){return e.isPrimitiveValue(t)||null===t?t:JSON.stringify(t)}},{key:"isPrimitiveValue",value:function(e){switch(typeof e){case"string":case"number":case"boolean":case"undefined":return!0;default:return!1}}},{key:"doLog",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",i=(new Date).toISOString();return t[0]="[".concat(i,"] ").concat(t[0]),!0===e.debug&&(n=console)[r].apply(n,Object(H.a)(t)),t.join(". ")}}]),e}();K.debug=!0,K.spacesForListeles="\n                            - ";var z,G,J=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[R],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:R,s=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;Object(b.a)(this,e),this.allSez=t,this.name=n,this.fields=r,this.pk=i,this.indexes=a,this.orderBy=c,this.childOf=s,this.parentsIdentifiers=o,this.ownerIdentifier=u,this.section=void 0}return Object(j.a)(e,[{key:"make",value:function(){return this.addPkToFields(),this.addPkToIndexes(),this.addSpecialFieldsToFields("indexes"),this.setOwnerIdentifier(),this.checkOrderByExists(),this.checkRelations(),this.checkParentIdentifier(),this.buildSez(),this.section}},{key:"addPkToFields",value:function(){this.fields.includes(this.pk)||this.fields.unshift(this.pk)}},{key:"addPkToIndexes",value:function(){this.indexes.includes(this.pk)||this.indexes.unshift(this.pk)}},{key:"addSpecialFieldsToFields",value:function(e){var t=this;this[e].forEach((function(e){t.fields.includes(e)||t.fields.push(e)}))}},{key:"setOwnerIdentifier",value:function(){this.ownerIdentifier||(this.ownerIdentifier=q),this.fields.includes(this.ownerIdentifier)||this.fields.push(this.ownerIdentifier)}},{key:"checkOrderByExists",value:function(){this.fields.includes(this.orderBy)||this.fields.push(this.orderBy)}},{key:"checkRelations",value:function(){this.childOf&&this.loopAllRelations()}},{key:"loopAllRelations",value:function(){var e=this;this.childOf.forEach((function(t){return e.checkRelationsExist(t)})),this.childOf.length||(this.childOf=void 0)}},{key:"checkRelationsExist",value:function(e){if(!(this.getSezByName(e)>=0)){var t=this.childOf.indexOf(e);this.childOf.splice(t,1),K.error("Error in .childOf list","Section '".concat(e,"' does not exist in the sections list and has hence been removed from the .childOf list"))}}},{key:"getSezByName",value:function(e){for(var t=-1,n=0,r=this.allSez.length;-1===t&&n<r;)this.allSez[n].name===e&&(t=n),n++;return t}},{key:"checkParentIdentifier",value:function(){this.childOf&&!this.parentsIdentifiers&&(this.parentsIdentifiers=W)}},{key:"buildSez",value:function(){this.section={name:this.name,pk:this.pk,indexes:this.indexes,orderBy:this.orderBy,fields:this.fields,ownerIdentifier:this.ownerIdentifier},this.addChildOf()}},{key:"addChildOf",value:function(){this.childOf&&(this.section.childOf=this.childOf,this.section.parentsIdentifiers=this.parentsIdentifiers)}}]),e}(),Q=function(){function e(t){Object(b.a)(this,e),this.allSez=t,this.ds={}}return Object(j.a)(e,[{key:"make",value:function(){var e=this;return this.allSez.forEach((function(t){return e.buildSez(t)})),this.ds}},{key:"buildSez",value:function(e){var t=new J(this.allSez,e.name,e.fields,e.pk,e.indexes,e.orderBy,e.childOf,e.parentsIdentifiers,e.ownerIdentifier).make();this.addToTempDs(t)}},{key:"addToTempDs",value:function(e){this.ds[e.name]=e}}]),e}(),Y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(b.a)(this,e),this.executers=t,this.options=n,this.allSez=r,this.addSystemSections=i,this.dbStore=void 0,this.DS={}}return Object(j.a)(e,[{key:"init",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.addSystemSections&&(this.DS=Object.assign(this.DS,new Q(U).make())),this.allSez.length&&(this.DS=Object.assign(this.DS,new Q(this.allSez).make())),!this.executers.dbStore){e.next=8;break}return e.next=5,new this.executers.dbStore(this,this.options).initDB();case 5:this.dbStore=e.sent,e.next=9;break;case 8:throw new Error("No dbStore passed to DbConnector. To initialize DbConnector, you must pass a valid dbStore");case 9:return e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callInsertor",value:function(e,t){return new this.executers.insertor(this,e,t)}},{key:"callSelector",value:function(e,t){return new this.executers.selector(this,e,t)}},{key:"callUpdator",value:function(e,t){return new this.executers.updator(this,e,t)}},{key:"callDeletor",value:function(e,t){return new this.executers.deletor(this,e,t)}}]),e}(),X=n(40),$=function(){function e(t,n){Object(b.a)(this,e),this.dbConnector=t,this.options=n,this.db=void 0,this.lastPreviousVersionScheme=void 0}return Object(j.a)(e,[{key:"initDB",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dbConnector.options.indexedDbName){e.next=2;break}throw Error("No name found in DsDbInitOptions. Please provide a name for the database by setting the name on the property indexedDbName in the options passed to DbConnector.");case 2:return this.setDb(),this.options.previousVersions||(this.options.previousVersions=[]),t=this.options.previousVersions.length?this.options.previousVersions.length+1:1,this.options.previousVersions.length&&this.options.previousVersions.forEach((function(e,t){return n.handlePreviousVersion(e,t+1)})),this.buildVersionDb(this.dbConnector.DS,t),e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){}},{key:"setDb",value:function(){this.db=new X.a(this.dbConnector.options.indexedDbName)}},{key:"handlePreviousVersion",value:function(e,t){var n=new Q(e).make();this.buildVersionDb(n,t),this.lastPreviousVersionScheme=n}},{key:"buildVersionDb",value:function(e,t){var n={};for(var r in e)this.lastPreviousVersionScheme&&this.lastPreviousVersionScheme[r]||(n[e[r].name]=e[r].indexes.join());this.db.version(t).stores(n)}}]),e}(),Z=n(31),ee=function(){function e(){Object(b.a)(this,e)}return Object(j.a)(e,null,[{key:"methodToExecute",value:function(e,t,n){var r=t.length;if(!r)return"dexieFullCollection";if(2===r&&(">="===t[0][1]||">"===t[0][1])&&("<="===t[1][1]||"<"===t[1][1]))return"dexieBetween";if("="!==t[0][1])return"complexSelect";if(1===r&&t[0][0]===e[n].pk)return"dexieGet";if(e[n].indexes.indexOf(t[0][0])>-1)return"dexieGet";var i=!0;return t.forEach((function(t){"="!==t[1]&&(i=!1),e[n].indexes.indexOf(t[0])<0&&(i=!1)})),i?"dexieWhere":"complexSelect"}},{key:"buildArrayFildsNValues",value:function(e){var t={};return e.forEach((function(e){t[e[0]]=e[2]})),t}},{key:"buildBetweenSearchParams",value:function(e){var t=">="===e[0][1],n="<="===e[1][1];return{field:e[0][0],lowerBound:e[0][2],upperBound:e[1][2],includeLower:t,includeUpper:n}}},{key:"buildFilter4Dexie",value:function(e){var t=e[0],n=e[1],r=e[2];return function(e){switch(n){case"===":return e[t]===r;case"!=":return e[t]!=r;case">":return e[t]>r;case">=":return e[t]>=r;case"<":return e[t]>r;case"<=":return e[t]<=r;default:return e[t]==r}}}},{key:"chainFilters",value:function(e,t){return function(n){if(!e.length)return!0;var r,i=e[0](n),a=Object(Z.a)(e);try{for(a.s();!(r=a.n()).done;){var c=r.value;switch(t){case"OR":i=i||c(n);break;default:i=i&&c(n)}}}catch(s){a.e(s)}finally{a.f()}return i}}}]),e}(),te=function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.logic="AND",this.table=void 0,this.collection=void 0,this.dexieFilters=[],this.arrWhere=[],this.orderBy=void 0,this.debug=!1,this.table=this.dbConnector.DS[this.section].name,this.collection=this.dbConnector.dbStore.db[this.table]}return Object(j.a)(e,[{key:"addWhere",value:function(e){return this.arrWhere.push(e),this}},{key:"setOrLogic",value:function(){return this.logic="OR",this}},{key:"setOrderBy",value:function(e){this.orderBy=e}},{key:"select",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("AND"===this.logic){e.next=2;break}return e.abrupt("return",this.complexSelect());case 2:return t=ee.methodToExecute(this.dbConnector.DS,this.arrWhere,this.section),this.handleDebug("SELECT","methodToExecute",t),e.abrupt("return",this[t]());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieGet",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={})[this.arrWhere[0][0]]=this.arrWhere[0][2],e.next=4,this.dbConnector.dbStore.db[this.table].get(t);case 4:return n=e.sent,r=n?[n]:[],e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieWhere",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee.buildArrayFildsNValues(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieBetween",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee.buildBetweenSearchParams(this.arrWhere),e.abrupt("return",this.dbConnector.dbStore.db[this.table].where(t.field).between(t.lowerBound,t.upperBound,t.includeLower,t.includeUpper).toArray());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dexieFullCollection",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbConnector.dbStore.db[this.table].toArray());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"complexSelect",value:function(){var e=this;this.arrWhere.forEach((function(t){return e.dexieFilters.push(ee.buildFilter4Dexie(t))}));var t=this.dbConnector.dbStore.db[this.table].toCollection(),n=ee.chainFilters(this.dexieFilters,this.logic);return t=t.and(n),this.handleDebug("SELECT","WHERE",this.arrWhere),this.orderBy?t.sortBy(this.orderBy):t.toArray()}},{key:"insert",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=O()(this.element),this.element)this.dbConnector.DS[this.section].fields.includes(n)||delete t[n];return this.handleDebug("INSERT","WITH OBJECT",t),e.next=5,this.dbConnector.dbStore.db[this.table].put(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=O()(this.element),this.element)this.dbConnector.DS[this.section].fields.includes(n)?t[n]||(t[n]=void 0):delete t[n];return this.handleDebug("UPDATE","WITH OBJECT",t),e.next=5,this.dbConnector.dbStore.db[this.table].update(t[this.dbConnector.DS[this.section].pk],t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){return this.collection.count()}},{key:"delete",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee.buildArrayFildsNValues(this.arrWhere),this.handleDebug("DELETE","WHERE",this.arrWhere),e.next=4,this.dbConnector.dbStore.db[this.table].where(t).delete();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearDb",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.dbConnector.DS)this.dbConnector.DS[n].name&&t.push(this.dbConnector.dbStore.db[this.dbConnector.DS[n].name].clear());return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearTable",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbConnector.dbStore.db[this.table].clear();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDebug",value:function(e,t,n){this.debug&&K.raw("EXECUTING ".concat(e," FOR TABLE ").concat(this.table," ").concat(t," "),n)}}]),e}(),ne=function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(j.a)(e,[{key:"autoDelete",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.args[this.dbConnector.DS[this.section].pk]){e.next=6;break}return t=this.args[this.dbConnector.DS[this.section].pk],e.next=4,new te(this.dbConnector,this.section).addWhere([this.dbConnector.DS[this.section].pk,"=",t]).delete();case 4:e.next=7;break;case 6:K.error("Error in autoDelete","No PK value was found on the element");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),re={insertor:function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(j.a)(e,[{key:"autoInsert",value:function(){return new te(this.dbConnector,this.section,this.element).insert().catch((function(e){K.error("Error in autoinsert: ",e)}))}}]),e}(),selector:function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.data=[],this.qe=void 0}return Object(j.a)(e,[{key:"single",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),e.next=4,this.executeSelect();case 4:return e.abrupt("return",this.data[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"multiple",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpSelect(),this.setQuery(),this.setOrder(),e.next=5,this.executeSelect();case 5:return e.abrupt("return",this.data);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new te(this.dbConnector,this.section).count());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUpSelect",value:function(){this.qe=new te(this.dbConnector,this.section)}},{key:"setQuery",value:function(){this.args&&this.args[this.dbConnector.DS[this.section].pk]&&this.qe.addWhere([this.dbConnector.DS[this.section].pk,"=",this.args[this.dbConnector.DS[this.section].pk]])}},{key:"setOrder",value:function(){this.qe.setOrderBy(this.dbConnector.DS[this.section].orderBy)}},{key:"executeSelect",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.qe.select();case 2:this.data=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),updator:function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.element=r}return Object(j.a)(e,[{key:"autoUpdate",value:function(){return new te(this.dbConnector,this.section,this.element).update().catch((function(e){K.error("Error in autoUpdate",e)}))}}]),e}(),deletor:ne,dbStore:$},ie=n(1),ae=n.n(ie),ce=function(){function e(){Object(b.a)(this,e),this.systemDbName="anitaDB"}return Object(j.a)(e,[{key:"init",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K.info("Anita web app."),e.next=3,this.initSystemIndexedDb(this.systemDbName);case 3:this.setLoggerDebug();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initSystemIndexedDb",value:function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(re,{previousVersions:_,indexedDbName:t},A,!1).init();case 2:V.system=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReactDev",value:function(){return"_self"in ae.a.createElement("div")}},{key:"setLoggerDebug",value:function(){K.debug=this.isReactDev()}}]),e}();!function(e){e.add="add",e.edit="edit"}(z||(z={})),function(e){e.projectId="projectId",e.sectionId="sectionId",e.elementId="elementId",e.parentId="parentId"}(G||(G={}));var se={projectsNone:"/projects/none",projectsList:"/projects/list",projectAdd:"/projects/".concat(z.add),projectEdit:"/projects/".concat(z.edit,"/:").concat(G.projectId),projectDetails:"/project/:".concat(G.projectId,"/info"),projectSectionElesList:"/project/:".concat(G.projectId,"/list/:").concat(G.sectionId),projectSectionAddEle:"/project/:".concat(G.projectId,"/:").concat(G.sectionId,"/").concat(z.add),projectSectionEditEle:"/project/:".concat(G.projectId,"/:").concat(G.sectionId,"/").concat(z.edit,"/:").concat(G.elementId),projectSectionEleDetails:"/project/:".concat(G.projectId,"/:").concat(G.sectionId,"/details/:").concat(G.elementId)},oe=n(12);function ue(e){return!!V[e]}var le=function(){function e(t,n){Object(b.a)(this,e),this.childOf=t,this.sections=n,this.parentInfoFormModel=void 0,this.options=[]}return Object(j.a)(e,[{key:"build",value:function(){return this.setOptions(),this.setParentSelector(),this.parentInfoFormModel}},{key:"setOptions",value:function(){var e=this;this.childOf.forEach((function(t){var n=e.sections.find((function(e){return e.id===t}));e.options.push({value:t,label:n.title})}))}},{key:"setParentSelector",value:function(){this.parentInfoFormModel={componentCode:a.parentsSelector,fieldName:u.parentsInfo,label:"Parent elements",options:this.options}}}]),e}();function de(e,t){return e.find((function(e){return e.id===t}))}var he=n(0),fe=function(e){var t=e.children,n=e.width;return Object(he.jsx)("div",{className:"".concat(n," my-3 px-2 inline-block align-top"),children:t})},pe=function(e){var t=e.label;return Object(he.jsx)("label",{className:"w-full block mb-0 ml-1 text-gray-700 text-sm",children:t})},be=function(e){var t=e.formEle,n=e.element,i=e.fieldId,a=e.touched,c=n[t.fieldName];return Object(ie.useEffect)((function(){I.dispatch({type:r.setValidStateForEle,payload:{formEleId:"".concat(i,"-required"),valid:""!==c&&void 0!==c&&null!==c}})}),[c,i]),c||!a?Object(he.jsx)("div",{className:"ml-1 text-xs italic text-gray-400",children:"Required"}):Object(he.jsx)("div",{className:"ml-1 text-red-600 text-xs italic",children:"This field is required"})},je=function(e){var t=[];return e.formEle.required&&t.push(Object(he.jsx)(be,Object(i.a)({},e),"required-validator")),Object(he.jsx)("span",{children:t})},me=n(17),ve=n.n(me),xe=n(11),Oe=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?t.width:"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("input",{name:t.fieldName,type:"checkbox",checked:!(!Reflect.has(n,t.fieldName)||"boolean"!==typeof n[t.fieldName])&&n[t.fieldName],className:"rounded mt-3 ".concat(d&&s?"text-red-600 border border-red-600":"text-prussian-blue-500"),onChange:function(e){return i(t.fieldName,e.target.checked)},onBlur:function(){return o(!0)}},t.fieldName),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})};function ye(e,t){return Reflect.has(e,t)&&void 0!==e[t]&&null!==e[t]}function ge(e){return"w-full lg:w-".concat(e,"/12")}var we="rounded-md border border-gray-300 hover:border-gray-400 focus:border-gray-200 focus:shadow-inner focus:bg-white focus:ring-0",ke="rounded-md border-2 border-red-300 hover:border-red-400 focus:border-red-200 focus:shadow-inner focus:bg-white focus:ring-0",Se=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?ge(t.width):"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("input",{name:t.fieldName,type:"text",placeholder:t.label,disabled:!!t.disabled&&t.disabled,required:!!t.required&&t.required,className:"w-full ".concat(d&&s?ke:we),value:ye(n,t.fieldName)?n[t.fieldName]:"",onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)}},t.fieldName),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})},Ne=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?t.width:"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("div",{className:"mt-2 pl-1",children:t.options.map((function(e){return Object(he.jsxs)("div",{className:"mb-2",children:[Object(he.jsx)("input",{type:"radio",value:e.value,name:t.fieldName,checked:n[t.fieldName]==e.value,className:"".concat(d&&s?"bg-red-600 text-red-600":"bg-gray-200 text-prussian-blue-500"," mr-2 border-transparent focus:border-gray-500 focus:text-prussian-blue-600 focus:ring-prussian-blue-600"),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)}})," ",e.label]},e.value)}))}),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]},t.fieldName)},Ie=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?ge(t.width):"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsxs)("select",{className:"w-full ".concat(d&&s?ke:we),value:n[t.fieldName],onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)},children:[Object(he.jsx)("option",{value:"",children:"Please chose one"}),t.options.map((function(e,t){return Object(he.jsx)("option",{value:e.value,children:e.label},t)}))]}),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})},Ce=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?t.width:"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("textarea",{name:t.fieldName,className:"w-full ".concat(d&&s?ke:we),value:ye(n,t.fieldName)?n[t.fieldName]:"",onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)}}),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})};function Ee(e){var t=[];return e.forEach((function(e){t.push(e.value)})),t}function De(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.options.find((function(t){return t.value===e}))}));if(r){var i=r.options.find((function(t){return t.value===e}));i&&n.push(i)}})),n):n}function Fe(e,t){var n=[];return e&&t?(e.forEach((function(e){var r=t.find((function(t){return t.value===e}));r&&n.push(r)})),n):n}var Pe=n(32),Me=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=e.sectionId,c=Object(xe.b)((function(e){return e.formProject.project[d._sections]})),s=Object(ie.useState)([]),o=Object(oe.a)(s,2),u=o[0],l=o[1],h=Object(ie.useState)(!1),f=Object(oe.a)(h,2),p=f[0],b=f[1],j=Object(ie.useRef)(ve()(t.fieldName)).current,m=Object(xe.b)((function(e){return e.formElesValidState})),v=Object.keys(m).some((function(e){return e.startsWith(j)&&!1===m[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:j})}}),[j]),Object(ie.useEffect)((function(){var e=!0;return e&&function(){if(Array.isArray(c)){var e=[];c.forEach((function(t){t.id!==a&&e.push({value:t.id,label:t.title})})),l(e)}}(),function(){e=!1}}),[c,c.length,a]);return 0===u.length?null:Object(he.jsxs)(fe,{width:"w-full",children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)(Pe.a,{defaultValue:Fe(n[t.fieldName],u),isMulti:!0,name:t.fieldName,options:u,className:v&&p?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,Ee(e))},onBlur:function(){return b(!0)}}),Object(he.jsx)(je,{formEle:t,element:n,fieldId:j,touched:p})]})},Te=n(19),_e=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?t.width:"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("input",{name:t.fieldName,type:"date",placeholder:t.label,className:"w-full ".concat(d&&s?ke:we),value:Te("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)}},t.fieldName),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})},Ae=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)(!1),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(ie.useRef)(ve()(t.fieldName)).current,l=Object(xe.b)((function(e){return e.formElesValidState})),d=Object.keys(l).some((function(e){return e.startsWith(u)&&!1===l[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:u})}}),[u]);var h=t.width?ge(t.width):"w-full";return Object(he.jsxs)(fe,{width:h,children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)("input",{name:t.fieldName,type:"datetime-local",placeholder:t.label,className:"w-full ".concat(d&&s?ke:we),value:Te("yyyy-MM-ddThh:mm:ss",new Date(n[t.fieldName])),onChange:function(e){return i(t.fieldName,e.target.value)},onBlur:function(){return o(!0)}},t.fieldName),Object(he.jsx)(je,{formEle:t,element:n,fieldId:u,touched:s})]})},Ve=function(e){var t=e.formEle,n=e.element,r=e.handleChange;return Object(he.jsx)("input",{name:t.fieldName,type:"hidden",value:ye(n,t.fieldName)?"":n[t.fieldName],onChange:function(e){return r(t.fieldName,e.target.value)}},t.fieldName)},Le={componentCode:a.basicInput,fieldName:"label",type:"text",label:"Label",required:!0,width:"8"},Be=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",required:!0,width:"3"},Le],Ue=[{componentCode:a.basicInput,fieldName:"value",type:"text",label:"Value",disabled:!0,required:!0,width:"3"},Le],Re="green",We="red",qe="bg-transparent hover:bg-".concat(Re,"-500 text-").concat(Re,"-700 font-semibold hover:text-white border border-").concat(Re,"-500 hover:border-transparent rounded"),He="bg-transparent hover:bg-".concat(We,"-500 text-").concat(We,"-700 font-semibold hover:text-white border border-").concat(We,"-500 hover:border-transparent rounded"),Ke=n(24);function ze(e,t,n){return e&&e.formModel[t]&&e.formModel[t].options&&e.formModel[t].options.length&&e.formModel[t].options.some((function(e){return e.value===n.value}))?Ue:Be}var Ge=function(e){var t=e.formEle,n=e.element,r=e.handleOptionsChange,i=e.handleClickAddOption,a=e.handleClickDeleteOption,c=e.indexSection,s=e.indexFormElement,o=Object(xe.b)((function(e){return e.formProject.original[d._sections]}));return n[t.fieldName]&&"function"===typeof r?Object(he.jsxs)("div",{className:"mt-6 pl-10 py-4 bg-gray-50 rounded-lg",children:[Object(he.jsx)("p",{className:"-ml-5 font-semibold mb-1",children:"Choices"}),Object(he.jsx)("ol",{className:"list-decimal",children:n[t.fieldName].map((function(e,i){return Object(he.jsxs)("li",{children:[Object(he.jsx)(tt,{formModel:ze(o[c],s,e),element:e,handleChange:r.bind(void 0,i,e)}),"function"===typeof a&&n[t.fieldName].length>1&&Object(he.jsxs)("div",{className:"inline-block w-full lg:w-1/12 px-2 lg:pl-1 lg:pr-3 lg:align-bottom mb-8",children:[Object(he.jsxs)("button",{onClick:a.bind(void 0,i),"data-tip":!0,"data-for":"deleteOption-".concat(i),className:"w-full py-1 ".concat(He),children:[Object(he.jsx)("i",{className:"bi-trash hidden lg:block"}),Object(he.jsxs)("span",{className:"lg:hidden",children:["Delete option ",i+1]})]}),Object(he.jsx)(Ke.a,{id:"deleteOption-".concat(i),effect:"solid",children:Object(he.jsxs)("span",{children:["Delete option ",i+1]})})]})]},i)}))}),"function"===typeof i&&Object(he.jsx)("div",{className:"flex items-end",children:Object(he.jsx)("button",{className:"ml-auto mr-4 mt-3 py-2 px-3 ".concat(qe),onClick:i,children:"Add option"})})]}):null};function Je(e){var t=void 0;return e.some((function(e,n){return!u[e.fieldName]&&(t=n,!0)})),t}function Qe(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(D.a)(E.a.mark((function e(t,n){var r,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.length,i=0;case 2:if(!(i<r)){e.next=8;break}return e.next=5,n(t[i],i,t);case 5:i++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=function(){function e(t,n){Object(b.a)(this,e),this.project=t,this.options=n,this.optionsGroups=[]}return Object(j.a)(e,[{key:"buildOptions",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(this.options,function(){var e=Object(D.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V[t.project[d._settings][0].id].callSelector(n.value).multiple();case 2:(r=e.sent).length&&t.createGroupOption(n.value,n.label,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.optionsGroups);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createGroupOption",value:function(e,t,n){var r=[],i=de(this.project[d._sections],e),a=Je(i.formModel);n.forEach((function(t){return r.push({value:"".concat(e,"|").concat(t.id),label:t[i.formModel[a].fieldName]})})),this.optionsGroups.push({label:t,options:r})}}]),e}(),$e=function(e){var t=e.formEle,n=e.element,i=e.handleChange,a=Object(ie.useState)([]),c=Object(oe.a)(a,2),s=c[0],o=c[1],u=Object(xe.b)((function(e){return e.project})),l=Object(ie.useState)(!1),d=Object(oe.a)(l,2),h=d[0],f=d[1],p=Object(ie.useRef)(ve()(t.fieldName)).current,b=Object(xe.b)((function(e){return e.formElesValidState})),j=Object.keys(b).some((function(e){return e.startsWith(p)&&!1===b[e]}));Object(ie.useEffect)((function(){return function(){I.dispatch({type:r.unsetValidStateForEle,payload:p})}}),[p]),Object(ie.useEffect)((function(){var e=!0;return e&&function(){var n=Object(D.a)(E.a.mark((function n(){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Xe(u,t.options).buildOptions();case 2:r=n.sent,e&&o(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!1}}),[u,t.options]);return 0===s.length?null:Object(he.jsxs)(fe,{width:"w-full",children:[Object(he.jsx)(pe,{label:t.label}),Object(he.jsx)(Pe.a,{defaultValue:De(n[t.fieldName],s),isMulti:!0,name:t.fieldName,options:s,className:j&&h?"border border-red-600 rounded":"",onChange:function(e){i(t.fieldName,Ee(e))},onBlur:function(){return f(!0)}}),Object(he.jsx)(je,{formEle:t,element:n,fieldId:p,touched:h})]})};var Ze=function(){function e(t,n){Object(b.a)(this,e),this.formEle=t,this.objValues=n,this.isIntegrated=!1}return Object(j.a)(e,[{key:"integrates",value:function(){return!this.formEle.prerequisites||!this.formEle.prerequisites.length||(this.loopPrerequisites(),this.isIntegrated)}},{key:"loopPrerequisites",value:function(){for(var e=0;!1===this.isIntegrated&&e<this.formEle.prerequisites.length;)this.checkPrerequisites(this.formEle.prerequisites[e]),e++}},{key:"checkPrerequisites",value:function(e){var t=this,n=function(n){t.objValues[n]&&e[n].filter((function(e){return e==t.objValues[n]})).length>0&&t.setIsIntegrated()};for(var r in e)n(r)}},{key:"setIsIntegrated",value:function(){this.isIntegrated=!0}}]),e}(),et=function(e){var t=Object(ie.useState)(!0),n=Object(oe.a)(t,2),r=n[0],c=n[1];return Object(ie.useEffect)((function(){var t=new Ze(e.formEle,e.element).integrates();c(t)}),[e.element,e.formEle]),r?function(e,t,n){switch(t){case a.hiddenInput:return Object(he.jsx)(Ve,Object(i.a)({},n),e);case a.basicInput:return Object(he.jsx)(Se,Object(i.a)({},n),e);case a.basicSelect:return Object(he.jsx)(Ie,Object(i.a)({},n),e);case a.basicTextarea:return Object(he.jsx)(Ce,Object(i.a)({},n),e);case a.basicCheckbox:return Object(he.jsx)(Oe,Object(i.a)({},n),e);case a.basicRadio:return Object(he.jsx)(Ne,Object(i.a)({},n),e);case a.datePicker:return Object(he.jsx)(_e,Object(i.a)({},n),e);case a.dateTimePicker:return Object(he.jsx)(Ae,Object(i.a)({},n),e);case a.optionsMaker:return Object(he.jsx)(Ge,Object(i.a)({},n),e);case a.childOfSelectorForSection:return Object(he.jsx)(Me,Object(i.a)({},n),e);case a.parentsSelector:return Object(he.jsx)($e,Object(i.a)({},n),e);default:return Object(he.jsx)(Se,Object(i.a)({},n),e)}}(e.formEle.fieldName,e.formEle.componentCode,e):null},tt=function(e){return Object(he.jsx)("span",{children:e.formModel.map((function(t){var n=Object(i.a)({formEle:t},e);return Object(he.jsx)(et,Object(i.a)({},n),t.fieldName)}))})},nt=function(e){var t=e.sectionId,n=Object(xe.b)((function(e){return e.project}))[d._sections],a=de(n,t),c=Object(xe.b)((function(e){return e.formElement.element})),o=function(e,t){I.dispatch({type:r.updateFormElement,payload:Object(i.a)(Object(i.a)({},c),{},Object(s.a)({},e,t))})};return Object(he.jsxs)("form",{name:"element-form",children:[a.childOf&&a.childOf.length>0&&Object(he.jsx)(tt,{formModel:[new le(a.childOf,n).build()],element:c,handleChange:o}),Object(he.jsx)(tt,{formModel:a.formModel,element:c,handleChange:o})]})},rt=function(){function e(t,n,r,i){Object(b.a)(this,e),this.projectId=t,this.sectionId=n,this.element=r,this.mode=i,this.sectionModelInDS=void 0}return Object(j.a)(e,[{key:"save",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setSectionModel(),this.checkAndSetPk(),this.setDateCreation(),this.deleteEmptyProps(),this.mode!==z.add){e.next=9;break}return e.next=7,V[this.projectId].callInsertor(this.sectionId,this.element).autoInsert();case 7:e.next=12;break;case 9:return this.setLastModifiedValueIfInEditMode(),e.next=12,V[this.projectId].callUpdator(this.sectionId,this.element).autoUpdate();case 12:return e.abrupt("return",this.element);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSectionModel",value:function(){this.sectionModelInDS=V[this.projectId].DS[this.sectionId]}},{key:"checkAndSetPk",value:function(){this.element[this.sectionModelInDS.pk]||(this.element[this.sectionModelInDS.pk]=v.make(this.sectionModelInDS.name))}},{key:"deleteEmptyProps",value:function(){for(var e in this.element)""===this.element[e]&&delete this.element[e]}},{key:"setDateCreation",value:function(){this.sectionModelInDS.fields.includes(u.dateCreation)&&!this.element[u.dateCreation]&&(this.element[u.dateCreation]=new Date((new Date).toUTCString()).toISOString())}},{key:"setLastModifiedValueIfInEditMode",value:function(){this.sectionModelInDS.fields.includes(u.lastModified)&&(this.element[u.lastModified]=new Date((new Date).toUTCString()).toISOString())}}]),e}(),it=n(10),at=function(e){var t=e.sectionId,n=Object(xe.b)((function(e){return e.project})),r=Object(xe.b)((function(e){return e.formElement.element})),i=Object(xe.b)((function(e){return e.formElesValidState})),a=Object(it.g)(),c=function(){var e=Object(D.a)(E.a.mark((function e(){var i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.id?z.edit:z.add,e.next=3,new rt(n[d._settings][0].id,t,r,i).save();case 3:a(-1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(he.jsxs)("div",{className:"mt-6 mb-3 px-2 flex justify-end",children:[Object(he.jsx)("button",{className:"py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return a(-1)},children:"Cancel"}),Object(he.jsx)("button",{disabled:Object.keys(i).some((function(e){return!1===i[e]})),className:"py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500",onClick:c,children:"Save"})]})},ct=function(e){var t=e.children,n=e.headerText;return Object(he.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[n?Object(he.jsxs)("div",{className:"mt-3",children:[Object(he.jsx)("h3",{className:"text-xl font-bold",children:n}),Object(he.jsx)("hr",{className:"mt-4"})]}):null,Object(he.jsx)("div",{className:"pt-4",children:t})]})},st=function(){return Object(he.jsxs)("svg",{className:"absolute top-1/2 left-2/4 animate-spin -ml-1 mr-3 h-5 w-5 text-prussian-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(he.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(he.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},ot=function(){var e=Object(it.h)(),t=e[G.elementId]?z.edit:z.add,n=e[G.projectId],i=e[G.sectionId],a=t===z.edit?e[G.elementId]:null,c=Object(ie.useState)(null),s=Object(oe.a)(c,2),o=s[0],u=s[1];if(Object(ie.useEffect)((function(){var e=!0;return ue(n)&&n&&i?t===z.add?u({}):(e&&function(){var t=Object(D.a)(E.a.mark((function t(){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V[n].callSelector(i,{id:a}).single();case 2:r=t.sent,e&&u(r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}):u(void 0)}),[t,n,i,a]),void 0===o)return Object(he.jsx)(it.a,{to:se.projectsList});var l=t===z.add?"Add Element":"Edit Element";return I.dispatch({type:r.updateFormElement,payload:o}),Object(he.jsxs)(ct,{headerText:l,children:[null===o&&Object(he.jsx)(st,{}),null!==o&&Object(he.jsx)(nt,{sectionId:i}),null!==o&&Object(he.jsx)(at,{sectionId:i})]})},ut=function(){function e(){Object(b.a)(this,e),this.projectList=[]}return Object(j.a)(e,[{key:"load",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromLocalDB();case 2:this.dispatchProjectList(this.projectList);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromLocalDB",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.system.callSelector(T.projects).multiple();case 2:this.projectList=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProjectList",value:function(e){I.dispatch({type:r.setProjectList,payload:e})}}]),e}(),lt=function(){function e(t){Object(b.a)(this,e),this.project=t}return Object(j.a)(e,[{key:"delete",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doDelete();case 2:this.reloadProjectList();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.system.callDeletor(T.projects,{id:this.project.id}).autoDelete();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadProjectList",value:function(){(new ut).load()}}]),e}(),dt=function(e){var t=e.project,n=Object(ie.useState)(!1),r=Object(oe.a)(n,2),i=r[0],a=r[1];return Object(he.jsxs)("span",{children:[Object(he.jsxs)("button",{onClick:function(){return a(!0)},className:"px-4 py-2 text-red-700 inline-flex items-center md:mb-2 lg:mb-0 rounded bg-red-700 bg-opacity-10 hover:bg-opacity-20 text-sm",children:[Object(he.jsx)("i",{className:"bi-trash"}),Object(he.jsx)("span",{className:"ml-2 hidden lg:inline-block",children:"Delete project"})]}),i&&Object(he.jsx)(ht,{project:t,closeFn:function(){return a(!1)}})]})},ht=function(e){var t=e.project,n=e.closeFn;return Object(he.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(he.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(he.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(he.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(he.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(he.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(he.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(he.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Object(he.jsx)("i",{className:" text-red-600 bi-exclamation-triangle text-xl -mt-1"})}),Object(he.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(he.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Delete Project"}),Object(he.jsx)("div",{className:"mt-2",children:Object(he.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete this project?",Object(he.jsx)("br",{}),Object(he.jsx)("br",{}),"All project data will be permanently removed from this device. This action cannot be undone.",Object(he.jsx)("br",{}),Object(he.jsx)("br",{}),"Data stored on other devices will not be affected."]})})]})]})}),Object(he.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(he.jsx)("button",{onClick:function(){return new lt(t).delete()},type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),Object(he.jsx)("button",{onClick:n,type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})};function ft(e,t){var n=e;return t.forEach((function(e){n=n.replace(new RegExp(":".concat(e.name),"g"),e.value)})),n}var pt=n(16),bt=function(e){var t=e.project;return Object(he.jsxs)(pt.b,{to:ft(se.projectEdit,[{name:G.projectId,value:t.id}]),className:"px-4 py-3 text-gray-800 mr-3 inline-flex items-center ml-auto leading-none text-sm bg-gray-100 hover:bg-gray-200 rounded",children:[Object(he.jsx)("i",{className:"bi-pencil"})," ",Object(he.jsx)("span",{className:"ml-2 hidden sm:inline-block",children:"Edit Project"})]})},jt=function(e){var t=e.children;return Object(he.jsx)("div",{className:"flex items-end flex-wrap mt-6",children:t})},mt=function(e){var t=e.project;return Object(he.jsxs)("div",{className:"p-6",children:[Object(he.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(he.jsx)("p",{className:"text-gray-600 text-xs",children:"Description"}),Object(he.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(he.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(he.jsx)("p",{className:"text-md",children:Te("yyyy/MM/dd, at hh:mm",new Date(t.dateCreation))}),Object(he.jsxs)(jt,{children:[Object(he.jsx)(dt,{project:t}),Object(he.jsx)(bt,{project:t})]})]})},vt=function(){var e=Object(it.h)()[G.projectId],t=Object(ie.useState)(null),n=Object(oe.a)(t,2),r=n[0],i=n[1];return Object(ie.useEffect)((function(){var t=!0;return t&&function(){var n=Object(D.a)(E.a.mark((function n(){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ue(e)){n.next=2;break}return n.abrupt("return",i(void 0));case 2:return n.next=4,V[e].callSelector(d._settings).single();case 4:r=n.sent,t&&i(r);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){t=!1}}),[e]),void 0===r?Object(he.jsx)(it.a,{to:se.projectsList}):Object(he.jsx)("div",{className:"relative border-2 border-gray-200 border-opacity-60 rounded bg-white",style:{minHeight:"200px"},children:null===r?Object(he.jsx)(st,{}):Object(he.jsx)(mt,{project:r})})},xt=function(){function e(t,n,r){Object(b.a)(this,e),this.listOfParents=t,this.projectId=n,this.sections=r,this.parentInfoForDetailsView=[]}return Object(j.a)(e,[{key:"get",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(this.listOfParents,function(){var e=Object(D.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processElement(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",this.parentInfoForDetailsView);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processElement",value:function(){var e=Object(D.a)(E.a.mark((function e(t){var n,r,i,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("|"),e.next=3,V[this.projectId].callSelector(n[0],Object(s.a)({},u.id,n[1])).single();case 3:r=e.sent,i=de(this.sections,n[0]),a=Je(i.formModel),this.parentInfoForDetailsView.push({sectionId:n[0],element:r,txt:r[i.formModel[a].fieldName]});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ot=function(e){var t=e.projectId,n=e.parentsInfo,r=e.sections,i=Object(ie.useState)([]),a=Object(oe.a)(i,2),c=a[0],s=a[1];return Object(ie.useEffect)((function(){var e=!0;return e&&function(){var i=Object(D.a)(E.a.mark((function i(){var a;return E.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,new xt(n,t,r).get();case 2:a=i.sent,e&&s(a);case 4:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!1}}),[n,t,r]),Object(he.jsxs)("div",{className:"p-3 pt-0",children:[Object(he.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Parent elements:"}),c.map((function(e,n){return Object(he.jsx)(pt.b,{to:ft(se.projectSectionEleDetails,[{name:G.projectId,value:t},{name:G.sectionId,value:e.sectionId},{name:G.elementId,value:e.element.id}]),className:"mr-2 py-1 px-4 bg-gray-200 hover:bg-gray-300 bg-opacity-80 rounded-md text-sm font-semibold",children:e.txt},e.element.id)}))]})},yt=function(e){return e.value||null},gt=function(e){return e.value?"\u2713":null},wt=function(e){var t=e.value;return t?Te("yyyy/MM/dd hh:mm",new Date(t)):null},kt=function(e){var t=e.value;return t?Te("yyyy/MM/dd",new Date(t)):null};var St=function(e,t){return function(e,t){var n=e.find((function(e){return e.value==t}));return"undefined"===typeof n?null:n.label}(e,t.value)},Nt=function(e){switch(e.componentCode){case a.basicInput:case a.basicTextarea:return yt;case a.basicSelect:case a.basicRadio:return St.bind(null,e.options);case a.basicCheckbox:return gt;case a.datePicker:return kt;case a.dateTimePicker:return wt;default:return yt}},It=function(e){var t=e.projectId,n=e.sectionId,r=e.mode,i=e.elementId,a=r===z.add?"bi-plus":"bi-pencil",c=[{name:G.projectId,value:t},{name:G.sectionId,value:n}];r===z.edit&&c.push({name:G.elementId,value:i});var s=ft(r===z.add?se.projectSectionAddEle:se.projectSectionEditEle,c);return Object(he.jsx)(pt.b,{to:s,className:"absolute bottom-5 right-7 md:bottom-7 md:right-10 bg-prussian-blue-400 text-white text-xl shadow-xl rounded-3xl h-14 w-14 flex items-center justify-center",children:Object(he.jsx)("i",{className:a})})},Ct=function(){var e=Object(ie.useState)(null),t=Object(oe.a)(e,2),n=t[0],r=t[1],i=Object(xe.b)((function(e){return e.project})),a=Object(it.h)(),c=a[G.projectId],s=a[G.sectionId],o=a[G.elementId];return Object(ie.useEffect)((function(){var e=!0;return e&&function(){var t=Object(D.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ue(c)&&c&&s&&o&&i&&i[d._settings][0].id===c){t.next=2;break}return t.abrupt("return",r(void 0));case 2:return t.next=4,V[c].callSelector(s,{id:o}).single();case 4:n=t.sent,e&&r(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[c,s,o,i]),void 0===n?c&&s?Object(he.jsx)(it.a,{to:ft(se.projectSectionElesList,[{name:G.projectId,value:c},{name:G.sectionId,value:s}])}):Object(he.jsx)(it.a,{to:se.projectsList}):Object(he.jsxs)(ct,{headerText:"Details",children:[null===n?Object(he.jsx)(st,{}):Object(he.jsx)(Et,{element:n,formModels:de(i[d._sections],s).formModel}),null!==n&&n.parentsInfo&&Array.isArray(n.parentsInfo)&&n.parentsInfo.length>0&&Object(he.jsx)(Ot,{projectId:c,parentsInfo:n.parentsInfo,sections:i[d._sections]}),null!==n&&Object(he.jsx)(It,{projectId:c,sectionId:s,elementId:o,mode:z.edit})]})},Et=function(e){var t=e.element,n=e.formModels;return Object(he.jsx)("div",{className:"p-3",children:n.map((function(e){return e.label?Object(he.jsx)(Dt,{formModel:e,value:t[e.fieldName]},e.fieldName):null}))})},Dt=function(e){var t=e.formModel,n=e.value;return"undefined"===typeof n?null:Object(he.jsxs)("div",{children:[Object(he.jsx)("p",{className:"text-sm text-gray-500",children:t.label}),Object(he.jsx)("p",{className:"mb-3",children:Nt(t)({value:n})})]})},Ft=function(e){var t=e.children,n=e.tdProps,r=e.elementId,a=Object(it.g)(),c=Object(it.h)();return Object(he.jsx)("td",Object(i.a)(Object(i.a)({onClick:function(){return a(ft(se.projectSectionEleDetails,[{name:G.projectId,value:c.projectId},{name:G.sectionId,value:c.sectionId},{name:G.elementId,value:r}]))},className:"px-6 py-4 cursor-pointer"},n),{},{children:t}))},Pt=n(36),Mt=function(e){var t=e.sectionInfo,n=e.sectionData,r=function(e){var t=Object(ie.useMemo)((function(){return[]}),[e.id,e.formModel]);return Object(ie.useMemo)((function(){return e.formModel.forEach((function(n){e.id&&n.label&&t.push({Header:n.label,accessor:n.fieldName,Cell:Nt(n)})}))}),[e.id,e.formModel,t]),t}(t),a=Object(Pt.useTable)({columns:r,data:n},Pt.useSortBy),c=a.getTableProps,s=a.getTableBodyProps,o=a.headerGroups,u=a.rows,l=a.prepareRow;return Object(he.jsxs)("table",Object(i.a)(Object(i.a)({className:"table-auto w-full divide-y divide-gray-200"},c()),{},{children:[Object(he.jsx)("thead",{className:"bg-gray-50",children:o.map((function(e){return Object(he.jsx)("tr",Object(i.a)(Object(i.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(he.jsx)("th",Object(i.a)(Object(i.a)({className:"px-6 py-2 text-xs text-gray-500 text-left"},e.getHeaderProps(e.getSortByToggleProps())),{},{children:e.render("Header")}))}))}))}))}),Object(he.jsx)("tbody",Object(i.a)(Object(i.a)({className:"divide-y divide-gray-200"},s()),{},{children:u.map((function(e){return l(e),Object(he.jsx)("tr",Object(i.a)(Object(i.a)({className:"whitespace-nowrap"},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(he.jsx)(Ft,{tdProps:e.getCellProps(),elementId:e.row.original.id,children:e.render("Cell")},"".concat(e.column.id).concat(e.row.id))}))}))}))}))]}))},Tt=function(e){var t=e.sectionTitle,n=e.sectionId,r=e.projectId;return Object(he.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(he.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(he.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(he.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"Nothing here yet"}),Object(he.jsxs)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:["There are no items in ",t]}),Object(he.jsx)("p",{className:"leading-relaxed mb-3",children:"Create a new entry to populate this list"}),Object(he.jsx)("div",{className:"flex flex-wrap mt-7",children:Object(he.jsx)(pt.b,{to:ft(se.projectSectionAddEle,[{name:G.projectId,value:r},{name:G.sectionId,value:n}]),className:"flex-grow mx-2 mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Create a new element"})})]})})})},_t=function(){var e=Object(it.h)(),t=e[G.projectId],n=e[G.sectionId],r=Object(xe.b)((function(e){return e.project})),i=Object(ie.useState)(null),a=Object(oe.a)(i,2),c=a[0],s=a[1];if(Object(ie.useEffect)((function(){var e=!0;return e&&function(){var r=Object(D.a)(E.a.mark((function r(){var i;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(ue(t)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,V[t].callSelector(n).multiple();case 4:i=r.sent,e&&s(i);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){e=!1}}),[n,t]),null===r)return Object(he.jsx)(it.a,{to:se.projectsList});var o=de(r[d._sections],n);return null===c?Object(he.jsx)("div",{children:"Loading..."}):0===c.length?Object(he.jsx)(Tt,{sectionId:n,sectionTitle:o.title,projectId:t}):Object(he.jsxs)(ct,{headerText:o.title,children:[Object(he.jsx)(Mt,{sectionInfo:o,sectionData:c}),Object(he.jsx)(It,{projectId:t,sectionId:n,mode:z.add})]})},At=[{componentCode:a.hiddenInput,fieldName:u.id},{componentCode:a.hiddenInput,fieldName:u.dateCreation},{componentCode:a.basicInput,fieldName:"title",type:"text",value:"",label:"Project",required:!0},{componentCode:a.basicTextarea,fieldName:"description",value:"",label:"Description",required:!0}],Vt=function(){function e(t,n){Object(b.a)(this,e),this.projectSettings=t,this.sectionsDefinitions=n}return Object(j.a)(e,[{key:"set",value:function(){var e;I.dispatch({type:r.setCurrentProject,payload:(e={},Object(s.a)(e,d._settings,this.projectSettings.concat()),Object(s.a)(e,d._sections,this.sectionsDefinitions.concat()),e)})}}]),e}(),Lt=function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.args=r}return Object(j.a)(e,[{key:"autoDelete",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.args).length){e.next=2;break}return e.abrupt("return","Fatal error: trying to delete without any parameter");case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Bt=n(6),Ut=n(7),Rt="286b88f2ceb76ce1e7d28117bb2a7659";function Wt(e,t){return m.a.AES.encrypt(e,t).toString()}function qt(e,t){return m.a.AES.decrypt(e,t).toString()}var Ht=function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.owner=void 0,this.undecryptedKey=void 0,this.keyIdentifier=void 0}return Object(j.a)(e,[{key:"getUserKey",value:function(){if(this.setOwner(),this.setUndecryptedKey(),this.undecryptedKey)return this.makeKeyIdentifier(),e.userKeys[this.keyIdentifier]||this.decryptUserKey(),this.returnUserUnencryptedKey()}},{key:"logNoKeyError",value:function(){K.error("ERROR: skipping encryption as no key was found for user ".concat(this.owner,". Did you forget to pass the user key in the options when initializing DbInit?"))}},{key:"setOwner",value:function(){this.owner=this.element[this.dbConnector.DS[this.section].ownerIdentifier]}},{key:"setUndecryptedKey",value:function(){this.undecryptedKey="object"===typeof this.dbConnector.options.encryptionKeys&&this.dbConnector.options.encryptionKeys[this.owner]?this.dbConnector.options.encryptionKeys[this.owner]:void 0}},{key:"makeKeyIdentifier",value:function(){this.keyIdentifier="".concat(this.owner).concat(this.undecryptedKey)}},{key:"decryptUserKey",value:function(){e.userKeys[this.keyIdentifier]=qt(this.undecryptedKey,Rt)}},{key:"returnUserUnencryptedKey",value:function(){return e.userKeys[this.keyIdentifier]}}],[{key:"decryptUserKey",value:function(e){return Wt(e,Rt)}}]),e}();Ht.userKeys={};var Kt=function(e){Object(Bt.a)(n,e);var t=Object(Ut.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"do",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(u).includes(n)||this.encrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){this.element[t]&&(this.element[t]=Wt(this.element[t],e))}}]),n}(Ht);function zt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(D.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFile();case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={types:[{name:e,description:"Anita project data file",accept:{"application/json":[".json"]}}]};return window.showSaveFilePicker(t)}function Qt(){return(Qt=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createWritable();case 2:return r=e.sent,e.next=5,r.write(n);case 5:return e.next=7,r.close();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n&&(r.writable=!0,r.mode="readwrite"),e.next=4,t.queryPermission(r);case 4:if(e.t0=e.sent,"granted"!==e.t0){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.requestPermission(r);case 9:if(e.t1=e.sent,"granted"!==e.t1){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $t=function(){function e(t,n){Object(b.a)(this,e),this.projectSettings=t,this.fileHandle=n,this.copyOfProjectSettings=void 0}return Object(j.a)(e,[{key:"save",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setProjectSettingsClone(),this.setFileHandleOnProjectSettingsClone(),this.doStoreProjectSettings(),e.abrupt("return",this.copyOfProjectSettings);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectSettingsClone",value:function(){this.copyOfProjectSettings=O()(this.projectSettings)}},{key:"setFileHandleOnProjectSettingsClone",value:function(){this.copyOfProjectSettings.fileHandle=this.fileHandle}},{key:"doStoreProjectSettings",value:function(){V.system.callInsertor(T.projects,this.copyOfProjectSettings).autoInsert()}}]),e}(),Zt=function(){function e(t){Object(b.a)(this,e),this.dbConnector=t,this.data=void 0}return Object(j.a)(e,[{key:"save",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setData(),this.saveDataToDisk(),e.next=4,new $t(this.dbConnector.dbStore.db[d._settings][0],this.dbConnector.options.projectInfo.fileHandle).save();case 4:return e.next=6,new Vt(this.dbConnector.dbStore.db[d._settings],this.dbConnector.dbStore.db[d._sections]).set();case 6:return e.next=8,(new ut).load();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){this.data=JSON.stringify(this.dbConnector.dbStore.db)}},{key:"saveDataToDisk",value:function(){!function(e,t){Qt.apply(this,arguments)}(this.dbConnector.options.projectInfo.fileHandle,this.data)}}]),e}(),en=function(){function e(t,n,r){Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.element=r,this.index=void 0}return Object(j.a)(e,[{key:"save",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setSectionStore(),this.checkIfElementInStoreAndSetIndex(),this.addToStore(),e.next=5,new Zt(this.dbConnector).save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkIfElementInStoreAndSetIndex",value:function(){var e=this,t=this.dbConnector.dbStore.db[this.section],n=t.findIndex((function(t){return e.element[e.dbConnector.DS[e.section].pk]===t[e.dbConnector.DS[e.section].pk]}));this.index=n>=0?n:t.length}},{key:"setSectionStore",value:function(){this.dbConnector.dbStore.db[this.section]||(this.dbConnector.dbStore.db[this.section]=[])}},{key:"addToStore",value:function(){this.dbConnector.dbStore.db[this.section][this.index]=this.element}}]),e}(),tn=function(e){Object(Bt.a)(n,e);var t=Object(Ut.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"autoInsert",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Kt(this.dbConnector,this.section,this.element).do();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(en),nn=function(e){Object(Bt.a)(n,e);var t=Object(Ut.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"do",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.getUserKey())){e.next=3;break}return e.abrupt("return",this.logNoKeyError());case 3:for(n in this.element)Object.values(u).includes(n)||this.decrypt(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(e,t){this.element[t]&&(this.element[t]=qt(this.element[t],e))}}]),n}(Ht),rn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(b.a)(this,e),this.dbConnector=t,this.section=n,this.args=r,this.results=void 0}return Object(j.a)(e,[{key:"single",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:if(this.results.length){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this.results.find((function(e){return t.filterKeys(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterKeys",value:function(e){for(var t=Object.keys(this.args),n=!0,r=0;n&&r<t.length;)n=e[t[r]]===this.args[t[r]],r++;return n}},{key:"multiple",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doSelect();case 2:return e.abrupt("return",this.results);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.multiple();case 2:return e.abrupt("return",this.results.length);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doSelect",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.results=this.dbConnector.dbStore.db[this.section]&&this.dbConnector.dbStore.db[this.section].length?this.dbConnector.dbStore.db[this.section]:[],e.next=3,this.handleDecryption();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDecryption",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted||!this.results.length){e.next=8;break}t=0;case 2:if(!(t<this.results.length)){e.next=8;break}return e.next=5,new nn(this.dbConnector,this.section,this.results[t]).do();case 5:t++,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),an=function(){function e(t){Object(b.a)(this,e),this.sections=t,this.allSez=[],this.datastructure={}}return Object(j.a)(e,[{key:"extend",value:function(){var e=this;return this.sections.forEach((function(t){return e.buildSectionDefinition(t)})),this.allSez.forEach((function(t){return e.buildAndAddAllSections(t)})),this.datastructure}},{key:"buildSectionDefinition",value:function(e){var t={name:e.id,fields:Object.values(u)};e.formModel.forEach((function(e){t.fields.push(e.fieldName)})),this.allSez.push(t)}},{key:"buildAndAddAllSections",value:function(e){var t=new J(this.allSez,e.name,e.fields).make();this.addToTempTs(t)}},{key:"addToTempTs",value:function(e){this.datastructure[e.name]=e}}]),e}();function cn(e){return sn.apply(this,arguments)}function sn(){return(sn=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.projectInfo.fileHandle){e.next=4;break}return e.next=3,Jt("anita-fh-".concat(t.projectInfo.id));case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,Yt(t.projectInfo.fileHandle,!0);case 6:return e.abrupt("return",t.projectInfo.fileHandle);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var on=function(){function e(t,n){var r;Object(b.a)(this,e),this.dbConnector=t,this.options=n,this.db=(r={},Object(s.a)(r,d._settings,[]),Object(s.a)(r,d._sections,[]),r),this.contents=void 0}return Object(j.a)(e,[{key:"initDB",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.projectInfo){e.next=2;break}throw new Error("No projectInfo passed to DbConnector.\nTo retrieve a project from a local file, pass the an Object of type LocalProjectSettings as value of projectInfo to the options of DbConnector");case 2:return e.next=4,cn(this.options);case 4:if(t=e.sent,!this.options.projectInfo.fileHandle){e.next=10;break}return e.next=8,this.initializeExistingProject();case 8:e.next=11;break;case 10:this.options.projectInfo.fileHandle=t;case 11:return e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){}},{key:"initializeExistingProject",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doReadFile();case 2:this.parseFileContents(),this.makedDS();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doReadFile",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt(this.options.projectInfo.fileHandle);case 2:this.contents=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.db=JSON.parse(this.contents)}},{key:"makedDS",value:function(){this.dbConnector.DS=Object.assign(this.dbConnector.DS,new an(this.db[d._sections]).extend())}}]),e}(),un={insertor:tn,selector:rn,updator:function(e){Object(Bt.a)(n,e);var t=Object(Ut.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"autoUpdate",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dbConnector.options.encrypted){e.next=3;break}return e.next=3,this.handleEncryption();case 3:return e.next=5,this.save();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEncryption",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Kt(this.dbConnector,this.section,this.element).do();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(en),deletor:Lt,dbStore:on},ln=function(){function e(t,n){var r;Object(b.a)(this,e),this.project=t,this.mode=n,this.projectDataToSave=(r={},Object(s.a)(r,d._settings,[]),Object(s.a)(r,d._sections,[]),r)}return Object(j.a)(e,[{key:"save",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projectDataToSave[d._settings]=this.project[d._settings].concat(),this.projectDataToSave[d._sections]=this.project[d._sections].concat(),this.setDateCreation(),this.mode===z.edit&&this.setLastModified(),V[this.projectDataToSave[d._settings][0].id]){e.next=7;break}return e.next=7,this.initDbInstance();case 7:return e.next=9,this.saveSettings();case 9:return e.next=11,this.saveSections();case 11:return this.fileHandleOnlyActions(),e.abrupt("return",this.projectDataToSave);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDateCreation",value:function(){this.projectDataToSave[d._settings][0].dateCreation=new Date((new Date).toUTCString()).toISOString()}},{key:"setLastModified",value:function(){this.projectDataToSave[d._settings][0].lastModified=new Date((new Date).toUTCString()).toISOString()}},{key:"initDbInstance",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(un,{projectInfo:this.projectDataToSave[d._settings][0]}).init();case 2:V[this.projectDataToSave[d._settings][0].id]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSettings",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V[this.projectDataToSave[d._settings][0].id].callInsertor(d._settings,this.projectDataToSave[d._settings][0]).autoInsert();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSections",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(this.projectDataToSave[d._sections],function(){var e=Object(D.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V[t.projectDataToSave[d._settings][0].id].callInsertor(d._sections,n).autoInsert();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fileHandleOnlyActions",value:function(){if(this.mode===z.add)return V[this.projectDataToSave[d._settings][0].id].dbStore.initializeExistingProject()}}]),e}(),dn=[{componentCode:a.hiddenInput,fieldName:u.id},{componentCode:a.basicInput,fieldName:"title",type:"text",label:"Section name",required:!0},{componentCode:a.childOfSelectorForSection,fieldName:"childOf",label:"Parent sections:",options:[]}],hn=[{componentCode:a.optionsMaker,fieldName:"options",type:"text",label:"Possible values",prerequisites:[{componentCode:[a.basicSelect,a.basicRadio]}],required:!0},{componentCode:a.basicCheckbox,fieldName:"required",value:!1,label:"Required"}],fn=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:l,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",required:!0,width:"2"}].concat(hn),pn=[{componentCode:a.basicInput,fieldName:"label",type:"text",label:"Field label",required:!0,width:"7"},{componentCode:a.basicSelect,fieldName:"componentCode",options:l,value:1,label:"Data type",required:!0,width:"3"},{componentCode:a.basicInput,fieldName:"fieldName",type:"text",label:"Identifier",disabled:!0,required:!0,width:"2"}].concat(hn),bn=function(e){var t,n,a=e.indexSection,c=e.indexFormElement,o=e.element,u=Object(it.h)(),l=Object(xe.b)((function(e){return e.formProject.original[d._sections]})),h=(u[G.projectId]?z.edit:z.add)===z.edit&&(t=l[a],(n=o.fieldName)&&t&&t.formModel.some((function(e){return e.fieldName===n})))?pn:fn;return Object(he.jsx)(tt,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{formModel:h,handleChange:function(e,t,n,a){I.dispatch({type:r.updateFormProjectUpdateFormModelOfSection,payload:{indexSection:e,indexFormElement:t,formElement:Object(i.a)(Object(i.a)({},o),{},Object(s.a)({},n,a))}})}.bind(void 0,a,c),handleOptionsChange:function(e,t,n,a,c,o){I.dispatch({type:r.updateFormProjectUpdateFormModelOptionValue,payload:{indexSection:e,indexFormElement:t,indexOptions:n,formElement:Object(i.a)(Object(i.a)({},a),{},Object(s.a)({},c,o))}})}.bind(void 0,a,c),handleClickAddOption:function(e,t){I.dispatch({type:r.updateFormProjectUpdateFormModelAddOption,payload:{indexSection:e,indexFormElement:t}})}.bind(void 0,a,c),handleClickDeleteOption:function(e,t,n){I.dispatch({type:r.updateFormProjectUpdateFormModelDeleteOption,payload:{indexSection:e,indexFormElement:t,indexOptions:n}})}.bind(void 0,a,c)})))},jn=function(e){var t=e.section,n=e.sectionIndex,a=Object(xe.b)((function(e){return e.formProject.project[d._sections]})),c=t.formModel.map((function(e){return Object.values(u).includes(e.fieldName)?null:e.fieldName})).filter((function(e){return null!==e})),o=function(e){I.dispatch({type:r.updateFormProjectRemoveFieldFromSection,payload:{sectionIndex:n,fieldIndex:e}})};return Object(he.jsxs)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:[Object(he.jsxs)("div",{children:[Object(he.jsx)("h3",{className:"text-md font-bold",children:"Section # ".concat(n+1)}),Object(he.jsx)("hr",{className:"mt-4"})]}),Object(he.jsx)("div",{className:"pt-4",children:Object(he.jsx)(tt,{formModel:dn,element:t,handleChange:function(e,n,a){I.dispatch({type:r.updateFormProjectUpdateSection,payload:{section:Object(i.a)(Object(i.a)({},t),{},Object(s.a)({},n,a)),index:e}})}.bind(void 0,n),sectionId:t.id})}),Object(he.jsx)("h4",{className:"pl-2 font-bold mb-2 mt-6",children:"Section element fields"}),t.formModel.map((function(e,r){return c.includes(e.fieldName)?Object(he.jsxs)("div",{className:"border border-transparent hover:border-prussian-blue-500 shadow rounded mb-3 p-4",children:[Object(he.jsx)(bn,{indexFormElement:r,indexSection:n,element:e}),c.length<2?null:Object(he.jsx)("div",{className:"flex justify-end",children:Object(he.jsx)("button",{onClick:o.bind(void 0,r),className:"text-sm py-1 px-3 ".concat(He),children:"Delete field"})})]},"".concat(t.id,"-").concat(r)):null})),Object(he.jsxs)("div",{className:"flex items-end mt-10 mb-1",children:[a.length>1&&Object(he.jsx)("button",{onClick:function(){I.dispatch({type:r.updateFormProjectRemoveSection,payload:n})},className:"py-2 px-4 text-sm ".concat(He),children:"Delete section"}),Object(he.jsx)("button",{onClick:function(){I.dispatch({type:r.updateFormProjectAddFieldToSection,payload:n})},className:"ml-auto py-2 px-4 text-sm ".concat(qe),children:"Add field"})]})]})},mn=function(){var e=Object(it.h)().projectId,t=Object(xe.b)((function(e){return e.formProject.project})),n=Object(xe.b)((function(e){return e.formElesValidState})),a=Object(it.g)();return Object(he.jsxs)("span",{children:[Object(he.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(he.jsx)(tt,{formModel:At,element:t[d._settings][0],handleChange:function(e,n){I.dispatch({type:r.updateFormProjectSettings,payload:Object(i.a)(Object(i.a)({},t[d._settings][0]),{},Object(s.a)({},e,n))})}})}),Object(he.jsx)("div",{className:"px-3",children:t[d._sections].map((function(e,t){return Object(he.jsx)(jn,{section:e,sectionIndex:t},e.id)}))}),Object(he.jsx)("div",{className:"mt-5 p-4 bg-white rounded shadow",children:Object(he.jsxs)("div",{className:"flex items-end flex-wrap",children:[Object(he.jsx)("button",{className:"py-2 px-6 mr-3 ".concat(qe),onClick:function(){I.dispatch({type:r.updateFormProjectAddSection})},children:"Add section"}),Object(he.jsx)("button",{className:"ml-auto py-2 px-6 bg-gray-200 font-semibold rounded hover:bg-gray-300 mr-3",onClick:function(){return a(-1)},children:"Cancel"}),Object(he.jsx)("button",{disabled:Object.keys(n).some((function(e){return!1===n[e]})),className:"py-2 px-6 bg-prussian-blue-400 text-white font-semibold rounded hover:bg-prussian-blue-500 disabled:bg-gray-400 disabled:bg-opacity-40 disabled:cursor-not-allowed",onClick:function(){var n=e?z.edit:z.add;new ln(t,n).save(),new Vt(t[d._settings],t[d._sections]).set(),a(ft(se.projectDetails,[{name:G.projectId,value:t[d._settings][0].id}]))},children:"Save"})]})})]})},vn=function(){var e=Object(it.h)(),t=e[G.projectId]?z.edit:z.add,n=e[G.projectId],i=Object(ie.useState)(null),a=Object(oe.a)(i,2),c=a[0],o=a[1];if(Object(ie.useEffect)((function(){var e,r=!0;return t===z.add?o((e={},Object(s.a)(e,d._settings,[{id:v.random(),title:"",description:"",dateCreation:""}]),Object(s.a)(e,d._sections,[{id:v.random(),title:"",formModel:[{}]}]),e)):ue(n)&&n?(r&&function(){var e=Object(D.a)(E.a.mark((function e(){var t,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V[n].callSelector(d._settings).multiple();case 2:return t=e.sent,e.next=5,V[n].callSelector(d._sections).multiple();case 5:i=e.sent,r&&o({_settings:t,_sections:i});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){r=!1}):o(void 0)}),[t,n]),void 0===c)return Object(he.jsx)(it.a,{to:se.projectsList});var u=t===z.add?"Add Project":"Edit Project";return I.dispatch({type:r.setFormProject,payload:c}),Object(he.jsxs)("span",{children:[Object(he.jsx)("div",{className:"p-4 bg-white rounded shadow",children:Object(he.jsx)("h3",{className:"text-xl font-bold",children:u})}),null===c&&Object(he.jsx)(st,{}),null!==c&&Object(he.jsx)(mn,{})]})},xn=function(){function e(){Object(b.a)(this,e),this.fileHandles=void 0,this.fileContents=void 0,this.projectData=void 0,this.localProjectSettings=void 0}return Object(j.a)(e,[{key:"import",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.askForFile();case 2:return e.next=4,this.processFileHandles();case 4:return e.next=6,this.initializeDb();case 6:new Vt(this.projectData[d._settings],this.projectData[d._sections]).set();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"askForFile",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker({multiple:!0}).then((function(e){return e}));case 2:this.fileHandles=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processFileHandles",value:function(){var e=Object(D.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(this.fileHandles,function(){var e=Object(D.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processFileHandle(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processFileHandle",value:function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt(t);case 2:return this.fileContents=e.sent,this.parseFileContents(),e.next=6,new $t(this.projectData[d._settings][0],t).save();case 6:this.localProjectSettings=e.sent,this.dispatchProject(this.projectData[d._settings][0]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseFileContents",value:function(){this.projectData=JSON.parse(this.fileContents)}},{key:"initializeDb",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(un,{projectInfo:this.localProjectSettings}).init();case 2:V[this.projectData[d._settings][0].id]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchProject",value:function(e){I.dispatch({type:r.addProjectToList,payload:e})}}]),e}(),On=function(){var e=Object(it.g)(),t=function(){var t=Object(D.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new xn).import();case 2:e(se.projectsList);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(he.jsx)("div",{className:"container px-5 py-24 mx-auto",children:Object(he.jsx)("div",{className:"p-4 lg:w-2/3 mx-auto",children:Object(he.jsxs)("div",{className:"h-full bg-white shadow px-8 pt-16 pb-16 rounded-lg overflow-hidden text-center relative",children:[Object(he.jsx)("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",children:"No projects found"}),Object(he.jsx)("h1",{className:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3",children:"You do not have any Projects on this device yet"}),Object(he.jsx)("p",{className:"leading-relaxed mb-3",children:"You can create a new project or import one from an existing project file."}),Object(he.jsxs)("div",{className:"flex flex-wrap mt-7",children:[Object(he.jsx)("a",{href:"#",onClick:t,className:"flex-grow mx-2 mt-4 text-white bg-prussian-blue-400 border-0 py-3 px-8 focus:outline-none hover:bg-prussian-blue-500 rounded font-bold text-sm",children:"Import an existing project"}),Object(he.jsx)(pt.b,{to:se.projectAdd,className:"flex-grow mx-2 mt-4 bg-gray-200 border-0 py-3 px-8 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:"Create a new project"})]})]})})})},yn=function(e){var t=e.project;return Object(he.jsxs)("div",{className:"ml-auto",children:[Object(he.jsx)(bt,{project:t}),Object(he.jsxs)(pt.b,{to:ft(se.projectDetails,[{name:G.projectId,value:t.id}]),className:"px-4 py-3 text-white inline-flex items-center leading-none text-sm bg-prussian-blue-400 hover:bg-prussian-blue-500 rounded",children:[Object(he.jsx)("i",{className:"bi-info-circle mr-2"}),"Project details"]})]})},gn=function(){function e(t){Object(b.a)(this,e),this.projectId=t,this.projectInfo=void 0}return Object(j.a)(e,[{key:"loadProject",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProjectInfoFromIndexedDB();case 2:return e.next=4,this.createNewInstanceOfDbConnectorForrProject();case 4:this.callCurrentProjectSetter();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjectInfoFromIndexedDB",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.system.callSelector(T.projects,{id:this.projectId}).single();case 2:this.projectInfo=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNewInstanceOfDbConnectorForrProject",value:function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(un,{projectInfo:this.projectInfo}).init();case 2:V[this.projectId]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callCurrentProjectSetter",value:function(){new Vt(V[this.projectId].dbStore.db[d._settings],V[this.projectId].dbStore.db[d._sections]).set()}}]),e}(),wn=function(e){var t=e.project;return Object(he.jsx)("button",{onClick:function(){return new gn(t.id).loadProject()},className:"px-4 py-2 text-white ml-auto inline-flex items-center md:mb-2 lg:mb-0 rounded bg-green-500 hover:bg-green-600 text-sm",children:"Load project"})},kn=function(e){var t=e.project,n=Object(xe.b)((function(e){return e.project}));return Object(he.jsx)("div",{className:" mt-4 h-full border-2 border-gray-200 border-opacity-60 rounded-lg bg-white",children:Object(he.jsxs)("div",{className:"p-6",children:[Object(he.jsx)("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",children:t.title}),Object(he.jsx)("p",{className:"text-lg mb-3",children:t.description}),Object(he.jsx)("p",{className:"text-gray-600 text-xs",children:"Created on:"}),Object(he.jsx)("p",{className:"text-md",children:Te("yyyy/MM/dd, at hh:mm",new Date(t.dateCreation))}),Object(he.jsxs)(jt,{children:[Object(he.jsx)(dt,{project:t}),null===n||n[d._settings][0].id!==t.id||void 0===V[t.id]?Object(he.jsx)(wn,{project:t}):Object(he.jsx)(yn,{project:t})]})]})})},Sn=function(){var e=Object(ie.useState)(!1),t=Object(oe.a)(e,2),n=t[0],r=t[1],i=Object(xe.b)((function(e){return e.projects})),a=Array.isArray(i)?i.length:0;return Object(ie.useEffect)((function(){var e=!0;return e&&function(){var e=Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new ut).load();case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){e=!1}}),[a]),Array.isArray(i)&&0===i.length?Object(he.jsx)(it.a,{to:se.projectsNone}):n?Object(he.jsxs)("div",{children:[Object(he.jsx)("div",{className:"md:w-full bg-white border-b-2 rounded border-white",children:Object(he.jsxs)("div",{className:"flex h-full border-t-2 border-prussian-blue-400 border-opacity-60 rounded justify-between",children:[Object(he.jsx)("div",{className:"px-6 py-3",children:Object(he.jsx)("h1",{className:"title-font text-md font-medium text-gray-900",children:"Projects on this device"})}),Object(he.jsxs)("div",{className:"my-2",children:[Object(he.jsx)("a",{"data-tip":!0,"data-for":"importProject",href:"#",onClick:function(){return(new xn).import()},className:"mx-2 my-2 text-white bg-prussian-blue-600 border-0 py-1 px-6 focus:outline-none hover:bg-prussian-blue-700 rounded font-bold text-sm",children:Object(he.jsx)("i",{className:"bi bi-arrow-bar-down"})}),Object(he.jsx)(Ke.a,{id:"importProject",effect:"solid",children:Object(he.jsx)("span",{children:"Import an existing project"})}),Object(he.jsx)(pt.b,{"data-tip":!0,"data-for":"createProject",to:se.projectAdd,className:"mx-2 my-2 text-white bg-prussian-blue-400 border-0 py-1 px-6 focus:outline-none hover:bg-gray-400 rounded font-bold text-sm",children:Object(he.jsx)("i",{className:"bi bi-plus"})}),Object(he.jsx)(Ke.a,{id:"createProject",effect:"solid",children:Object(he.jsx)("span",{children:"Create a new project"})})]})]})}),Object(he.jsx)("div",{className:"p-1 md:w-full",children:i.map((function(e,t){return Object(he.jsx)(kn,{project:e},e.id)}))})]}):Object(he.jsx)("span",{})},Nn=function(){return Object(he.jsxs)(it.d,{children:[Object(he.jsx)(it.b,{path:se.projectsList,element:Object(he.jsx)(Sn,{})}),Object(he.jsx)(it.b,{path:se.projectAdd,element:Object(he.jsx)(vn,{})}),Object(he.jsx)(it.b,{path:se.projectEdit,element:Object(he.jsx)(vn,{})}),Object(he.jsx)(it.b,{path:se.projectsNone,element:Object(he.jsx)(On,{})}),Object(he.jsx)(it.b,{path:se.projectDetails,element:Object(he.jsx)(vt,{})}),Object(he.jsx)(it.b,{path:se.projectSectionElesList,element:Object(he.jsx)(_t,{})}),Object(he.jsx)(it.b,{path:se.projectSectionEleDetails,element:Object(he.jsx)(Ct,{})}),Object(he.jsx)(it.b,{path:se.projectSectionAddEle,element:Object(he.jsx)(ot,{})}),Object(he.jsx)(it.b,{path:se.projectSectionEditEle,element:Object(he.jsx)(ot,{})}),Object(he.jsx)(it.b,{path:"*",element:Object(he.jsx)(it.a,{to:se.projectsList})})]})},In="block py-2.5 px-4 transition duration-200 border-l-2 hover:border-prussian-blue-700 hover:text-prussian-blue-500 text-sm font-semibold",Cn=function(e,t){return"".concat(In,e===t?" border-prussian-blue-700":" border-transparent")},En=[{to:se.projectsList,txt:"Projects",icon:"bi-files"}],Dn=function(){var e=Object(xe.b)((function(e){return e.project})),t=Object(it.f)();return null===e?Object(he.jsx)("span",{}):Object(he.jsxs)("div",{className:"mt-3",children:[Object(he.jsxs)("div",{className:"block py-2.5 px-4",children:[Object(he.jsx)("p",{className:"text-xs text-gray-600",children:"Current project:"}),Object(he.jsx)("p",{children:e[d._settings][0].title})]}),Object(he.jsx)("div",{className:"block py-2.5 px-4",children:Object(he.jsx)("p",{className:"text-xs text-gray-600",children:"Project sections:"})}),e[d._sections].map((function(n){var r=ft(se.projectSectionElesList,[{name:G.projectId,value:e[d._settings][0].id},{name:G.sectionId,value:n.id}]);return Object(he.jsxs)(pt.b,{to:r,className:Cn(t.pathname,r),children:[Object(he.jsx)("i",{className:"bi-chevron-compact-right"}),Object(he.jsx)("span",{className:"ml-2",children:n.title})]},n.id)}))]})},Fn=function(){var e=Object(it.f)();return Object(he.jsxs)("div",{children:[En.map((function(t){return Object(he.jsxs)(pt.b,{to:t.to,className:Cn(e.pathname,t.to),children:[Object(he.jsx)("i",{className:t.icon}),Object(he.jsx)("span",{className:"ml-2",children:t.txt})]},t.to)})),Object(he.jsx)(Dn,{})]})},Pn=function(e){return Object(he.jsx)("div",{className:"flex-1 p-10 pt-5 overflow-auto",children:e.children})},Mn=function(){return Object(he.jsxs)("div",{className:"bg-white text-gray-700 flex h-14 shadow-md justify-between",children:[Object(he.jsx)("button",{className:"mobile-menu-button p-4 focus:outline-none  md:hidden",onClick:function(){I.dispatch({type:r.toggleSidebar})},children:Object(he.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(he.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),Object(he.jsxs)("div",{className:"relative flex items-center lg:w-auto lg:static md:pl-5 -ml-7 md:ml-0",children:[Object(he.jsx)(pt.b,{to:"/",className:"text-lg font-bold leading-relaxed inline-block mr-4 py-2 whitespace-no-wrap uppercase",children:Object(he.jsx)("img",{src:"".concat("/app","/assets/logo/logo_square.svg"),style:{height:"30px",width:"auto"},alt:"Anita"})}),Object(he.jsxs)(pt.b,{to:"/",className:"hidden md:inline-block mr-4 py-2 whitespace-no-wrap text-prussian-blue-400",children:[Object(he.jsx)("span",{className:"text-md font-bold leading-relaxed uppercase",children:"Anita"}),Object(he.jsx)("sup",{style:{fontVariant:"small-caps"},children:"Beta"})]})]}),Object(he.jsx)("div",{className:"visible md:hidden",children:"\xa0"})]})},Tn=function(e){var t=Object(xe.b)((function(e){return e.layout.sidebar}));return Object(he.jsx)("div",{className:"py-5",children:Object(he.jsxs)("div",{className:"".concat(t," sidebar h-full bg-white shadow rounded-sm text-prussian-blue-500 w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform md:relative md:translate-x-0 transition duration-200 ease-in-out"),children:[Object(he.jsx)("nav",{children:e.children}),Object(he.jsxs)("div",{className:"absolute bottom-1 text-xs text-gray-400",children:[Object(he.jsxs)("p",{className:"inline-block mr-1",children:["v","0.7.0"]}),"|",Object(he.jsxs)("a",{className:"ml-1",href:"https://github.com/anita-app/anita/issues",target:"_blank",rel:"noreferrer",children:[Object(he.jsx)("i",{className:"bi-bug","data-tip":!0,"data-for":"reportBug"}),Object(he.jsx)(Ke.a,{id:"reportBug",effect:"solid",children:Object(he.jsx)("span",{children:"Report a bug"})})]})]})]})})},_n=function(){return Object(he.jsxs)(pt.a,{children:[Object(he.jsx)(Mn,{}),Object(he.jsxs)("div",{className:"relative admin-container flex",children:[Object(he.jsx)(Tn,{children:Object(he.jsx)(Fn,{})}),Object(he.jsx)(Pn,{children:Object(he.jsx)(Nn,{})})]})]})},An=n(22),Vn=n.n(An),Ln=(n(81),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Bn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}(new ce).init(),Vn.a.render(Object(he.jsx)(ae.a.StrictMode,{children:Object(he.jsx)(xe.a,{store:I,children:Object(he.jsx)(_n,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/app","/service-worker.js");Ln?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Bn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Bn(t,e)}))}}()}},[[82,1,2]]]);
//# sourceMappingURL=main.1912d912.chunk.js.map