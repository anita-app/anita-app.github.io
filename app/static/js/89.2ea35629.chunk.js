!function(){"use strict";var e={8089:function(e,t,a){var n,o,r=a(4165),i=a(5861),l=a(7762),s=a(5671),c=a(3144),u=function(){function e(){(0,s.Z)(this,e)}return(0,c.Z)(e,null,[{key:"getUtcIsoString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return new Date(e.toUTCString()).toISOString()}},{key:"areEqual",value:function(e,t){var a=new Date(e||0),n=new Date(t||0);return a.getTime()===n.getTime()}},{key:"firstIsAfterSecond",value:function(e,t){var a=new Date(e||0),n=new Date(t||0);return a.getTime()>n.getTime()}}]),e}();!function(e){e.id="id",e.createdAt="createdAt",e.parentsInfo="parentsInfo",e.updatedAt="updatedAt",e.createdBy="createdBy"}(n||(n={})),function(e){e._settings="_settings",e._sections="_sections"}(o||(o={}));var d=a(5102),f=function(){function e(t,a,n){(0,s.Z)(this,e),this.lastSync=t,this.localData=a,this.remoteData=n,this.delta={remote:{delete:{},insert:{},update:{}},remoteData:{},local:{delete:{},insert:{},update:{}},localData:{}},this.localElementsMerged={}}return(0,c.Z)(e,[{key:"compare",value:function(){for(var e in this.remoteData||(this.remoteData={}),this.remoteData)this.compareSectionStartingFromRemoteElements(e);return this.handleAllLocalElementsNotInRemote(),this.delta.remoteData=this.applyDeltaToData("remote",this.remoteData),this.delta.localData=this.applyDeltaToData("local",this.localData),this.delta}},{key:"compareSectionStartingFromRemoteElements",value:function(e){var t=this;this.localElementsMerged[e]=[];var a=n.id;if(this.remoteData[e]&&this.remoteData[e].length>0)for(var o=function(n,o){try{var r=t.localData[e].find((function(o){return o[a]===t.remoteData[e][n][a]}));t.toDoIfLocalElementExistsOrNot(n,e,r)}catch(i){d.error(i)}},r=0,i=this.remoteData[e].length;r<i;r++)o(r)}},{key:"toDoIfLocalElementExistsOrNot",value:function(e,t,a){a?this.checkWhatToUpdateBetweenRemoteAndLocalElement(t,a,e):this.checkIfShouldInsertRemoteInLocalOrDeleteFromRemote(t,e)}},{key:"checkWhatToUpdateBetweenRemoteAndLocalElement",value:function(e,t,a){var o=n.id,r=this.remoteData[e][a],i=this.getDateCompareField(this.remoteData[e][a],t);if(!u.areEqual(r[i],t[i])){var l=u.firstIsAfterSecond(r[i],t[i])?"local":"remote",s="local"===l?r:t;this.addElesForScope(l,"update",e,s)}t[o]&&this.addToLocalElementsMerged(e,t)}},{key:"checkIfShouldInsertRemoteInLocalOrDeleteFromRemote",value:function(e,t){var a=this.remoteData[e][t][n.updatedAt]?n.updatedAt:n.createdAt,o=u.firstIsAfterSecond(this.remoteData[e][t][a],this.lastSync)||!this.lastSync?"local":"remote",r="local"===o?"insert":"delete";this.addElesForScope(o,r,e,this.remoteData[e][t]),"remote"===o&&this.addToLocalElementsMerged(e,this.remoteData[e][t])}},{key:"handleAllLocalElementsNotInRemote",value:function(){for(var e in this.localData)this.handleLocalElementsNotInRemoteBySection(e)}},{key:"handleLocalElementsNotInRemoteBySection",value:function(e){var t,a,o=this,r=n.id,i=null!==(t=this.localElementsMerged)&&void 0!==t&&null!==(a=t[e])&&void 0!==a&&a.length?this.localData[e].filter((function(t){return t[r]&&!o.localElementsMerged[e].includes(t[r])})):this.localData[e];this.shouldElementsOnlyInLocalBeDeletedOrAddedToRemote(e,i)}},{key:"shouldElementsOnlyInLocalBeDeletedOrAddedToRemote",value:function(e,t){if(t)for(var a=0,o=t.length;a<o;a++){var r=t[a][n.updatedAt]?n.updatedAt:n.createdAt,i=u.firstIsAfterSecond(t[a][r],this.lastSync)||!this.lastSync?"remote":"local",l="remote"===i?"insert":"delete";this.addElesForScope(i,l,e,t[a])}}},{key:"addToLocalElementsMerged",value:function(e,t){var a=n.id;t[a]&&this.localElementsMerged[e].push(t[a])}},{key:"addElesForScope",value:function(t,a,n,o){"delete"===a&&e.nonDeletableSections.includes(n)||(this.delta[t][a]||(this.delta[t][a]={}),this.delta[t][a]||(this.delta[t][a]={}),this.delta[t][a][n]||(this.delta[t][a][n]=[]),this.delta[t][a][n].push(o))}},{key:"getDateCompareField",value:function(e,t){return e[n.updatedAt]||t[n.updatedAt]?n.updatedAt:n.createdAt}},{key:"applyDeltaToData",value:function(e,t){for(var a in this.delta[e]){var o=a,r=this.delta[e][o];for(var i in r){var s=i;if("object"===typeof r[s]){var c,u=(0,l.Z)(r[s]);try{var d=function(){var e,a=c.value;if("delete"===o)t[s]=null===t||void 0===t||null===(e=t[s])||void 0===e?void 0:e.filter((function(e){return e[n.id]!==a[n.id]}));else if("insert"===o)t[s]||(t[s]=[]),t[s].push(a);else if("update"===o){var r=t[s].findIndex((function(e){return e[n.id]===a[n.id]}));-1!==r&&(t[s][r]=a)}};for(u.s();!(c=u.n()).done;)d()}catch(f){u.e(f)}finally{u.f()}}}}return t}}]),e}();f.nonDeletableSections=Object.values(o),self.onmessage=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var a,n,o,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,n=a.lastSync,o=a.localData,i=a.remoteData,l=new f(n,o,i).compare(),self.postMessage(l);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.m=e,a.x=function(){var e=a.O(void 0,[60],(function(){return a(8089)}));return e=a.O(e)},function(){var e=[];a.O=function(t,n,o,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return"static/js/"+e+".d10a5730.chunk.js"},a.miniCssF=function(e){},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/app/",function(){var e={89:1};a.f.i=function(t,n){e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkanita_app=self.webpackChunkanita_app||[],n=t.push.bind(t);t.push=function(t){var o=t[0],r=t[1],i=t[2];for(var l in r)a.o(r,l)&&(a.m[l]=r[l]);for(i&&i(a);o.length;)e[o.pop()]=1;n(t)}}(),function(){var e=a.x;a.x=function(){return a.e(60).then(e)}}();a.x()}();
//# sourceMappingURL=89.2ea35629.chunk.js.map