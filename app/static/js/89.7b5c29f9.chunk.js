!function(){"use strict";var t={8089:function(t,e,a){var n,r,i=a(4165),o=a(5861),l=a(7762),s=a(5671),c=a(3144),u=function(){function t(){(0,s.Z)(this,t)}return(0,c.Z)(t,null,[{key:"getUtcIsoString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return new Date(t.toUTCString()).toISOString()}},{key:"areEqual",value:function(t,e){var a=new Date(t||0),n=new Date(e||0);return a.getTime()===n.getTime()}},{key:"firstIsAfterSecond",value:function(t,e){var a=new Date(t||0),n=new Date(e||0);return a.getTime()>n.getTime()}}]),t}();!function(t){t._settings="_settings",t._sections="_sections"}(n||(n={})),function(t){t.id="id",t.createdAt="createdAt",t.parentsInfo="parentsInfo",t.updatedAt="updatedAt",t.createdBy="createdBy"}(r||(r={}));var d=a(5102),f=function(){function t(e,a,n){(0,s.Z)(this,t),this.lastSync=e,this.localData=a,this.remoteData=n,this.delta={remote:{delete:{},insert:{},update:{}},remoteData:{},local:{delete:{},insert:{},update:{}},localData:{}},this.localElementsMerged={}}return(0,c.Z)(t,[{key:"compare",value:function(){for(var t in this.remoteData||(this.remoteData={}),this.remoteData)this.handleSection(t);return this.handleAllLocalElements(),this.delta.remoteData=this.applyDeltaToData("remote",this.remoteData),this.delta.localData=this.applyDeltaToData("local",this.localData),this.delta}},{key:"handleSection",value:function(t){var e=this;this.localElementsMerged[t]=[];var a=r.id;if(this.remoteData[t]&&this.remoteData[t].length>0)for(var n=function(n,r){try{var i=e.localData[t].find((function(r){return r[a]===e.remoteData[t][n][a]}));i&&e.toDoIfLocalElementExistsOrNot(n,t,i)}catch(o){d.error(o)}},i=0,o=this.remoteData[t].length;i<o;i++)n(i)}},{key:"applyDeltaToData",value:function(t,e){for(var a in this.delta[t]){var n=a,i=this.delta[t][n];for(var o in i){var s=o;if("object"===typeof i[s]){var c,u=(0,l.Z)(i[s]);try{var d=function(){var t,a=c.value;if("delete"===n)e[s]=null===e||void 0===e||null===(t=e[s])||void 0===t?void 0:t.filter((function(t){return t[r.id]!==a[r.id]}));else if("insert"===n)e[s]||(e[s]=[]),e[s].push(a);else if("update"===n){var i=e[s].findIndex((function(t){return t[r.id]===a[r.id]}));-1!==i&&(e[s][i]=a)}};for(u.s();!(c=u.n()).done;)d()}catch(f){u.e(f)}finally{u.f()}}}}return e}},{key:"toDoIfLocalElementExistsOrNot",value:function(t,e,a){a?this.checkWhatToUpdate(e,a,t):this.checkIfInsertOrDelete(e,t)}},{key:"checkWhatToUpdate",value:function(t,e,a){var n=r.id,i=this.remoteData[t][a];if(!u.areEqual(i[r.updatedAt],e[r.updatedAt])){var o=u.firstIsAfterSecond(i[r.updatedAt],e[r.updatedAt])?"local":"remote",l="local"===o?i:e;this.addElesForScope(o,"update",t,l)}e[n]&&this.addToLocalElementsMerged(t,e)}},{key:"checkIfInsertOrDelete",value:function(t,e){var a=this.remoteData[t][e][r.updatedAt]?r.updatedAt:r.createdAt,n=u.firstIsAfterSecond(this.remoteData[t][e][a],this.lastSync)||!this.lastSync?"local":"remote",i="local"===n?"insert":"delete";this.addElesForScope(n,i,t,this.remoteData[t][e]),"remote"===n&&this.addToLocalElementsMerged(t,this.remoteData[t][e])}},{key:"handleAllLocalElements",value:function(){for(var t in this.localData)this.handleLocalElements(t)}},{key:"handleLocalElements",value:function(t){var e,a,n=this,i=r.id;if(null!==(e=this.localElementsMerged)&&void 0!==e&&null!==(a=e[t])&&void 0!==a&&a.length){var o=this.localData[t].filter((function(e){return e[i]&&!n.localElementsMerged[t].includes(e[i])}));this.elesInLocalDbOnly(t,o)}else this.elesInLocalDbOnly(t,this.localData[t])}},{key:"elesInLocalDbOnly",value:function(t,e){var a=r.updatedAt;if(e)for(var n=0,i=e.length;n<i;n++){var o=u.firstIsAfterSecond(e[n][a],this.lastSync)||!this.lastSync?"remote":"local",l="local"===o?"delete":"insert";this.addElesForScope(o,l,t,e[n])}}},{key:"addToLocalElementsMerged",value:function(t,e){var a=r.id;e[a]&&this.localElementsMerged[t].push(e[a])}},{key:"addElesForScope",value:function(e,a,n,r){"delete"===a&&t.nonDeletableSections.includes(n)||(this.delta[e][a]||(this.delta[e][a]={}),this.delta[e][a]||(this.delta[e][a]={}),this.delta[e][a][n]||(this.delta[e][a][n]=[]),this.delta[e][a][n].push(r))}}]),t}();f.nonDeletableSections=Object.values(n),self.onmessage=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var a,n,r,o,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.data,n=a.lastSync,r=a.localData,o=a.remoteData,l=new f(n,r,o).compare(),self.postMessage(l);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,a.x=function(){var t=a.O(void 0,[60],(function(){return a(8089)}));return t=a.O(t)},function(){var t=[];a.O=function(e,n,r,i){if(!n){var o=1/0;for(u=0;u<t.length;u++){n=t[u][0],r=t[u][1],i=t[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[s])}))?n.splice(s--,1):(l=!1,i<o&&(o=i));if(l){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,r,i]}}(),a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))},a.u=function(t){return"static/js/"+t+".d10a5730.chunk.js"},a.miniCssF=function(t){},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/app/",function(){var t={89:1};a.f.i=function(e,n){t[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunkanita_app=self.webpackChunkanita_app||[],n=e.push.bind(e);e.push=function(e){var r=e[0],i=e[1],o=e[2];for(var l in i)a.o(i,l)&&(a.m[l]=i[l]);for(o&&o(a);r.length;)t[r.pop()]=1;n(e)}}(),function(){var t=a.x;a.x=function(){return a.e(60).then(t)}}();a.x()}();
//# sourceMappingURL=89.7b5c29f9.chunk.js.map